
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>PayU Türkiye</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
    <link href="images/favicon.ico" rel="icon" type="image/ico" />
  </head>

  <body class="index" data-languages="[&quot;php&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="php">PHP</a>
              <a href="#" data-language-name="python">Python 3</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Ara">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#baslamadan-once" class="toc-h1 toc-link" data-title="Başlamadan Önce">Başlamadan Önce</a>
          </li>
          <li>
            <a href="#api-ile-odeme-almak" class="toc-h1 toc-link" data-title="API ile Ödeme Almak">API ile Ödeme Almak</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#istek-parametreleri" class="toc-h2 toc-link" data-title="API ile Ödeme Almak">İstek Parametreleri</a>
                  </li>
                  <li>
                    <a href="#hash-hesaplama" class="toc-h2 toc-link" data-title="API ile Ödeme Almak">Hash Hesaplama</a>
                  </li>
                  <li>
                    <a href="#yanit-parametreleri" class="toc-h2 toc-link" data-title="API ile Ödeme Almak">Yanıt Parametreleri</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#test-bilgileri" class="toc-h1 toc-link" data-title="Test Bilgileri">Test Bilgileri</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#uye-isyeri-kontrol-paneli-giris-bilgileri" class="toc-h2 toc-link" data-title="Test Bilgileri">Üye İşyeri Kontrol Paneli Giriş Bilgileri</a>
                  </li>
                  <li>
                    <a href="#api-kullanici-bilgileri" class="toc-h2 toc-link" data-title="Test Bilgileri">API Kullanıcı Bilgileri</a>
                  </li>
                  <li>
                    <a href="#test-karti" class="toc-h2 toc-link" data-title="Test Bilgileri">Test Kartı</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#hata-kodlari" class="toc-h1 toc-link" data-title="Hata Kodları">Hata Kodları</a>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a>Doküman:v1.0.0.2</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='baslamadan-once'>Başlamadan Önce</h1>
<aside class="notice">
    Bu dokümanda tüm servislerimizin entegrasyon yapıları tarif edilmektedir. Entegrasyona başlamadan önce aşağıdaki konuları göz önünde bulundurmanız gerekmektedir.
</aside>

<ol>
<li>Entegrasyonunu yaptığınız ödeme yöntemleri (BKM, UPT, COMPAY, WIRE vb.), bazı iş modelleri (TEK TIKLA ÖDEME, PAZARYERİ vb.), döviz tipleri, opsiyonel 3D özelliği gibi işyerine özel durumlar için PayU tarafından hesabınıza tanımlamalar yapılması gerekmektedir. Bu tanımlar ile ilgili satış temsilcinizle ya da destek@payu.com.tr adresimizden bizimle iletişime geçebilirsiniz.</li>
<li>Üye İşyeri Kontrol Paneli’ne giriş için https://secure.payu.com.tr/cpanel/ linkini takip edebilirsiniz.</li>
<li>Test ortam bilgileri ve test kartları, entegrasyon dokümanının son bölümünde yer almaktadır.</li>
<li>Teknik destek almak ve örnek kodlarımız için destek@payu.com.tr adresimizden bizimle iletişime geçebilirsiniz.</li>
<li>Çalışma şeklinin 3D olmaması durumunda da bazı işlemler (ör: debit kartlar, 3D zorunlu ülkelerin kartları vb.) 3D’ye yönlendirileceğinden 3D entegrasyonunun da dokümanda tarif edildiği şekilde yapılması gerekmektedir.</li>
<li>PayU sisteminin döndüğü hatalar tüm bankalardan dönen yanıtlarla birlikte konsolide olmuş (birleştirilmiş) şekilde dönmektedir. Bu hata kodlarına https://www.payu.com.tr/hata-kodları linkini takip ederek erişilebilmektedir.</li>
<li>API entegrasyonunda hata bilgisi konsolide şekilde dönebildiği gibi, PayU tarafından aktifleştirilmesi durumunda banka cevabı doğrudan PROCRETURNCODE ve ERRORMESSAGE içerisinde belirtilmektedir.</li>
<li>ORDER_DATE parametresi ile İşlem / sipariş saati UTC/GMT formatında gönderilmelidir. Sipariş saati (ORDER_DATE) kaynaklı saat (REQUEST_EXPIRED) hatasının önüne geçebilmek için; saat fonksiyonu UTC/GMT formatı ile ayarlanmalı ve Türkiye saatine göre 3 saat geri olacak şekilde gönderilmelidir.</li>
</ol>
<h1 id='api-ile-odeme-almak'>API ile Ödeme Almak</h1><h2 id='istek-parametreleri'>İstek Parametreleri</h2>
<blockquote>
<p>İşlem İsteği Göndermek için:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlencode</span>
<span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>

<span class="c"># Endpoint</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">"https://secure.payu.com.tr/order/alu/v3"</span>

<span class="c"># PayU Merchant's Secret Key</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s">'SECRET_KEY'</span>

<span class="c"># Request @params Begin</span>
<span class="n">array</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c"># PayU Merchant's Merchant ID</span>
    <span class="s">'MERCHANT'</span><span class="p">:</span> <span class="s">"OPU_TEST"</span><span class="p">,</span>
    <span class="s">'LANGUAGE'</span><span class="p">:</span> <span class="s">"TR"</span><span class="p">,</span>
    <span class="s">'ORDER_DATE'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">Y-</span><span class="si">%</span><span class="s">m-</span><span class="si">%</span><span class="s">d </span><span class="si">%</span><span class="s">H:</span><span class="si">%</span><span class="s">M:</span><span class="si">%</span><span class="s">S'</span><span class="p">),</span>
    <span class="s">'PAY_METHOD'</span><span class="p">:</span> <span class="s">"CCVISAMC"</span><span class="p">,</span>
    <span class="s">'BACK_REF'</span><span class="p">:</span> <span class="s">"http://www.backref.com.tr"</span><span class="p">,</span>
    <span class="s">'PRICES_CURRENCY'</span><span class="p">:</span> <span class="s">"TRY"</span><span class="p">,</span>
    <span class="s">'SELECTED_INSTALLMENTS_NUMBER'</span><span class="p">:</span> <span class="s">"1"</span><span class="p">,</span>
    <span class="s">'ORDER_SHIPPING'</span><span class="p">:</span> <span class="s">"5"</span><span class="p">,</span>
    <span class="s">'CLIENT_IP'</span><span class="p">:</span> <span class="s">"127.0.0.1"</span><span class="p">,</span>

    <span class="s">'ORDER_PNAME[0]'</span><span class="p">:</span><span class="s">'Test Ürünü'</span><span class="p">,</span>
    <span class="s">'ORDER_PCODE[0]'</span><span class="p">:</span><span class="s">'Test Kodu'</span><span class="p">,</span>
    <span class="s">'ORDER_PINFO[0]'</span><span class="p">:</span><span class="s">'Test Açıklaması'</span><span class="p">,</span>
    <span class="s">'ORDER_PRICE[0]'</span><span class="p">:</span><span class="s">'5'</span><span class="p">,</span>
    <span class="s">'ORDER_VAT[0]'</span><span class="p">:</span><span class="s">'18'</span><span class="p">,</span>
    <span class="s">'ORDER_PRICE_TYPE[0]'</span><span class="p">:</span><span class="s">'NET'</span><span class="p">,</span>
    <span class="s">'ORDER_QTY[0]'</span><span class="p">:</span><span class="s">'1'</span><span class="p">,</span>

    <span class="s">'ORDER_PNAME[1]'</span><span class="p">:</span><span class="s">'Test Ürünü-2'</span><span class="p">,</span>
    <span class="s">'ORDER_PCODE[1]'</span><span class="p">:</span><span class="s">'Test Kodu-2'</span><span class="p">,</span>
    <span class="s">'ORDER_PINFO[1]'</span><span class="p">:</span><span class="s">'Test Açıklaması-2'</span><span class="p">,</span>
    <span class="s">'ORDER_PRICE[1]'</span><span class="p">:</span><span class="s">'15'</span><span class="p">,</span>
    <span class="s">'ORDER_VAT[1]'</span><span class="p">:</span><span class="s">'24'</span><span class="p">,</span>
    <span class="s">'ORDER_PRICE_TYPE[1]'</span><span class="p">:</span><span class="s">'GROSS'</span><span class="p">,</span>
    <span class="s">'ORDER_QTY[1]'</span><span class="p">:</span><span class="s">'3'</span><span class="p">,</span>

    <span class="s">'CC_NUMBER'</span><span class="p">:</span><span class="s">'4355084355084358'</span><span class="p">,</span>
    <span class="s">'EXP_MONTH'</span><span class="p">:</span><span class="s">'12'</span><span class="p">,</span>
    <span class="s">'EXP_YEAR'</span><span class="p">:</span><span class="s">'2018'</span><span class="p">,</span>
    <span class="s">'CC_CVV'</span><span class="p">:</span><span class="s">'000'</span><span class="p">,</span>
    <span class="s">'CC_OWNER'</span><span class="p">:</span><span class="s">'000'</span><span class="p">,</span>

    <span class="s">'BILL_FNAME'</span><span class="p">:</span><span class="s">'Ad'</span><span class="p">,</span>
    <span class="s">'BILL_LNAME'</span><span class="p">:</span><span class="s">'Soyad'</span><span class="p">,</span>
    <span class="s">'BILL_EMAIL'</span><span class="p">:</span><span class="s">'mail@mail.com'</span><span class="p">,</span>
    <span class="s">'BILL_PHONE'</span><span class="p">:</span><span class="s">'02129003711'</span><span class="p">,</span>
    <span class="s">'BILL_FAX'</span><span class="p">:</span><span class="s">'02129003711'</span><span class="p">,</span>
    <span class="s">'BILL_ADDRESS'</span><span class="p">:</span><span class="s">'Birinci Adres satırı'</span><span class="p">,</span>
    <span class="s">'BILL_ADDRESS2'</span><span class="p">:</span><span class="s">'İkinci Adres satırı'</span><span class="p">,</span>
    <span class="s">'BILL_ZIPCODE'</span><span class="p">:</span><span class="s">'34000'</span><span class="p">,</span>
    <span class="s">'BILL_CITY'</span><span class="p">:</span><span class="s">'ISTANBUL'</span><span class="p">,</span>
    <span class="s">'BILL_COUNTRYCODE'</span><span class="p">:</span><span class="s">'TR'</span><span class="p">,</span>
    <span class="s">'BILL_STATE'</span><span class="p">:</span><span class="s">'Ayazağa'</span><span class="p">,</span>

    <span class="s">'DELIVERY_FNAME'</span><span class="p">:</span><span class="s">'Ad'</span><span class="p">,</span>
    <span class="s">'DELIVERY_LNAME'</span><span class="p">:</span><span class="s">'Soyad'</span><span class="p">,</span>
    <span class="s">'DELIVERY_EMAIL'</span><span class="p">:</span><span class="s">'mail@mail.com'</span><span class="p">,</span>
    <span class="s">'DELIVERY_PHONE'</span><span class="p">:</span><span class="s">'02129003711'</span><span class="p">,</span>
    <span class="s">'DELIVERY_COMPANY'</span><span class="p">:</span><span class="s">'PayU Ödeme Kuruluşu A.Ş.'</span><span class="p">,</span>
    <span class="s">'DELIVERY_ADDRESS'</span><span class="p">:</span><span class="s">'Birinci Adres satırı'</span><span class="p">,</span>
    <span class="s">'DELIVERY_ADDRESS2'</span><span class="p">:</span><span class="s">'İkinci Adres satırı'</span><span class="p">,</span>
    <span class="s">'DELIVERY_ZIPCODE'</span><span class="p">:</span><span class="s">'34000'</span><span class="p">,</span>
    <span class="s">'DELIVERY_CITY'</span><span class="p">:</span><span class="s">'ISTANBUL'</span><span class="p">,</span>
    <span class="s">'DELIVERY_STATE'</span><span class="p">:</span><span class="s">'TR'</span><span class="p">,</span>
    <span class="s">'DELIVERY_COUNTRYCODE'</span><span class="p">:</span><span class="s">'Ayazağa'</span><span class="p">,</span>

<span class="p">}</span>
<span class="c"># Random number generation function for ORDER_REF @param</span>
<span class="n">refno</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100000</span><span class="p">))</span>

<span class="c"># Adding ORDER_REF @param to request array</span>
<span class="n">array</span><span class="p">[</span><span class="s">'ORDER_REF'</span><span class="p">]</span> <span class="o">=</span> <span class="n">refno</span>

<span class="c"># Initializing the hashstring @param</span>
<span class="n">hashstring</span> <span class="o">=</span> <span class="s">''</span>

<span class="c"># Sorting Array @params</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">array</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>

<span class="c"># Adding the length of each field value at the beginning of field value</span>
    <span class="n">hashstring</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">hashstring</span><span class="p">)</span>

<span class="c"># Calculating ORDER_HASH</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashstring</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c"># Adding ORDER_HASH @param to request array</span>
<span class="n">array</span><span class="p">[</span><span class="s">'ORDER_HASH'</span><span class="p">]</span> <span class="o">=</span> <span class="n">signature</span>

<span class="c"># Sending Request to Endpoint</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">urlencode</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>

<span class="c"># Printing result/response</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://secure.payu.com.tr/order/alu/v3"</span><span class="p">;</span>
<span class="nb">date_default_timezone_set</span><span class="p">(</span><span class="s1">'UTC'</span><span class="p">);</span>

<span class="nv">$secretKey</span> <span class="o">=</span> <span class="s1">'SECRET_KEY'</span><span class="p">;</span>

<span class="nv">$arParams</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>

   <span class="s2">"MERCHANT"</span> <span class="o">=&gt;</span> <span class="s2">"OPU_TEST"</span><span class="p">,</span>
   <span class="s2">"LANGUAGE"</span> <span class="o">=&gt;</span> <span class="s2">"TR"</span><span class="p">,</span>
   <span class="s2">"ORDER_REF"</span> <span class="o">=&gt;</span>  <span class="nb">rand</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10000</span><span class="p">),</span>
   <span class="s2">"ORDER_DATE"</span> <span class="o">=&gt;</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'Y-m-d H:i:s'</span><span class="p">),</span>
   <span class="s2">"PAY_METHOD"</span> <span class="o">=&gt;</span> <span class="s2">"CCVISAMC"</span><span class="p">,</span>
   <span class="s2">"BACK_REF"</span> <span class="o">=&gt;</span> <span class="s2">"http://www.backref.com.tr"</span><span class="p">,</span>
   <span class="s2">"PRICES_CURRENCY"</span> <span class="o">=&gt;</span> <span class="s2">"TRY"</span><span class="p">,</span>
   <span class="s2">"SELECTED_INSTALLMENTS_NUMBER"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>
   <span class="s2">"ORDER_SHIPPING"</span><span class="o">=&gt;</span><span class="s2">"5"</span><span class="p">,</span>
   <span class="s2">"CLIENT_IP"</span> <span class="o">=&gt;</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"REMOTE_ADDR"</span><span class="p">],</span>


   <span class="s2">"ORDER_PNAME[0]"</span> <span class="o">=&gt;</span> <span class="s2">"Test Ürünü"</span><span class="p">,</span>
   <span class="s2">"ORDER_PCODE[0]"</span> <span class="o">=&gt;</span> <span class="s2">"Test Kodu"</span><span class="p">,</span>
   <span class="s2">"ORDER_PINFO[0]"</span> <span class="o">=&gt;</span> <span class="s2">"Test Açıklaması"</span><span class="p">,</span>
   <span class="s2">"ORDER_PRICE[0]"</span> <span class="o">=&gt;</span> <span class="s2">"5"</span><span class="p">,</span>
   <span class="s2">"ORDER_VAT[0]"</span><span class="o">=&gt;</span><span class="s2">"18"</span><span class="p">,</span>
   <span class="s2">"ORDER_PRICE_TYPE[0]"</span><span class="o">=&gt;</span><span class="s2">"NET"</span><span class="p">,</span>
   <span class="s2">"ORDER_QTY[0]"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>

   <span class="s2">"ORDER_PNAME[1]"</span> <span class="o">=&gt;</span> <span class="s2">"Test Ürünü-2"</span><span class="p">,</span>
   <span class="s2">"ORDER_PCODE[1]"</span> <span class="o">=&gt;</span> <span class="s2">"Test Kodu-2"</span><span class="p">,</span>
   <span class="s2">"ORDER_PINFO[1]"</span> <span class="o">=&gt;</span> <span class="s2">"Test Açıklaması-2"</span><span class="p">,</span>
   <span class="s2">"ORDER_PRICE[1]"</span> <span class="o">=&gt;</span> <span class="s2">"15"</span><span class="p">,</span>
   <span class="s2">"ORDER_VAT[1]"</span><span class="o">=&gt;</span><span class="s2">"24"</span><span class="p">,</span>
   <span class="s2">"ORDER_PRICE_TYPE[1]"</span><span class="o">=&gt;</span><span class="s2">"GROSS"</span><span class="p">,</span>
   <span class="s2">"ORDER_QTY[1]"</span> <span class="o">=&gt;</span> <span class="s2">"3"</span><span class="p">,</span>

   <span class="s2">"CC_NUMBER"</span> <span class="o">=&gt;</span> <span class="s2">"4355084355084358"</span><span class="p">,</span>
   <span class="s2">"EXP_MONTH"</span> <span class="o">=&gt;</span> <span class="s2">"12"</span><span class="p">,</span>
   <span class="s2">"EXP_YEAR"</span> <span class="o">=&gt;</span> <span class="s2">"2018"</span><span class="p">,</span>
   <span class="s2">"CC_CVV"</span> <span class="o">=&gt;</span> <span class="s2">"000"</span><span class="p">,</span>
   <span class="s2">"CC_OWNER"</span> <span class="o">=&gt;</span> <span class="s2">"000"</span><span class="p">,</span>

   <span class="s2">"BILL_FNAME"</span> <span class="o">=&gt;</span> <span class="s2">"Ad"</span><span class="p">,</span>
   <span class="s2">"BILL_LNAME"</span> <span class="o">=&gt;</span> <span class="s2">"Soyad"</span><span class="p">,</span>
   <span class="s2">"BILL_EMAIL"</span> <span class="o">=&gt;</span> <span class="s2">"mail@mail.com"</span><span class="p">,</span>
   <span class="s2">"BILL_PHONE"</span> <span class="o">=&gt;</span> <span class="s2">"02129003711"</span><span class="p">,</span>
   <span class="s2">"BILL_FAX"</span> <span class="o">=&gt;</span> <span class="s2">"02129003711"</span><span class="p">,</span>
   <span class="s2">"BILL_ADDRESS"</span> <span class="o">=&gt;</span> <span class="s2">"Birinci Adres satırı"</span><span class="p">,</span>
   <span class="s2">"BILL_ADDRESS2"</span> <span class="o">=&gt;</span> <span class="s2">"İkinci Adres satırı"</span><span class="p">,</span>
   <span class="s2">"BILL_ZIPCODE"</span> <span class="o">=&gt;</span> <span class="s2">"34000"</span><span class="p">,</span>
   <span class="s2">"BILL_CITY"</span> <span class="o">=&gt;</span> <span class="s2">"ISTANBUL"</span><span class="p">,</span>
   <span class="s2">"BILL_COUNTRYCODE"</span> <span class="o">=&gt;</span> <span class="s2">"TR"</span><span class="p">,</span>
   <span class="s2">"BILL_STATE"</span> <span class="o">=&gt;</span> <span class="s2">"Ayazağa"</span><span class="p">,</span>

   <span class="s2">"DELIVERY_FNAME"</span> <span class="o">=&gt;</span> <span class="s2">"Ad"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_LNAME"</span> <span class="o">=&gt;</span> <span class="s2">"Soyad"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_EMAIL"</span> <span class="o">=&gt;</span> <span class="s2">"mail@mail.com"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_PHONE"</span> <span class="o">=&gt;</span> <span class="s2">"02129003711"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_COMPANY"</span> <span class="o">=&gt;</span> <span class="s2">"PayU Ödeme Kuruluşu A.Ş."</span><span class="p">,</span>
   <span class="s2">"DELIVERY_ADDRESS"</span> <span class="o">=&gt;</span> <span class="s2">"Birinci Adres satırı"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_ADDRESS2"</span> <span class="o">=&gt;</span> <span class="s2">"İkinci Adres satırı"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_ZIPCODE"</span> <span class="o">=&gt;</span> <span class="s2">"34000"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_CITY"</span> <span class="o">=&gt;</span> <span class="s2">"ISTANBUL"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_STATE"</span> <span class="o">=&gt;</span> <span class="s2">"TR"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_COUNTRYCODE"</span> <span class="o">=&gt;</span> <span class="s2">"Ayazağa"</span><span class="p">,</span>
<span class="p">);</span>

<span class="nb">ksort</span><span class="p">(</span><span class="nv">$arParams</span><span class="p">);</span>
<span class="nv">$hashString</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$arParams</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$val</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$hashString</span> <span class="o">.=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$val</span><span class="p">)</span> <span class="o">.</span> <span class="nv">$val</span><span class="p">;</span>
<span class="p">}</span>
<span class="nv">$arParams</span><span class="p">[</span><span class="s2">"ORDER_HASH"</span><span class="p">]</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s2">"md5"</span><span class="p">,</span> <span class="nv">$hashString</span><span class="p">,</span> <span class="nv">$secretKey</span><span class="p">);</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>

<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYHOST</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_IPRESOLVE</span><span class="p">,</span> <span class="nx">CURL_IPRESOLVE_V4</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_TIMEOUT</span><span class="p">,</span> <span class="mi">60</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="nv">$arParams</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="nv">$curlerrcode</span> <span class="o">=</span> <span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$curlerr</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$curlerr</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$curlerrcode</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$parsedXML</span> <span class="o">=</span> <span class="o">@</span><span class="nb">simplexml_load_string</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$parsedXML</span> <span class="o">!==</span> <span class="k">FALSE</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
        <span class="nb">print_r</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
        <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>

        <span class="nv">$payuTranReference</span> <span class="o">=</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">REFNO</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">STATUS</span> <span class="o">==</span> <span class="s2">"SUCCESS"</span><span class="p">)</span> <span class="p">{</span>


            <span class="k">if</span> <span class="p">((</span><span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">RETURN_CODE</span> <span class="o">==</span> <span class="s2">"3DS_ENROLLED"</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">URL_3DS</span><span class="p">)))</span> <span class="p">{</span>
                <span class="nb">header</span><span class="p">(</span><span class="s2">"Location:"</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">URL_3DS</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s2">"SUCCES [PayU reference number: "</span> <span class="o">.</span> <span class="nv">$payuTranReference</span> <span class="o">.</span> <span class="s2">"]"</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">echo</span> <span class="s2">"Error: "</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">RETURN_MESSAGE</span> <span class="o">.</span> <span class="s2">" ["</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">RETURN_CODE</span> <span class="o">.</span> <span class="s2">"]"</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s2">"&lt;br&gt;"</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s2">"Error Details: "</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">ERRORMESSAGE</span> <span class="o">.</span> <span class="s2">"&lt;br&gt; Error Code: ["</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">PROCRETURNCODE</span> <span class="o">.</span> <span class="s2">"]"</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$payuTranReference</span><span class="p">))</span> <span class="p">{</span>
                <span class="c1">//the transaction was register to PayU system, but some error occured during the bank authorization.
</span>                <span class="c1">//See $parsedXML-&gt;RETURN_MESSAGE and $parsedXML-&gt;RETURN_CODE for details
</span>                <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
                <span class="k">echo</span> <span class="s2">" [PayU reference number: "</span> <span class="o">.</span> <span class="nv">$payuTranReference</span> <span class="o">.</span> <span class="s2">"]"</span><span class="p">;</span>
                <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>

            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"cURL error: "</span> <span class="o">.</span> <span class="nv">$curlerr</span><span class="p">;</span>

<span class="p">}</span>

</code></pre>
<aside class="warning">
    ÖNEMLİ NOT:
    Teknik entegrasyon açısından tüm parametrelerin gönderilmesi, işlemlerin analizinin doğru yapılabilmesine olanak sağlamaktadır ve fraud işlemlerin önlenmesinde hayati rol oynamaktadır. Bu sebeple alanların mümkün olduğu ölçüde gönderilmesi tavsiye edilmektedir.
</aside>

<p>Endpoint: <code>https://secure.payu.com.tr/order/alu/v3</code></p>
<h3 id='islem-parametereleri'>İşlem Parametereleri</h3>
<table><thead>
<tr>
<th>Parametre</th>
<th>Değer</th>
<th>Açıklama</th>
<th>Zorunlu</th>
</tr>
</thead><tbody>
<tr>
<td>MERCHANT</td>
<td>string</td>
<td>İşyerini ID bilgisidir. Üye İşyeri Kontrol Paneli’nde, hesap ayarları sayfasında bulunmaktadır.</td>
<td>Evet</td>
</tr>
<tr>
<td>LANGUAGE</td>
<td>string</td>
<td>İşlemin gerçekleştiği dilin kısa kodu değeri (TR/EN)</td>
<td>Evet</td>
</tr>
<tr>
<td>ORDER_REF</td>
<td>string/int</td>
<td>İşyerinin kendi belirlediği sipariş/işlem numarasıdır. Her başarılı / başarısız işlemde benzersiz bir değer atanmalıdır.</td>
<td>Evet</td>
</tr>
<tr>
<td>ORDER_DATE</td>
<td>string</td>
<td>İşlem/sipariş saati</td>
<td></td>
</tr>
<tr>
<td>PAY_METHOD</td>
<td>string</td>
<td>Ödeme yöntemini belirtir. Alabileceği değerler; <code> 1.<strong>“CCVISAMC”</strong> (Kartlı işlemler) </code>  <code> 2.<strong>“BKM”</strong> (BKM Express işlemleri) </code> <code> 3.<strong>“UPT”</strong> (Ucuz Para Transferi işlemleri) </code> <code> 4.<strong>“COMPAY”</strong> (Online Havale işlemleri) </code> <code> 5.<strong>“WIRE”</strong> (Havale/EFT işlemleri) </code></td>
<td>Evet</td>
</tr>
<tr>
<td>ORDER_HASH</td>
<td>string</td>
<td>Sipariş içeriğindeki tüm parametre değerlerinin key&#39;e göre sıralanıp, üye işyeri kodlama anahtarı kullanılarak HMAC MD5 algoritması ile hashlenerek elde edilen değerdir. Hash hesaplaması için Bknz: <a href="#hash-hesaplama">Hash Hesaplama</a></td>
<td>Evet</td>
</tr>
<tr>
<td>BACK_REF</td>
<td>string</td>
<td>Ödeme işlemi tamamlandıktan sonra kullanıcının yönlendirileceği URL’dir. 3D işlemlerde işleme ait parametreler de BACK_REF URL’e post edilir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>PRICES_CURRENCY[]</td>
<td>string</td>
<td>İşlemin gerçekleşeceği para birimini belirleyen parametredir (TRY, EUR, USD, GBP). Türk kartlar için dövizli işlem gönderilmemelidir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>SELECTED_INSTALLMENTS_NUMBER</td>
<td>int</td>
<td>Taksit yapılacaksa taksit bilgisinin belirtildiği parametredir.Vade farkı/komisyon bilgileri Üye işyeri kontrol panelinde “Hesap Yönetimi” &gt; “Finansal Yönetim” adımı altında sunulmaktadır. Bu sayfa aracılığı ile komisyonlar kart hamiline ya da işyerine yansıtılabilmektedir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>ORDER_SHIPPING</td>
<td>int</td>
<td>Teslimat/Kargo ücretinin belirtildiği parametredir. Kullanılan para birimi ürün bilgisindeki PRICES_CURRENCY[]’den alınmaktadır.</td>
<td>Hayır</td>
</tr>
<tr>
<td>CLIENT_IP</td>
<td>string</td>
<td>Kullanıcı IP’sinin belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
</tbody></table>
<h3 id='urun-parametereleri'>Ürün Parametereleri</h3>
<table><thead>
<tr>
<th>Parametre</th>
<th>Değer</th>
<th>Açıklama</th>
<th>Zorunlu</th>
</tr>
</thead><tbody>
<tr>
<td>ORDER_PNAME[]</td>
<td>string</td>
<td>Minimum 2, maksimum 155 karakterden oluşan ürün isminin gönderildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>ORDER_PCODE[]</td>
<td>string</td>
<td>Maksimum 50 karakterden oluşan ürün kodunun gönderildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>ORDER_PINFO[]</td>
<td>string</td>
<td>Ürün bilgisinin belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>ORDER_VER[]</td>
<td>string</td>
<td>Ürün versiyonunun belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>ORDER_PRICE[]</td>
<td>string</td>
<td>Ürün fiyatının gönderildiği parametredir. Ondalık simgesi olarak &quot;.&quot;(nokta) kullanılmalıdır. &quot;,&quot;(virgül) kullanımında hata alınacaktır.</td>
<td>Evet</td>
</tr>
<tr>
<td>ORDER_VAT[]</td>
<td>int</td>
<td>Üründe uygulanan verginin belirlendiği parametredir 1, 8 veya 18 olarak belirlenmelidir.</td>
<td>Evet</td>
</tr>
<tr>
<td>ORDER_PRICE_TYPE[]</td>
<td>string</td>
<td>KDV tipinin belirlendiği parametredir. &quot;GROSS&quot; değeri ile gönderilmesi durumunda ürün fiyatına KDV dahil kabul edilecektir. &quot;NET&quot; gönderilmesi durumunda KDV, PayU tarafından ürünün tutarına eklenecektir.</td>
<td>Evet</td>
</tr>
<tr>
<td>ORDER_QTY[]</td>
<td>int</td>
<td>Ürün adedinin belirlendiği parametredir.</td>
<td>Evet</td>
</tr>
</tbody></table>
<h3 id='kart-bilgileri'>Kart Bilgileri</h3>
<table><thead>
<tr>
<th>Parametre</th>
<th>Değer</th>
<th>Açıklama</th>
<th>Zorunlu</th>
</tr>
</thead><tbody>
<tr>
<td>CC_NUMBER</td>
<td>string</td>
<td>Kart numarasının belirtildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>EXP_MONTH</td>
<td>string</td>
<td>Kartın son kullanım tarihi ay bilgisinin belirtildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>EXP_YEAR</td>
<td>string</td>
<td>Kartın son kullanım tarihi yıl bilgisinin belirtildiği parametredir. Dört haneli olarak belirlenmelidir.</td>
<td>Evet</td>
</tr>
<tr>
<td>CC_CVV</td>
<td>string</td>
<td>Kartın güvenlik kodunu belirtildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>CC_OWNER</td>
<td>string</td>
<td>Kart hamilinin isim-soyisim bilgisinin belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
</tbody></table>
<h3 id='fatura-parametereleri'>Fatura Parametereleri</h3>
<table><thead>
<tr>
<th>Parametre</th>
<th>Değer</th>
<th>Açıklama</th>
<th>Zorunlu</th>
</tr>
</thead><tbody>
<tr>
<td>BILL_FNAME</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin adı.</td>
<td>Evet</td>
</tr>
<tr>
<td>BILL_LNAME</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin soyadı.</td>
<td>Evet</td>
</tr>
<tr>
<td>BILL_EMAIL</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin email adresi.</td>
<td>Evet</td>
</tr>
<tr>
<td>BILL_PHONE</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin telefon numarası.</td>
<td>Evet</td>
</tr>
<tr>
<td>BILL_FAX</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin faks numarasının belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>BILL_ADDRESS</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin adresinin belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>BILL_ADDRESS2</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin adresinin belirtildiği parametredir. (ikinci satır için)</td>
<td>Hayır</td>
</tr>
<tr>
<td>BILL_ZIPCODE</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin posta kodunun belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>BILL_CITY</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin şehir bilgisinin belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>BILL_COUNTRYCODE</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin iki karakterli ülke kodu. (ISO Alpha-2 formatında)</td>
<td>Evet</td>
</tr>
<tr>
<td>BILL_STATE</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin semt/ilçe bilgisinin belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
</tbody></table>
<h3 id='teslimat-parametereleri'>Teslimat Parametereleri</h3>
<table><thead>
<tr>
<th>Parametre</th>
<th>Değer</th>
<th>Açıklama</th>
<th>Zorunlu</th>
</tr>
</thead><tbody>
<tr>
<td>DELIVERY_FNAME</td>
<td>string</td>
<td>Teslim edilecek kişinin adı.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_LNAME</td>
<td>string</td>
<td>Teslim edilecek kişinin soyadı.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_EMAIL</td>
<td>string</td>
<td>Teslim edilecek kişinin email adresi.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_PHONE</td>
<td>string</td>
<td>Teslim edilecek kişinin telefon numarası.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_COMPANY</td>
<td>string</td>
<td>Teslim edilecek kişinin şirket bilgisi.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_ADDRESS</td>
<td>string</td>
<td>Teslim edilecek kişinin adresi.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_ADDRESS2</td>
<td>string</td>
<td>Teslim edilecek kişinin adresi. (ikinci satır için)</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_ZIPCODE</td>
<td>string</td>
<td>Teslim edilecek kişinin posta kodu.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_CITY</td>
<td>string</td>
<td>Teslim edilecek kişinin şehir bilgisi.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_STATE</td>
<td>string</td>
<td>Teslim edilecek kişinin semt/ilçe bilgisi.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_COUNTRYCODE</td>
<td>string</td>
<td>Teslim edilecek kişinin iki karakterli ülke kodu. (ISO Alpha-2 formatında).</td>
<td>Hayır</td>
</tr>
</tbody></table>
<h3 id='fraud-icin-ekstra-parametreler'>Fraud için Ekstra Parametreler</h3>
<table><thead>
<tr>
<th>Parametre</th>
<th>Değer</th>
<th>Açıklama</th>
<th>Zorunlu</th>
</tr>
</thead><tbody>
<tr>
<td>CC_NUMBER_TIME</td>
<td>string</td>
<td>Kullanıcının kart numarasını giriş hızının belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>CC_OWNER_TIME</td>
<td>string</td>
<td>Kullanıcının kart üzerindeki ismi giriş hızının belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>CLIENT_TIME</td>
<td>string</td>
<td>Kullanıcının tarayıcısından YYYY-MM-DD hh:mm;ss formatında alınan zaman bilgisinin belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
</tbody></table>
<h2 id='hash-hesaplama'>Hash Hesaplama</h2>
<blockquote>
<p>1.Adım İşlem isteği gönderilmeden önce dizi içerisindeki tüm parametreler KEY&#39;e göre sıralanmalıdır.</p>
</blockquote>
<pre class="highlight python tab-python"><code></code></pre><pre class="highlight php tab-php"><code>
[BACK_REF] =&gt; http://www.backref.com.tr
[BILL_ADDRESS] =&gt; Birinci Adres satırı 
[BILL_ADDRESS2] =&gt; İkinci Adres satırı 
[BILL_CITY] =&gt; ISTANBUL 
[BILL_COUNTRYCODE] =&gt; TR 
[BILL_EMAIL] =&gt; mail@mail.com 
[BILL_FAX] =&gt; 02129003711 
[BILL_FNAME] =&gt; Ad 
[BILL_LNAME] =&gt; Soyad 
[BILL_PHONE] =&gt; 02129003711 
[BILL_STATE] =&gt; Ayazağa 
[BILL_ZIPCODE] =&gt; 34000 
[CC_CVV] =&gt; 000 
[CC_NUMBER] =&gt; 4355084355084358 
[CC_OWNER] =&gt; 000 
[CLIENT_IP] =&gt; 127.0.0.1 
[DELIVERY_ADDRESS] =&gt; Birinci Adres satırı 
[DELIVERY_ADDRESS2] =&gt; İkinci Adres satırı 
[DELIVERY_CITY  ] =&gt; ISTANBUL 
[DELIVERY_COMPANY] =&gt; PayU Ödeme Kuruluşu A.Ş. 
[DELIVERY_COUNTRYCODE   ] =&gt; Ayazağa 
[DELIVERY_EMAIL] =&gt; mail@mail.com 
[DELIVERY_FNAME] =&gt; Ad 
[DELIVERY_LNAME] =&gt; Soyad 
[DELIVERY_PHONE] =&gt; 02129003711 
[DELIVERY_STATE] =&gt; TR 
[DELIVERY_ZIPCODE] =&gt; 34000 
[EXP_MONTH] =&gt; 12 
[EXP_YEAR] =&gt; 2018 
[LANGUAGE] =&gt; TR 
[MERCHANT] =&gt; OPU_TEST 
[ORDER_DATE] =&gt; 2017-10-04 10:53:33 
[ORDER_PCODE[0]] =&gt; Test Kodu 
[ORDER_PCODE[1]] =&gt; Test Kodu-2 
[ORDER_PINFO[0]] =&gt; Test Açıklaması 
[ORDER_PINFO[1]] =&gt; Test Açıklaması-2 
[ORDER_PNAME[0]] =&gt; Test Ürünü 
[ORDER_PNAME[1]] =&gt; Test Ürünü-2 
[ORDER_PRICE[0]] =&gt; 5 
[ORDER_PRICE[1]] =&gt; 15 
[ORDER_PRICE_TYPE[0]] =&gt; NET 
[ORDER_PRICE_TYPE[1]] =&gt; GROSS 
[ORDER_QTY[0]] =&gt; 1 
[ORDER_QTY[1]] =&gt; 3 
[ORDER_REF] =&gt; 2088 
[ORDER_SHIPPING] =&gt; 5 
[ORDER_VAT[0]] =&gt; 18 
[ORDER_VAT[1]] =&gt; 24 
[PAY_METHOD] =&gt; CCVISAMC 
[PRICES_CURRENCY] =&gt; TRY 
[SELECTED_INSTALLMENTS_NUMBER] =&gt; 1

</code></pre>
<blockquote>
<p>2.Adım Parametre değerlerinin başına uzunlukları eklenerek HASH string oluşturulmalı (UTF-8 Bayt olarak).</p>
</blockquote>
<pre class="highlight python tab-python"><code></code></pre><pre class="highlight php tab-php"><code></code></pre>
<blockquote>
<p>3.Adım Oluşturulan dizi PayU üye işyeri hesabınızın Hesap Yönetimi / Hesap Ayarları bölümünde yer alan kodlama anahtarı bilgisi kullanılarak HMAC_MD5 algoritması ile hashlenmeli.
<strong>Örnekte kullanılan kodlama anahtarı değeri: SECRET_KEY</strong></p>
</blockquote>
<pre class="highlight python tab-python"><code></code></pre><pre class="highlight php tab-php"><code></code></pre>
<aside class="warning">
    ÖNEMLİ NOT:
 Güvenlik gerekçesiyle her HTTPS POST isteği benzersiz bir imzaya sahip olmalıdır.
</aside>

<p>İstek yapılmadan önce, istekte bulunacak parametrelerin başına uzunlukları (UTF-8 bayt olarak) eklenerek bir dizi oluşturulur. Ardından dizi, PayU üye işyeri hesabınızın, Hesap Yönetimi/Hesap Ayarları bölümünde yer alan kodlama anahtarı bilgisi kullanılarak HMAC_MD5 algoritması ile hashlenir. </p>

<p><strong>Oluşan hash ORDER_HASH parametresine atanmalıdır.</strong></p>

<ul>
<li>HMAC MD5 algoritmasıyla ilgili bilgi için linki takip edebilirsiniz https://en.wikipedia.org/wiki/Hash-based_message_authentication_code</li>
</ul>

<p>Hash hesaplama adımları aşağıdaki gibi olmalıdır:</p>

<ol>
<li>Adım: PayU&#39;ya işlem isteği gönderilmeden önce dizi içerisindeki tüm
parametreler KEY’e göre sıralanmalıdır.</li>
</ol>

<aside class="warning">
ORDER_PNAME, ORDER_PCODE, ORDER_PINFO, ORDER_PRICE and ORDER_QTY parametreleri köşeli parantez ( [] ) kullanılarak parantez içerisine sıra numarası yazılmalı.
</aside>

<ol>
<li><p>Adım: Parametre değerlerinin başına uzunlukları eklenerek HASH string oluşturulmalı (UTF-8 Bayt olarak).</p></li>
<li><p>Adım: Oluşturulan dizi PayU üye işyeri hesabınızın Hesap Yönetimi / Hesap Ayarları bölümünde yer alan kodlama anahtarı bilgisi kullanılarak HMAC_MD5 algoritması ile hashlenmeli.</p></li>
</ol>
<h2 id='yanit-parametreleri'>Yanıt Parametreleri</h2>
<p>PayU sistemi, yapılan isteğe   XML formatında bir yanıt dönmektedir. 
Bu yanıt;</p>

<ul>
<li><p>İşlemin başarılı olup olmadığını,başarılı olmadıysa sebebini ve ek bilgileri içermektedir.</p></li>
<li><p>İşyeri XML formatındaki bu datayı ayrıştırıp kendi sisteminde işlemelidir.</p></li>
<li><p>3D işlem yapılması durumunda aynı data HTTP POST ile BACK_REF url’ine gönderilmektedir.</p></li>
</ul>
<h3 id='yanit-parametreleri-2'>Yanıt Parametreleri</h3>
<aside class="notice">
    ÖNEMLİ NOT:
Ekstra parametre olarak işaretlenen parametrelerin aktifleştirilmesi için üye işyeri satış temsilciniz ile iletişime geçebilir veya destek@payu.com.tr adresinden bizler ile iletişime geçerek talep edebilirsiniz.</aside>

<table><thead>
<tr>
<th>Parametre</th>
<th>Açıklama</th>
<th>Ekstra Parametre</th>
</tr>
</thead><tbody>
<tr>
<td>REFNO</td>
<td>İşleme ait PayU referans numarasının bildirildiği parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>ALIAS</td>
<td>Üye işyerinin kendi tarafında kullanabileceği benzersiz işlem dizesidir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>STATUS</td>
<td>Alabileceği Değerler: <code> <strong>SUCCESS</strong> <strong>FAILED</strong> <strong>INPUT_ERROR</strong> </code></td>
<td>Hayır</td>
</tr>
<tr>
<td>RETURN_CODE</td>
<td>Alabileceği Değerler: <code> <strong>AUTHORIZED</strong> <strong>3DS_ENROLLED</strong> <strong>ALREADY_AUTHORIZED</strong> <strong>AUTHORIZATION_FAILED</strong> <strong>INVALID_CUSTOMER_INFO</strong> <strong>INVALID_PAYMENT_INFO</strong> <strong>INVALID_ACCOUNT</strong> <strong>INVALID_PAYMENT_METHOD_CODE</strong> <strong>INVALID_CURRENCY</strong> <strong>REQUEST_EXPIRED</strong> <strong>HASH_MISMATCH</strong> <strong>WRONG_VERSION</strong> <strong>INVALID_CC_TOKEN</strong></code></td>
<td>Hayır</td>
</tr>
<tr>
<td>RETURN_MESSAGE</td>
<td>RETURN_CODE parametreleri ile dönen değerlerin daha detaylı açıklamasını içeren parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DATE</td>
<td>UTC formatında response zaman değerini belirten parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>URL_3DS</td>
<td>3DS_ENROLLED fonksiyonunun içerisinde işlemi 3D olarak tamamlatabilmek için 3D Secure sayfasına yönlendirmeniz gereken URL&#39;yi dönen parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>AMOUNT</td>
<td>Toplam işlem tutarını belirten parametredir. Mutlaka sıfırdan büyük olmalıdır.</td>
<td>Hayır</td>
</tr>
<tr>
<td>CURRENCY</td>
<td>İşlemde kullanılan para birimini belirten parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>INSTALLMENTS_NO</td>
<td>İşlemde kullanılan kartın, program ismini belirten parametredir (Axess,Bonus vb.).</td>
<td>Hayır</td>
</tr>
<tr>
<td>CARD_PROGRAM_NAME</td>
<td>İşlemde seçilen taksit sayısını belirten parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>ORDER_REF</td>
<td>Üye işyeri tarafından request sırasında belirlenen sipariş referans numarasıdır.</td>
<td>Hayır</td>
</tr>
<tr>
<td>AUTH_CODE</td>
<td>Bankanın otorizasyon işlem numarasıdır.</td>
<td>Hayır</td>
</tr>
<tr>
<td>RRN</td>
<td>Bankaların iade işlemi için kullandığı işlem numarasıdır.</td>
<td>Hayır</td>
</tr>
<tr>
<td>HASH</td>
<td>Response sırasında gelen tüm parametreler geldiği sıra ile uzunluğu alınıp, dizine çevirilip aynı algoritma ile hash hesaplaması sonucu elde edilen değerdir. URL_3DS, hash hesaplamasına dahil değildir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>PROCRETURNCODE</td>
<td>Yanıt içerisinde bankaların hata açıklama kodunun iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>ERRORMESSAGE</td>
<td>Yanıt içerisinde bankaların hata açıklama mesajının iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>BANK_MERCHANT_ID</td>
<td>Yanıt içerisinde işlemin gerçekleştiği Sanal POS’un bankadaki üye işyeri numarasının iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>PAN</td>
<td>Yanıt içerisinde işlemin gerçekleştiği kartın numarasının maskeli biçimde iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>EXPYEAR</td>
<td>Yanıt içerisinde işlemin gerçekleştiği kartın son kullanma yılının iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>EXPMONTH</td>
<td>Yanıt içerisinde işlemin gerçekleştiği kartın son kullanma ayının iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>OID</td>
<td>Yanıt içerisinde üye işyerlerinin kendi belirledikleri sipariş numarasının iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>TERMINAL_BANK</td>
<td>Yanıt içerisinde işlemin gerçekleştiği Sanal POS bankasının iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>MDSTATUS, MDERRORMSG, TXSTATUS, XID, ECI, CAVV</td>
<td>Yanıt içerisinde 3DS işlem parametrelerinin iletildiği parametrelerdir.</td>
<td>Evet</td>
</tr>
<tr>
<td>TRANSID</td>
<td>Yanıt içerisinde banka işlem numarasının iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>CLIENTID</td>
<td>Yanıt içerisinde işlemin gerçekleştiği Sanal POS’un bankadaki müşteri numarasının iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>MDSTATUS, MDERRORMSG, TXSTATUS, XID, ECI, CAVV</td>
<td>Yanıt içerisinde 3DS işlem parametrelerinin iletildiği parametrelerdir.</td>
<td>Evet</td>
</tr>
</tbody></table>
<h1 id='test-bilgileri'>Test Bilgileri</h1><h2 id='uye-isyeri-kontrol-paneli-giris-bilgileri'>Üye İşyeri Kontrol Paneli Giriş Bilgileri</h2>
<p>Üye İşyeri Kontrol Paneli’ne girişlerde IP kısıtı uygulanmaktadır. Test hesabının üye işyeri paneline giriş yapabilmek için IP adreslerinizi destek@payu.com.tr adresimizden bize iletmeniz gerekmektedir.</p>

<ul>
<li>URL: https://secure.payu.com.tr/cpanel/ </li>
<li>Kullanıcı Adı: 1@payu.com.tr</li>
<li>Şifre: Test1234!</li>
<li>Kullanıcı Adı: 2@payu.com.tr </li>
<li>Şifre: Test1234!</li>
</ul>
<h2 id='api-kullanici-bilgileri'>API Kullanıcı Bilgileri</h2><h3 id='3d-olmayan-islemler-icin'>3D olmayan işlemler için;</h3>
<ul>
<li>Üye İşyeri Entegrasyon İsmi (MERCHANT): OPU_TEST </li>
<li>Kodlama Anahtarı (SECRET_KEY): SECRET_KEY</li>
</ul>
<h3 id='3d-islemler-icin'>3D işlemler için;</h3>
<ul>
<li>MERCHANT=PALJZXGV</li>
<li>SECRET_KEY= f*%J7z6_#|5]s7V4[g3] </li>
</ul>
<h2 id='test-karti'>Test Kartı</h2>
<ul>
<li>Kart Numarası (Visa) : 4355084355084358</li>
<li>Kart Numarası (Master Card) : 5571135571135575</li>
<li>Son Kullanma Tarihi :12/18</li>
<li>Güvenlik Numarası : 000</li>
<li>Kart 3D Secure Şifresi : a</li>
</ul>
<h1 id='hata-kodlari'>Hata Kodları</h1>
<aside class="notice">This error section is stored in a separate file in `includes/_errors.md`. Slate allows you to optionally separate out your docs into many files...just save them to the `includes` folder and add them to the top of your `index.md`'s frontmatter. Files are included in the order listed.</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request sucks.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The kitten requested is hidden for administrators only.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified kitten could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a kitten with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t json.</td>
</tr>
<tr>
<td>410</td>
<td>Gone -- The kitten requested has been removed from our servers.</td>
</tr>
<tr>
<td>418</td>
<td>I&#39;m a teapot.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="php">PHP</a>
                <a href="#" data-language-name="python">Python 3</a>
          </div>
      </div>
    </div>
  </body>
</html>
