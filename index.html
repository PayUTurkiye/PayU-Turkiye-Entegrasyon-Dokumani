
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>PayU Türkiye</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
    <link href="images/favicon.ico" rel="icon" type="image/ico" />
  </head>

  <body class="index" data-languages="[&quot;php&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="php">PHP</a>
              <a href="#" data-language-name="python">Python 3</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Ara">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#baslamadan-once" class="toc-h1 toc-link" data-title="Başlamadan Önce">Başlamadan Önce</a>
          </li>
          <li>
            <a href="#api-ile-odeme-alma" class="toc-h1 toc-link" data-title="API ile Ödeme Alma">API ile Ödeme Alma</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#istek-parametreleri" class="toc-h2 toc-link" data-title="API ile Ödeme Alma">İstek Parametreleri</a>
                  </li>
                  <li>
                    <a href="#yanit-parametreleri" class="toc-h2 toc-link" data-title="API ile Ödeme Alma">Yanıt Parametreleri</a>
                  </li>
                  <li>
                    <a href="#hash-hesaplama" class="toc-h2 toc-link" data-title="API ile Ödeme Alma">Hash Hesaplama</a>
                  </li>
                  <li>
                    <a href="#3d-entegrasyonu" class="toc-h2 toc-link" data-title="API ile Ödeme Alma">3D Entegrasyonu</a>
                  </li>
                  <li>
                    <a href="#kart-saklama-ve-saklanmis-kart-ile-odeme-alma" class="toc-h2 toc-link" data-title="API ile Ödeme Alma">Kart Saklama ve Saklanmış Kart ile Ödeme Alma</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#asenkron-bildirim-servisi-ipn" class="toc-h1 toc-link" data-title="Asenkron Bildirim Servisi(IPN)">Asenkron Bildirim Servisi(IPN)</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#ipn-hash-hesaplama" class="toc-h2 toc-link" data-title="Asenkron Bildirim Servisi(IPN)">IPN Hash Hesaplama</a>
                  </li>
                  <li>
                    <a href="#bildirime-yanit-verme" class="toc-h2 toc-link" data-title="Asenkron Bildirim Servisi(IPN)">Bildirime Yanıt Verme</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#islem-sorgu-servisi-ios" class="toc-h1 toc-link" data-title="İşlem Sorgu Servisi(IOS)">İşlem Sorgu Servisi(IOS)</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#ios-sorgusu-istek-parametreleri" class="toc-h2 toc-link" data-title="İşlem Sorgu Servisi(IOS)">IOS Sorgusu İstek Parametreleri</a>
                  </li>
                  <li>
                    <a href="#ios-sorgusu-yanit-parametreleri" class="toc-h2 toc-link" data-title="İşlem Sorgu Servisi(IOS)">IOS Sorgusu Yanıt Parametreleri</a>
                  </li>
                  <li>
                    <a href="#sorgu-sonuc-mesajlari" class="toc-h2 toc-link" data-title="İşlem Sorgu Servisi(IOS)">Sorgu Sonuç Mesajları</a>
                  </li>
                  <li>
                    <a href="#islem-sorgu-servisi-hash-hesaplama" class="toc-h2 toc-link" data-title="İşlem Sorgu Servisi(IOS)">İşlem Sorgu Servisi Hash Hesaplama</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#iptal-iade-servisi-irn" class="toc-h1 toc-link" data-title="İptal/İade Servisi (IRN)">İptal/İade Servisi (IRN)</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#iptal-iade-servisi-istek-parametreleri" class="toc-h2 toc-link" data-title="İptal/İade Servisi (IRN)">İptal/İade Servisi İstek Parametreleri</a>
                  </li>
                  <li>
                    <a href="#iptal-iade-servisi-yanit-parametreleri" class="toc-h2 toc-link" data-title="İptal/İade Servisi (IRN)">İptal/İade Servisi Yanıt Parametreleri</a>
                  </li>
                  <li>
                    <a href="#iptal-iade-servisi-hash-hesaplama" class="toc-h2 toc-link" data-title="İptal/İade Servisi (IRN)">İptal/İade Servisi Hash Hesaplama</a>
                  </li>
                  <li>
                    <a href="#iptal-iade-servisi-sonuc-mesajlari" class="toc-h2 toc-link" data-title="İptal/İade Servisi (IRN)">İptal/İade Servisi Sonuç Mesajları</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#bin-servisi" class="toc-h1 toc-link" data-title="BIN Servisi">BIN Servisi</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#bin-servisi-v1" class="toc-h2 toc-link" data-title="BIN Servisi">BIN Servisi v1</a>
                  </li>
                  <li>
                    <a href="#bin-servisi-v2-bin-ve-puan-sorgusu" class="toc-h2 toc-link" data-title="BIN Servisi">BIN Servisi v2(BIN ve Puan Sorgusu)</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#test-bilgileri" class="toc-h1 toc-link" data-title="Test Bilgileri">Test Bilgileri</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#uye-isyeri-kontrol-paneli-giris-bilgileri" class="toc-h2 toc-link" data-title="Test Bilgileri">Üye İşyeri Kontrol Paneli Giriş Bilgileri</a>
                  </li>
                  <li>
                    <a href="#api-kullanici-bilgileri" class="toc-h2 toc-link" data-title="Test Bilgileri">API Kullanıcı Bilgileri</a>
                  </li>
                  <li>
                    <a href="#test-kartlari" class="toc-h2 toc-link" data-title="Test Bilgileri">Test Kartları</a>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a>Doküman:v1.5</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='baslamadan-once'>Başlamadan Önce</h1>
<aside class="notice">
    Bu dokümanda tüm servislerimizin entegrasyon yapıları tarif edilmektedir. Entegrasyona başlamadan önce aşağıdaki konuları göz önünde bulundurmanız gerekmektedir.
</aside>

<ol>
<li>Entegrasyonunu yaptığınız ödeme yöntemleri (BKM, UPT, COMPAY, WIRE vb.), bazı iş modelleri (TEK TIKLA ÖDEME, PAZARYERİ vb.), döviz tipleri, opsiyonel 3D özelliği gibi işyerine özel durumlar için PayU tarafından hesabınıza tanımlamalar yapılması gerekmektedir. Bu tanımlar ile ilgili satış temsilcinizle ya da destek@payu.com.tr adresimizden bizimle iletişime geçebilirsiniz.</li>
<li>Üye İşyeri Kontrol Paneli’ne giriş için https://secure.payu.com.tr/cpanel/ linkini takip edebilirsiniz.</li>
<li>Test ortam bilgileri ve test kartları, entegrasyon dokümanının son bölümünde yer almaktadır.</li>
<li>Teknik destek almak ve örnek kodlarımız için destek@payu.com.tr adresimizden bizimle iletişime geçebilirsiniz.</li>
<li>Çalışma şeklinin 3D olmaması durumunda da bazı işlemler (ör: debit kartlar, 3D zorunlu ülkelerin kartları vb.) 3D’ye yönlendirileceğinden 3D entegrasyonunun da dokümanda tarif edildiği şekilde yapılması gerekmektedir.</li>
<li>PayU sisteminin döndüğü hatalar tüm bankalardan dönen yanıtlarla birlikte konsolide olmuş (birleştirilmiş) şekilde dönmektedir. Bu hata kodlarına https://www.payu.com.tr/hata-kodları linkini takip ederek erişilebilmektedir.</li>
<li>API entegrasyonunda hata bilgisi konsolide şekilde dönebildiği gibi, PayU tarafından aktifleştirilmesi durumunda banka cevabı doğrudan PROCRETURNCODE ve ERRORMESSAGE içerisinde belirtilmektedir.</li>
<li>ORDER_DATE parametresi ile İşlem / sipariş saati UTC/GMT formatında gönderilmelidir. Sipariş saati (ORDER_DATE) kaynaklı saat (REQUEST_EXPIRED) hatasının önüne geçebilmek için; saat fonksiyonu UTC/GMT formatı ile ayarlanmalı ve Türkiye saatine göre 3 saat geri olacak şekilde gönderilmelidir.</li>
</ol>
<h1 id='api-ile-odeme-alma'>API ile Ödeme Alma</h1><h2 id='istek-parametreleri'>İstek Parametreleri</h2>
<blockquote>
<p>İşlem İsteği Göndermek için:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlencode</span>
<span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>

<span class="c"># Endpoint</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">"https://secure.payu.com.tr/order/alu/v3"</span>

<span class="c"># PayU Merchant's Secret Key</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s">'SECRET_KEY'</span>

<span class="c"># Request @params Begin</span>
<span class="n">array</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c"># PayU Merchant's Merchant ID</span>
    <span class="s">'MERCHANT'</span><span class="p">:</span> <span class="s">"OPU_TEST"</span><span class="p">,</span>
    <span class="s">'LANGUAGE'</span><span class="p">:</span> <span class="s">"TR"</span><span class="p">,</span>
    <span class="s">'ORDER_DATE'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">Y-</span><span class="si">%</span><span class="s">m-</span><span class="si">%</span><span class="s">d </span><span class="si">%</span><span class="s">H:</span><span class="si">%</span><span class="s">M:</span><span class="si">%</span><span class="s">S'</span><span class="p">),</span>
    <span class="s">'PAY_METHOD'</span><span class="p">:</span> <span class="s">"CCVISAMC"</span><span class="p">,</span>
    <span class="s">'BACK_REF'</span><span class="p">:</span> <span class="s">"http://www.backref.com.tr"</span><span class="p">,</span>
    <span class="s">'PRICES_CURRENCY'</span><span class="p">:</span> <span class="s">"TRY"</span><span class="p">,</span>
    <span class="s">'SELECTED_INSTALLMENTS_NUMBER'</span><span class="p">:</span> <span class="s">"1"</span><span class="p">,</span>
    <span class="s">'ORDER_SHIPPING'</span><span class="p">:</span> <span class="s">"5"</span><span class="p">,</span>
    <span class="s">'CLIENT_IP'</span><span class="p">:</span> <span class="s">"127.0.0.1"</span><span class="p">,</span>

    <span class="s">'ORDER_PNAME[0]'</span><span class="p">:</span><span class="s">'Test Ürünü'</span><span class="p">,</span>
    <span class="s">'ORDER_PCODE[0]'</span><span class="p">:</span><span class="s">'Test Kodu'</span><span class="p">,</span>
    <span class="s">'ORDER_PINFO[0]'</span><span class="p">:</span><span class="s">'Test Açıklaması'</span><span class="p">,</span>
    <span class="s">'ORDER_PRICE[0]'</span><span class="p">:</span><span class="s">'5'</span><span class="p">,</span>
    <span class="s">'ORDER_VAT[0]'</span><span class="p">:</span><span class="s">'18'</span><span class="p">,</span>
    <span class="s">'ORDER_PRICE_TYPE[0]'</span><span class="p">:</span><span class="s">'NET'</span><span class="p">,</span>
    <span class="s">'ORDER_QTY[0]'</span><span class="p">:</span><span class="s">'1'</span><span class="p">,</span>

    <span class="s">'ORDER_PNAME[1]'</span><span class="p">:</span><span class="s">'Test Ürünü-2'</span><span class="p">,</span>
    <span class="s">'ORDER_PCODE[1]'</span><span class="p">:</span><span class="s">'Test Kodu-2'</span><span class="p">,</span>
    <span class="s">'ORDER_PINFO[1]'</span><span class="p">:</span><span class="s">'Test Açıklaması-2'</span><span class="p">,</span>
    <span class="s">'ORDER_PRICE[1]'</span><span class="p">:</span><span class="s">'15'</span><span class="p">,</span>
    <span class="s">'ORDER_VAT[1]'</span><span class="p">:</span><span class="s">'24'</span><span class="p">,</span>
    <span class="s">'ORDER_PRICE_TYPE[1]'</span><span class="p">:</span><span class="s">'GROSS'</span><span class="p">,</span>
    <span class="s">'ORDER_QTY[1]'</span><span class="p">:</span><span class="s">'3'</span><span class="p">,</span>

    <span class="s">'CC_NUMBER'</span><span class="p">:</span><span class="s">'4355084355084358'</span><span class="p">,</span>
    <span class="s">'EXP_MONTH'</span><span class="p">:</span><span class="s">'12'</span><span class="p">,</span>
    <span class="s">'EXP_YEAR'</span><span class="p">:</span><span class="s">'2018'</span><span class="p">,</span>
    <span class="s">'CC_CVV'</span><span class="p">:</span><span class="s">'000'</span><span class="p">,</span>
    <span class="s">'CC_OWNER'</span><span class="p">:</span><span class="s">'000'</span><span class="p">,</span>

    <span class="s">'BILL_FNAME'</span><span class="p">:</span><span class="s">'Ad'</span><span class="p">,</span>
    <span class="s">'BILL_LNAME'</span><span class="p">:</span><span class="s">'Soyad'</span><span class="p">,</span>
    <span class="s">'BILL_EMAIL'</span><span class="p">:</span><span class="s">'mail@mail.com'</span><span class="p">,</span>
    <span class="s">'BILL_PHONE'</span><span class="p">:</span><span class="s">'02129003711'</span><span class="p">,</span>
    <span class="s">'BILL_FAX'</span><span class="p">:</span><span class="s">'02129003711'</span><span class="p">,</span>
    <span class="s">'BILL_ADDRESS'</span><span class="p">:</span><span class="s">'Birinci Adres satırı'</span><span class="p">,</span>
    <span class="s">'BILL_ADDRESS2'</span><span class="p">:</span><span class="s">'İkinci Adres satırı'</span><span class="p">,</span>
    <span class="s">'BILL_ZIPCODE'</span><span class="p">:</span><span class="s">'34000'</span><span class="p">,</span>
    <span class="s">'BILL_CITY'</span><span class="p">:</span><span class="s">'ISTANBUL'</span><span class="p">,</span>
    <span class="s">'BILL_COUNTRYCODE'</span><span class="p">:</span><span class="s">'TR'</span><span class="p">,</span>
    <span class="s">'BILL_STATE'</span><span class="p">:</span><span class="s">'Ayazağa'</span><span class="p">,</span>

    <span class="s">'DELIVERY_FNAME'</span><span class="p">:</span><span class="s">'Ad'</span><span class="p">,</span>
    <span class="s">'DELIVERY_LNAME'</span><span class="p">:</span><span class="s">'Soyad'</span><span class="p">,</span>
    <span class="s">'DELIVERY_EMAIL'</span><span class="p">:</span><span class="s">'mail@mail.com'</span><span class="p">,</span>
    <span class="s">'DELIVERY_PHONE'</span><span class="p">:</span><span class="s">'02129003711'</span><span class="p">,</span>
    <span class="s">'DELIVERY_COMPANY'</span><span class="p">:</span><span class="s">'PayU Ödeme Kuruluşu A.Ş.'</span><span class="p">,</span>
    <span class="s">'DELIVERY_ADDRESS'</span><span class="p">:</span><span class="s">'Birinci Adres satırı'</span><span class="p">,</span>
    <span class="s">'DELIVERY_ADDRESS2'</span><span class="p">:</span><span class="s">'İkinci Adres satırı'</span><span class="p">,</span>
    <span class="s">'DELIVERY_ZIPCODE'</span><span class="p">:</span><span class="s">'34000'</span><span class="p">,</span>
    <span class="s">'DELIVERY_CITY'</span><span class="p">:</span><span class="s">'ISTANBUL'</span><span class="p">,</span>
    <span class="s">'DELIVERY_STATE'</span><span class="p">:</span><span class="s">'TR'</span><span class="p">,</span>
    <span class="s">'DELIVERY_COUNTRYCODE'</span><span class="p">:</span><span class="s">'Ayazağa'</span><span class="p">,</span>

<span class="p">}</span>
<span class="c"># Random number generation function for ORDER_REF @param</span>
<span class="n">refno</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100000</span><span class="p">))</span>

<span class="c"># Adding ORDER_REF @param to request array</span>
<span class="n">array</span><span class="p">[</span><span class="s">'ORDER_REF'</span><span class="p">]</span> <span class="o">=</span> <span class="n">refno</span>

<span class="c"># Initializing the hashstring @param</span>
<span class="n">hashstring</span> <span class="o">=</span> <span class="s">''</span>

<span class="c"># Sorting Array @params</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">array</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>

<span class="c"># Adding the length of each field value at the beginning of field value</span>
    <span class="n">hashstring</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">hashstring</span><span class="p">)</span>

<span class="c"># Calculating ORDER_HASH</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashstring</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c"># Adding ORDER_HASH @param to request array</span>
<span class="n">array</span><span class="p">[</span><span class="s">'ORDER_HASH'</span><span class="p">]</span> <span class="o">=</span> <span class="n">signature</span>

<span class="c"># Sending Request to Endpoint</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">urlencode</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>

<span class="c"># Printing result/response</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://secure.payu.com.tr/order/alu/v3"</span><span class="p">;</span>
<span class="nb">date_default_timezone_set</span><span class="p">(</span><span class="s1">'UTC'</span><span class="p">);</span>

<span class="nv">$secretKey</span> <span class="o">=</span> <span class="s1">'SECRET_KEY'</span><span class="p">;</span>

<span class="nv">$arParams</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>

   <span class="s2">"MERCHANT"</span> <span class="o">=&gt;</span> <span class="s2">"OPU_TEST"</span><span class="p">,</span>
   <span class="s2">"LANGUAGE"</span> <span class="o">=&gt;</span> <span class="s2">"TR"</span><span class="p">,</span>
   <span class="s2">"ORDER_REF"</span> <span class="o">=&gt;</span>  <span class="nb">rand</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10000</span><span class="p">),</span>
   <span class="s2">"ORDER_DATE"</span> <span class="o">=&gt;</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'Y-m-d H:i:s'</span><span class="p">),</span>
   <span class="s2">"PAY_METHOD"</span> <span class="o">=&gt;</span> <span class="s2">"CCVISAMC"</span><span class="p">,</span>
   <span class="s2">"BACK_REF"</span> <span class="o">=&gt;</span> <span class="s2">"http://www.backref.com.tr"</span><span class="p">,</span>
   <span class="s2">"PRICES_CURRENCY"</span> <span class="o">=&gt;</span> <span class="s2">"TRY"</span><span class="p">,</span>
   <span class="s2">"SELECTED_INSTALLMENTS_NUMBER"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>
   <span class="s2">"ORDER_SHIPPING"</span><span class="o">=&gt;</span><span class="s2">"5"</span><span class="p">,</span>
   <span class="s2">"CLIENT_IP"</span> <span class="o">=&gt;</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"REMOTE_ADDR"</span><span class="p">],</span>


   <span class="s2">"ORDER_PNAME[0]"</span> <span class="o">=&gt;</span> <span class="s2">"Test Ürünü"</span><span class="p">,</span>
   <span class="s2">"ORDER_PCODE[0]"</span> <span class="o">=&gt;</span> <span class="s2">"Test Kodu"</span><span class="p">,</span>
   <span class="s2">"ORDER_PINFO[0]"</span> <span class="o">=&gt;</span> <span class="s2">"Test Açıklaması"</span><span class="p">,</span>
   <span class="s2">"ORDER_PRICE[0]"</span> <span class="o">=&gt;</span> <span class="s2">"5"</span><span class="p">,</span>
   <span class="s2">"ORDER_VAT[0]"</span><span class="o">=&gt;</span><span class="s2">"18"</span><span class="p">,</span>
   <span class="s2">"ORDER_PRICE_TYPE[0]"</span><span class="o">=&gt;</span><span class="s2">"NET"</span><span class="p">,</span>
   <span class="s2">"ORDER_QTY[0]"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>

   <span class="s2">"ORDER_PNAME[1]"</span> <span class="o">=&gt;</span> <span class="s2">"Test Ürünü-2"</span><span class="p">,</span>
   <span class="s2">"ORDER_PCODE[1]"</span> <span class="o">=&gt;</span> <span class="s2">"Test Kodu-2"</span><span class="p">,</span>
   <span class="s2">"ORDER_PINFO[1]"</span> <span class="o">=&gt;</span> <span class="s2">"Test Açıklaması-2"</span><span class="p">,</span>
   <span class="s2">"ORDER_PRICE[1]"</span> <span class="o">=&gt;</span> <span class="s2">"15"</span><span class="p">,</span>
   <span class="s2">"ORDER_VAT[1]"</span><span class="o">=&gt;</span><span class="s2">"24"</span><span class="p">,</span>
   <span class="s2">"ORDER_PRICE_TYPE[1]"</span><span class="o">=&gt;</span><span class="s2">"GROSS"</span><span class="p">,</span>
   <span class="s2">"ORDER_QTY[1]"</span> <span class="o">=&gt;</span> <span class="s2">"3"</span><span class="p">,</span>

   <span class="s2">"CC_NUMBER"</span> <span class="o">=&gt;</span> <span class="s2">"4355084355084358"</span><span class="p">,</span>
   <span class="s2">"EXP_MONTH"</span> <span class="o">=&gt;</span> <span class="s2">"12"</span><span class="p">,</span>
   <span class="s2">"EXP_YEAR"</span> <span class="o">=&gt;</span> <span class="s2">"2018"</span><span class="p">,</span>
   <span class="s2">"CC_CVV"</span> <span class="o">=&gt;</span> <span class="s2">"000"</span><span class="p">,</span>
   <span class="s2">"CC_OWNER"</span> <span class="o">=&gt;</span> <span class="s2">"000"</span><span class="p">,</span>

   <span class="s2">"BILL_FNAME"</span> <span class="o">=&gt;</span> <span class="s2">"Ad"</span><span class="p">,</span>
   <span class="s2">"BILL_LNAME"</span> <span class="o">=&gt;</span> <span class="s2">"Soyad"</span><span class="p">,</span>
   <span class="s2">"BILL_EMAIL"</span> <span class="o">=&gt;</span> <span class="s2">"mail@mail.com"</span><span class="p">,</span>
   <span class="s2">"BILL_PHONE"</span> <span class="o">=&gt;</span> <span class="s2">"02129003711"</span><span class="p">,</span>
   <span class="s2">"BILL_FAX"</span> <span class="o">=&gt;</span> <span class="s2">"02129003711"</span><span class="p">,</span>
   <span class="s2">"BILL_ADDRESS"</span> <span class="o">=&gt;</span> <span class="s2">"Birinci Adres satırı"</span><span class="p">,</span>
   <span class="s2">"BILL_ADDRESS2"</span> <span class="o">=&gt;</span> <span class="s2">"İkinci Adres satırı"</span><span class="p">,</span>
   <span class="s2">"BILL_ZIPCODE"</span> <span class="o">=&gt;</span> <span class="s2">"34000"</span><span class="p">,</span>
   <span class="s2">"BILL_CITY"</span> <span class="o">=&gt;</span> <span class="s2">"ISTANBUL"</span><span class="p">,</span>
   <span class="s2">"BILL_COUNTRYCODE"</span> <span class="o">=&gt;</span> <span class="s2">"TR"</span><span class="p">,</span>
   <span class="s2">"BILL_STATE"</span> <span class="o">=&gt;</span> <span class="s2">"Ayazağa"</span><span class="p">,</span>

   <span class="s2">"DELIVERY_FNAME"</span> <span class="o">=&gt;</span> <span class="s2">"Ad"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_LNAME"</span> <span class="o">=&gt;</span> <span class="s2">"Soyad"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_EMAIL"</span> <span class="o">=&gt;</span> <span class="s2">"mail@mail.com"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_PHONE"</span> <span class="o">=&gt;</span> <span class="s2">"02129003711"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_COMPANY"</span> <span class="o">=&gt;</span> <span class="s2">"PayU Ödeme Kuruluşu A.Ş."</span><span class="p">,</span>
   <span class="s2">"DELIVERY_ADDRESS"</span> <span class="o">=&gt;</span> <span class="s2">"Birinci Adres satırı"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_ADDRESS2"</span> <span class="o">=&gt;</span> <span class="s2">"İkinci Adres satırı"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_ZIPCODE"</span> <span class="o">=&gt;</span> <span class="s2">"34000"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_CITY"</span> <span class="o">=&gt;</span> <span class="s2">"ISTANBUL"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_STATE"</span> <span class="o">=&gt;</span> <span class="s2">"TR"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_COUNTRYCODE"</span> <span class="o">=&gt;</span> <span class="s2">"Ayazağa"</span><span class="p">,</span>
<span class="p">);</span>

<span class="nb">ksort</span><span class="p">(</span><span class="nv">$arParams</span><span class="p">);</span>
<span class="nv">$hashString</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$arParams</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$val</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$hashString</span> <span class="o">.=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$val</span><span class="p">)</span> <span class="o">.</span> <span class="nv">$val</span><span class="p">;</span>
<span class="p">}</span>
<span class="nv">$arParams</span><span class="p">[</span><span class="s2">"ORDER_HASH"</span><span class="p">]</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s2">"md5"</span><span class="p">,</span> <span class="nv">$hashString</span><span class="p">,</span> <span class="nv">$secretKey</span><span class="p">);</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>

<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYHOST</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_IPRESOLVE</span><span class="p">,</span> <span class="nx">CURL_IPRESOLVE_V4</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_TIMEOUT</span><span class="p">,</span> <span class="mi">60</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="nv">$arParams</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="nv">$curlerrcode</span> <span class="o">=</span> <span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$curlerr</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$curlerr</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$curlerrcode</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$parsedXML</span> <span class="o">=</span> <span class="o">@</span><span class="nb">simplexml_load_string</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$parsedXML</span> <span class="o">!==</span> <span class="k">FALSE</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
        <span class="nb">print_r</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
        <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>

        <span class="nv">$payuTranReference</span> <span class="o">=</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">REFNO</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">STATUS</span> <span class="o">==</span> <span class="s2">"SUCCESS"</span><span class="p">)</span> <span class="p">{</span>


            <span class="k">if</span> <span class="p">((</span><span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">RETURN_CODE</span> <span class="o">==</span> <span class="s2">"3DS_ENROLLED"</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">URL_3DS</span><span class="p">)))</span> <span class="p">{</span>
                <span class="nb">header</span><span class="p">(</span><span class="s2">"Location:"</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">URL_3DS</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s2">"SUCCES [PayU reference number: "</span> <span class="o">.</span> <span class="nv">$payuTranReference</span> <span class="o">.</span> <span class="s2">"]"</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">echo</span> <span class="s2">"Error: "</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">RETURN_MESSAGE</span> <span class="o">.</span> <span class="s2">" ["</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">RETURN_CODE</span> <span class="o">.</span> <span class="s2">"]"</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s2">"&lt;br&gt;"</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s2">"Error Details: "</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">ERRORMESSAGE</span> <span class="o">.</span> <span class="s2">"&lt;br&gt; Error Code: ["</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">PROCRETURNCODE</span> <span class="o">.</span> <span class="s2">"]"</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$payuTranReference</span><span class="p">))</span> <span class="p">{</span>
                <span class="c1">//the transaction was register to PayU system, but some error occured during the bank authorization.
</span>                <span class="c1">//See $parsedXML-&gt;RETURN_MESSAGE and $parsedXML-&gt;RETURN_CODE for details
</span>                <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
                <span class="k">echo</span> <span class="s2">" [PayU reference number: "</span> <span class="o">.</span> <span class="nv">$payuTranReference</span> <span class="o">.</span> <span class="s2">"]"</span><span class="p">;</span>
                <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>

            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"cURL error: "</span> <span class="o">.</span> <span class="nv">$curlerr</span><span class="p">;</span>

<span class="p">}</span>

</code></pre>
<aside class="warning">
    ÖNEMLİ NOT:
    Teknik entegrasyon açısından tüm parametrelerin gönderilmesi, işlemlerin analizinin doğru yapılabilmesine olanak sağlamaktadır ve fraud işlemlerin önlenmesinde hayati rol oynamaktadır. Bu sebeple alanların mümkün olduğu ölçüde gönderilmesi tavsiye edilmektedir.
</aside>

<p>Endpoint: <code>https://secure.payu.com.tr/order/alu/v3</code></p>
<h3 id='islem-parametereleri'>İşlem Parametereleri</h3>
<table><thead>
<tr>
<th>Parametre</th>
<th>Değer</th>
<th>Açıklama</th>
<th>Zorunlu</th>
</tr>
</thead><tbody>
<tr>
<td>MERCHANT</td>
<td>string</td>
<td>İşyerini ID bilgisidir. Üye İşyeri Kontrol Paneli’nde, hesap ayarları sayfasında bulunmaktadır.</td>
<td>Evet</td>
</tr>
<tr>
<td>LANGUAGE</td>
<td>string</td>
<td>İşlemin gerçekleştiği dilin kısa kodu değeri (TR/EN)</td>
<td>Evet</td>
</tr>
<tr>
<td>ORDER_REF</td>
<td>string/int</td>
<td>İşyerinin kendi belirlediği sipariş/işlem numarasıdır. Her başarılı / başarısız işlemde benzersiz bir değer atanmalıdır.</td>
<td>Evet</td>
</tr>
<tr>
<td>ORDER_DATE</td>
<td>string</td>
<td>İşlem/sipariş saati</td>
<td></td>
</tr>
<tr>
<td>PAY_METHOD</td>
<td>string</td>
<td>Ödeme yöntemini belirtir. Alabileceği değerler; <code> 1.<strong>“CCVISAMC”</strong> (Kartlı işlemler) </code>  <code> 2.<strong>“BKM”</strong> (BKM Express işlemleri) </code> <code> 3.<strong>“UPT”</strong> (Ucuz Para Transferi işlemleri) </code> <code> 4.<strong>“COMPAY”</strong> (Online Havale işlemleri) </code> <code> 5.<strong>“WIRE”</strong> (Havale/EFT işlemleri) </code></td>
<td>Evet</td>
</tr>
<tr>
<td>ORDER_HASH</td>
<td>string</td>
<td>Sipariş içeriğindeki tüm parametre değerlerinin key&#39;e göre sıralanıp, üye işyeri kodlama anahtarı kullanılarak HMAC MD5 algoritması ile hashlenerek elde edilen değerdir. Hash hesaplaması için Bknz: <a href="#hash-hesaplama">Hash Hesaplama</a></td>
<td>Evet</td>
</tr>
<tr>
<td>BACK_REF</td>
<td>string</td>
<td>Ödeme işlemi tamamlandıktan sonra kullanıcının yönlendirileceği URL’dir. 3D işlemlerde işleme ait parametreler de BACK_REF URL’e post edilir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>PRICES_CURRENCY[]</td>
<td>string</td>
<td>İşlemin gerçekleşeceği para birimini belirleyen parametredir (TRY, EUR, USD, GBP). Türk kartlar için dövizli işlem gönderilmemelidir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>SELECTED_INSTALLMENTS_NUMBER</td>
<td>int</td>
<td>Taksit yapılacaksa taksit bilgisinin belirtildiği parametredir.Vade farkı/komisyon bilgileri Üye işyeri kontrol panelinde “Hesap Yönetimi” &gt; “Finansal Yönetim” adımı altında sunulmaktadır. Bu sayfa aracılığı ile komisyonlar kart hamiline ya da işyerine yansıtılabilmektedir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>ORDER_SHIPPING</td>
<td>int</td>
<td>Teslimat/Kargo ücretinin belirtildiği parametredir. Kullanılan para birimi ürün bilgisindeki PRICES_CURRENCY[]’den alınmaktadır.</td>
<td>Hayır</td>
</tr>
<tr>
<td>CLIENT_IP</td>
<td>string</td>
<td>Kullanıcı IP’sinin belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
</tbody></table>
<h3 id='urun-parametereleri'>Ürün Parametereleri</h3>
<table><thead>
<tr>
<th>Parametre</th>
<th>Değer</th>
<th>Açıklama</th>
<th>Zorunlu</th>
</tr>
</thead><tbody>
<tr>
<td>ORDER_PNAME[]</td>
<td>string</td>
<td>Minimum 2, maksimum 155 karakterden oluşan ürün isminin gönderildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>ORDER_PCODE[]</td>
<td>string</td>
<td>Maksimum 50 karakterden oluşan ürün kodunun gönderildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>ORDER_PINFO[]</td>
<td>string</td>
<td>Ürün bilgisinin belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>ORDER_VER[]</td>
<td>string</td>
<td>Ürün versiyonunun belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>ORDER_PRICE[]</td>
<td>string</td>
<td>Ürün fiyatının gönderildiği parametredir. Ondalık simgesi olarak &quot;.&quot;(nokta) kullanılmalıdır. &quot;,&quot;(virgül) kullanımında hata alınacaktır.</td>
<td>Evet</td>
</tr>
<tr>
<td>ORDER_VAT[]</td>
<td>int</td>
<td>Üründe uygulanan verginin belirlendiği parametredir 1, 8 veya 18 olarak belirlenmelidir.</td>
<td>Evet</td>
</tr>
<tr>
<td>ORDER_PRICE_TYPE[]</td>
<td>string</td>
<td>KDV tipinin belirlendiği parametredir. &quot;GROSS&quot; değeri ile gönderilmesi durumunda ürün fiyatına KDV dahil kabul edilecektir. &quot;NET&quot; gönderilmesi durumunda KDV, PayU tarafından ürünün tutarına eklenecektir.</td>
<td>Evet</td>
</tr>
<tr>
<td>ORDER_QTY[]</td>
<td>int</td>
<td>Ürün adedinin belirlendiği parametredir.</td>
<td>Evet</td>
</tr>
</tbody></table>
<h3 id='kart-bilgileri'>Kart Bilgileri</h3>
<table><thead>
<tr>
<th>Parametre</th>
<th>Değer</th>
<th>Açıklama</th>
<th>Zorunlu</th>
</tr>
</thead><tbody>
<tr>
<td>CC_NUMBER</td>
<td>string</td>
<td>Kart numarasının belirtildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>EXP_MONTH</td>
<td>string</td>
<td>Kartın son kullanım tarihi ay bilgisinin belirtildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>EXP_YEAR</td>
<td>string</td>
<td>Kartın son kullanım tarihi yıl bilgisinin belirtildiği parametredir. Dört haneli olarak belirlenmelidir.</td>
<td>Evet</td>
</tr>
<tr>
<td>CC_CVV</td>
<td>string</td>
<td>Kartın güvenlik kodunu belirtildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>CC_OWNER</td>
<td>string</td>
<td>Kart hamilinin isim-soyisim bilgisinin belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
</tbody></table>
<h3 id='fatura-parametereleri'>Fatura Parametereleri</h3>
<table><thead>
<tr>
<th>Parametre</th>
<th>Değer</th>
<th>Açıklama</th>
<th>Zorunlu</th>
</tr>
</thead><tbody>
<tr>
<td>BILL_FNAME</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin adı.</td>
<td>Evet</td>
</tr>
<tr>
<td>BILL_LNAME</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin soyadı.</td>
<td>Evet</td>
</tr>
<tr>
<td>BILL_EMAIL</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin email adresi.</td>
<td>Evet</td>
</tr>
<tr>
<td>BILL_PHONE</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin telefon numarası.</td>
<td>Evet</td>
</tr>
<tr>
<td>BILL_FAX</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin faks numarasının belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>BILL_ADDRESS</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin adresinin belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>BILL_ADDRESS2</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin adresinin belirtildiği parametredir. (ikinci satır için)</td>
<td>Hayır</td>
</tr>
<tr>
<td>BILL_ZIPCODE</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin posta kodunun belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>BILL_CITY</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin şehir bilgisinin belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>BILL_COUNTRYCODE</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin iki karakterli ülke kodu. (ISO Alpha-2 formatında)</td>
<td>Evet</td>
</tr>
<tr>
<td>BILL_STATE</td>
<td>string</td>
<td>Fatura düzenlenecek kişinin semt/ilçe bilgisinin belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
</tbody></table>
<h3 id='teslimat-parametereleri'>Teslimat Parametereleri</h3>
<table><thead>
<tr>
<th>Parametre</th>
<th>Değer</th>
<th>Açıklama</th>
<th>Zorunlu</th>
</tr>
</thead><tbody>
<tr>
<td>DELIVERY_FNAME</td>
<td>string</td>
<td>Teslim edilecek kişinin adı.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_LNAME</td>
<td>string</td>
<td>Teslim edilecek kişinin soyadı.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_EMAIL</td>
<td>string</td>
<td>Teslim edilecek kişinin email adresi.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_PHONE</td>
<td>string</td>
<td>Teslim edilecek kişinin telefon numarası.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_COMPANY</td>
<td>string</td>
<td>Teslim edilecek kişinin şirket bilgisi.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_ADDRESS</td>
<td>string</td>
<td>Teslim edilecek kişinin adresi.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_ADDRESS2</td>
<td>string</td>
<td>Teslim edilecek kişinin adresi. (ikinci satır için)</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_ZIPCODE</td>
<td>string</td>
<td>Teslim edilecek kişinin posta kodu.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_CITY</td>
<td>string</td>
<td>Teslim edilecek kişinin şehir bilgisi.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_STATE</td>
<td>string</td>
<td>Teslim edilecek kişinin semt/ilçe bilgisi.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DELIVERY_COUNTRYCODE</td>
<td>string</td>
<td>Teslim edilecek kişinin iki karakterli ülke kodu. (ISO Alpha-2 formatında).</td>
<td>Hayır</td>
</tr>
</tbody></table>
<h3 id='fraud-icin-ekstra-parametreler'>Fraud için Ekstra Parametreler</h3>
<table><thead>
<tr>
<th>Parametre</th>
<th>Değer</th>
<th>Açıklama</th>
<th>Zorunlu</th>
</tr>
</thead><tbody>
<tr>
<td>CC_NUMBER_TIME</td>
<td>string</td>
<td>Kullanıcının kart numarasını giriş hızının belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>CC_OWNER_TIME</td>
<td>string</td>
<td>Kullanıcının kart üzerindeki ismi giriş hızının belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>CLIENT_TIME</td>
<td>string</td>
<td>Kullanıcının tarayıcısından YYYY-MM-DD hh:mm;ss formatında alınan zaman bilgisinin belirtildiği parametredir.</td>
<td>Hayır</td>
</tr>
</tbody></table>
<h2 id='yanit-parametreleri'>Yanıt Parametreleri</h2>
<p>PayU sistemi, yapılan isteğe   XML formatında bir yanıt dönmektedir. 
Bu yanıt;</p>

<ul>
<li><p>İşlemin başarılı olup olmadığını,başarılı olmadıysa sebebini ve ek bilgileri içermektedir.</p></li>
<li><p>İşyeri XML formatındaki bu datayı ayrıştırıp kendi sisteminde işlemelidir.</p></li>
<li><p>3D işlem yapılması durumunda aynı data HTTP POST ile BACK_REF url’ine gönderilmektedir.</p></li>
</ul>

<blockquote>
<p><strong>Başarılı İşlem Cevap Örneği</strong></p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="nt">&lt;EPAYMENT&gt;</span>
  <span class="nt">&lt;REFNO&gt;</span>41652325<span class="nt">&lt;/REFNO&gt;</span>
  <span class="nt">&lt;ALIAS&gt;</span>3a9d9b9663a50a9ed0f545152320c9fb<span class="nt">&lt;/ALIAS&gt;</span>
  <span class="nt">&lt;STATUS&gt;</span>SUCCESS<span class="nt">&lt;/STATUS&gt;</span>
  <span class="nt">&lt;RETURN</span><span class="na">_CODE</span><span class="nt">&gt;</span>AUTHORIZED<span class="err">&lt;</span>/RETURN_CODE&gt;
  <span class="nt">&lt;RETURN</span><span class="na">_MESSAGE</span><span class="nt">&gt;</span>Authorized.<span class="err">&lt;</span>/RETURN_MESSAGE&gt;
  <span class="nt">&lt;DATE&gt;</span>2017-10-04 16:38:11<span class="nt">&lt;/DATE&gt;</span>
  <span class="nt">&lt;AMOUNT&gt;</span>10.9<span class="nt">&lt;/AMOUNT&gt;</span>
  <span class="nt">&lt;CURRENCY&gt;</span>TRY<span class="nt">&lt;/CURRENCY&gt;</span>
  <span class="nt">&lt;INSTALLMENTS</span><span class="na">_NO</span><span class="nt">&gt;</span>1<span class="err">&lt;</span>/INSTALLMENTS_NO&gt;
  <span class="nt">&lt;CARD</span><span class="na">_PROGRAM_NAME</span><span class="nt">&gt;</span>AXESS<span class="err">&lt;</span>/CARD_PROGRAM_NAME&gt;
  <span class="nt">&lt;ORDER</span><span class="na">_REF</span><span class="nt">&gt;</span>84525<span class="err">&lt;</span>/ORDER_REF&gt;
  <span class="nt">&lt;AUTH</span><span class="na">_CODE</span><span class="nt">&gt;</span>342871<span class="err">&lt;</span>/AUTH_CODE&gt;
  <span class="nt">&lt;RRN&gt;</span>727716199932<span class="nt">&lt;/RRN&gt;</span>
  <span class="nt">&lt;ERRORMESSAGE&gt;</span>Approved.<span class="nt">&lt;/ERRORMESSAGE&gt;</span>
  <span class="nt">&lt;PROCRETURNCODE&gt;</span>00<span class="nt">&lt;/PROCRETURNCODE&gt;</span>
  <span class="nt">&lt;BANK</span><span class="na">_MERCHANT_ID</span><span class="nt">&gt;</span>100100000<span class="err">&lt;</span>/BANK_MERCHANT_ID&gt;
  <span class="nt">&lt;PAN&gt;</span>4355-xxxx-xxxx-4358<span class="nt">&lt;/PAN&gt;</span>
  <span class="nt">&lt;EXPYEAR&gt;</span>18<span class="nt">&lt;/EXPYEAR&gt;</span>
  <span class="nt">&lt;EXPMONTH&gt;</span>12<span class="nt">&lt;/EXPMONTH&gt;</span>
  <span class="nt">&lt;CLIENTID&gt;</span>100100000<span class="nt">&lt;/CLIENTID&gt;</span>
  <span class="nt">&lt;HOSTREFNUM&gt;</span>727716199932<span class="nt">&lt;/HOSTREFNUM&gt;</span>
  <span class="nt">&lt;OID&gt;</span>41652325<span class="nt">&lt;/OID&gt;</span>
  <span class="nt">&lt;RESPONSE&gt;</span>Approved<span class="nt">&lt;/RESPONSE&gt;</span>
  <span class="nt">&lt;TERMINAL</span><span class="na">_BANK</span><span class="nt">&gt;</span>AKBA<span class="err">&lt;</span>/TERMINAL_BANK&gt;
  <span class="nt">&lt;MDSTATUS&gt;&lt;/MDSTATUS&gt;</span>
  <span class="nt">&lt;MDERRORMSG&gt;&lt;/MDERRORMSG&gt;</span>
  <span class="nt">&lt;TXSTATUS&gt;&lt;/TXSTATUS&gt;</span>
  <span class="nt">&lt;XID&gt;&lt;/XID&gt;</span>
  <span class="nt">&lt;ECI&gt;&lt;/ECI&gt;</span>
  <span class="nt">&lt;CAVV&gt;&lt;/CAVV&gt;</span>
  <span class="nt">&lt;TRANSID&gt;</span>17277QmKG10275<span class="nt">&lt;/TRANSID&gt;</span>
  <span class="nt">&lt;HASH&gt;</span>f1c2e330b1ecad927969b679097d647c<span class="nt">&lt;/HASH&gt;</span>
<span class="nt">&lt;/EPAYMENT&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="o">&lt;</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">REFNO</span><span class="o">&gt;</span><span class="mi">41652325</span><span class="o">&lt;/</span><span class="n">REFNO</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ALIAS</span><span class="o">&gt;</span><span class="mi">3</span><span class="n">a9d9b9663a50a9ed0f545152320c9fb</span><span class="o">&lt;/</span><span class="n">ALIAS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">STATUS</span><span class="o">&gt;</span><span class="n">SUCCESS</span><span class="o">&lt;/</span><span class="n">STATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span><span class="n">AUTHORIZED</span><span class="o">&lt;/</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span><span class="n">Authorized</span><span class="o">.&lt;/</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">DATE</span><span class="o">&gt;</span><span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span> <span class="mi">16</span><span class="p">:</span><span class="mi">38</span><span class="p">:</span><span class="mi">11</span><span class="o">&lt;/</span><span class="n">DATE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">AMOUNT</span><span class="o">&gt;</span><span class="mf">10.9</span><span class="o">&lt;/</span><span class="n">AMOUNT</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CURRENCY</span><span class="o">&gt;</span><span class="n">TRY</span><span class="o">&lt;/</span><span class="n">CURRENCY</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">INSTALLMENTS_NO</span><span class="o">&gt;</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">INSTALLMENTS_NO</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CARD_PROGRAM_NAME</span><span class="o">&gt;</span><span class="n">AXESS</span><span class="o">&lt;/</span><span class="n">CARD_PROGRAM_NAME</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ORDER_REF</span><span class="o">&gt;</span><span class="mi">84525</span><span class="o">&lt;/</span><span class="n">ORDER_REF</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">AUTH_CODE</span><span class="o">&gt;</span><span class="mi">342871</span><span class="o">&lt;/</span><span class="n">AUTH_CODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RRN</span><span class="o">&gt;</span><span class="mi">727716199932</span><span class="o">&lt;/</span><span class="n">RRN</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ERRORMESSAGE</span><span class="o">&gt;</span><span class="n">Approved</span><span class="o">.&lt;/</span><span class="n">ERRORMESSAGE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">PROCRETURNCODE</span><span class="o">&gt;</span><span class="mo">00</span><span class="o">&lt;/</span><span class="n">PROCRETURNCODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">BANK_MERCHANT_ID</span><span class="o">&gt;</span><span class="mi">100100000</span><span class="o">&lt;/</span><span class="n">BANK_MERCHANT_ID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">PAN</span><span class="o">&gt;</span><span class="mi">4355</span><span class="o">-</span><span class="n">xxxx</span><span class="o">-</span><span class="n">xxxx</span><span class="o">-</span><span class="mi">4358</span><span class="o">&lt;/</span><span class="n">PAN</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">EXPYEAR</span><span class="o">&gt;</span><span class="mi">18</span><span class="o">&lt;/</span><span class="n">EXPYEAR</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">EXPMONTH</span><span class="o">&gt;</span><span class="mi">12</span><span class="o">&lt;/</span><span class="n">EXPMONTH</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CLIENTID</span><span class="o">&gt;</span><span class="mi">100100000</span><span class="o">&lt;/</span><span class="n">CLIENTID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HOSTREFNUM</span><span class="o">&gt;</span><span class="mi">727716199932</span><span class="o">&lt;/</span><span class="n">HOSTREFNUM</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">OID</span><span class="o">&gt;</span><span class="mi">41652325</span><span class="o">&lt;/</span><span class="n">OID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RESPONSE</span><span class="o">&gt;</span><span class="n">Approved</span><span class="o">&lt;/</span><span class="n">RESPONSE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TERMINAL_BANK</span><span class="o">&gt;</span><span class="n">AKBA</span><span class="o">&lt;/</span><span class="n">TERMINAL_BANK</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">MDSTATUS</span><span class="o">&gt;&lt;/</span><span class="n">MDSTATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">MDERRORMSG</span><span class="o">&gt;&lt;/</span><span class="n">MDERRORMSG</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TXSTATUS</span><span class="o">&gt;&lt;/</span><span class="n">TXSTATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">XID</span><span class="o">&gt;&lt;/</span><span class="n">XID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ECI</span><span class="o">&gt;&lt;/</span><span class="n">ECI</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CAVV</span><span class="o">&gt;&lt;/</span><span class="n">CAVV</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TRANSID</span><span class="o">&gt;</span><span class="mi">17277</span><span class="n">QmKG10275</span><span class="o">&lt;/</span><span class="n">TRANSID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HASH</span><span class="o">&gt;</span><span class="n">f1c2e330b1ecad927969b679097d647c</span><span class="o">&lt;/</span><span class="n">HASH</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
</code></pre>
<blockquote>
<p><strong>STATUS Parametresinin alabileceği değerler</strong></p>

<p>SUCCESS – Başarılı otorizasyon işlem sonucu</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="nt">&lt;STATUS&gt;</span>SUCCESS<span class="nt">&lt;/STATUS&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="o">&lt;</span><span class="n">STATUS</span><span class="o">&gt;</span><span class="n">SUCCESS</span><span class="o">&lt;/</span><span class="n">STATUS</span><span class="o">&gt;</span>
</code></pre>
<blockquote>
<p>FAILED – Otorizasyonun başarı ile yapılamadığı durumlarda dönen değerdir.(Yetersiz bakiye,fraud vb.)</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="nt">&lt;STATUS&gt;</span>FAILED<span class="nt">&lt;/STATUS&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="o">&lt;</span><span class="n">STATUS</span><span class="o">&gt;</span><span class="n">FAILED</span><span class="o">&lt;/</span><span class="n">STATUS</span><span class="o">&gt;</span>
</code></pre>
<blockquote>
<p>INPUT_ERROR – Request gönderilirken zorunlu parametrelerin eksik veya hatalı gönderilmesinden kaynaklanan bir hatadır.</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="nt">&lt;STATUS&gt;</span>INPUT_ERROR<span class="nt">&lt;/STATUS&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="o">&lt;</span><span class="n">STATUS</span><span class="o">&gt;</span><span class="n">INPUT_ERROR</span><span class="o">&lt;/</span><span class="n">STATUS</span><span class="o">&gt;</span>
</code></pre>
<blockquote>
<p><strong>RETURN_CODE Parametresinin alabileceği değerler</strong></p>

<p>AUTHORIZED – Otorizasyonun başarı ile tamamlandığını belirtilen işlem sonucu**</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="nt">&lt;EPAYMENT&gt;</span>
    <span class="nt">&lt;REFNO&gt;</span>41464560<span class="nt">&lt;/REFNO&gt;</span>
    <span class="nt">&lt;ALIAS&gt;</span>9592b7736c9e277fea8cc79c2e5b5a23<span class="nt">&lt;/ALIAS&gt;</span>
    <span class="nt">&lt;STATUS&gt;</span>SUCCESS<span class="nt">&lt;/STATUS&gt;</span>
    <span class="nt">&lt;RETURN</span><span class="na">_CODE</span><span class="nt">&gt;</span>AUTHORIZED<span class="err">&lt;</span>/RETURN_CODE&gt;
    <span class="nt">&lt;RETURN</span><span class="na">_MESSAGE</span><span class="nt">&gt;</span>Authorized.<span class="err">&lt;</span>/RETURN_MESSAGE&gt;
    <span class="nt">&lt;DATE&gt;</span>2017-10-04 15:20:21<span class="nt">&lt;/DATE&gt;</span>
    <span class="nt">&lt;ORDER</span><span class="na">_REF</span><span class="nt">&gt;</span>7305<span class="err">&lt;</span>/ORDER_REF&gt;
    <span class="nt">&lt;AUTH</span><span class="na">_CODE</span><span class="nt">&gt;</span>13157TUlA15117<span class="err">&lt;</span>/AUTH_CODE&gt;
    <span class="nt">&lt;HASH&gt;</span>b560a38e2b3e7bcbac328bbd6218bc60<span class="nt">&lt;/HASH&gt;</span>
<span class="nt">&lt;/EPAYMENT&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="o">&lt;</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">REFNO</span><span class="o">&gt;</span><span class="mi">41464560</span><span class="o">&lt;/</span><span class="n">REFNO</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">ALIAS</span><span class="o">&gt;</span><span class="mi">9592</span><span class="n">b7736c9e277fea8cc79c2e5b5a23</span><span class="o">&lt;/</span><span class="n">ALIAS</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">STATUS</span><span class="o">&gt;</span><span class="n">SUCCESS</span><span class="o">&lt;/</span><span class="n">STATUS</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span><span class="n">AUTHORIZED</span><span class="o">&lt;/</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span><span class="n">Authorized</span><span class="o">.&lt;/</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">DATE</span><span class="o">&gt;</span><span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span> <span class="mi">15</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mi">21</span><span class="o">&lt;/</span><span class="n">DATE</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">ORDER_REF</span><span class="o">&gt;</span><span class="mi">7305</span><span class="o">&lt;/</span><span class="n">ORDER_REF</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">AUTH_CODE</span><span class="o">&gt;</span><span class="mi">13157</span><span class="n">TUlA15117</span><span class="o">&lt;/</span><span class="n">AUTH_CODE</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">HASH</span><span class="o">&gt;</span><span class="n">b560a38e2b3e7bcbac328bbd6218bc60</span><span class="o">&lt;/</span><span class="n">HASH</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
</code></pre>
<blockquote>
<p>3DS_ENROLLED – Otorizasyonun tamamlanablilmesi için işlemi 3D Secure sayfasına yönlendirecek olan <url_3ds> parametresini dönen fonksiyonun değeridir.</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="nt">&lt;EPAYMENT&gt;</span>
  <span class="nt">&lt;REFNO&gt;</span>41464560<span class="nt">&lt;/REFNO&gt;</span>
  <span class="nt">&lt;ALIAS&gt;</span>848a62efa487d6b75a0eca5654cc4099<span class="nt">&lt;/ALIAS&gt;</span>
  <span class="nt">&lt;STATUS&gt;</span>SUCCESS<span class="nt">&lt;/STATUS&gt;</span>
  <span class="nt">&lt;RETURN</span><span class="na">_CODE</span><span class="nt">&gt;</span>3DS_ENROLLED<span class="err">&lt;</span>/RETURN_CODE&gt;
  <span class="nt">&lt;RETURN</span><span class="na">_MESSAGE</span><span class="nt">&gt;</span>3DS Enrolled Card.<span class="err">&lt;</span>/RETURN_MESSAGE&gt;
  <span class="nt">&lt;DATE&gt;</span>2017-10-04 15:20:21<span class="nt">&lt;/DATE&gt;</span>
  <span class="nt">&lt;URL</span><span class="na">_3DS</span><span class="nt">&gt;</span>https://secure.payu.com.tr/order/3ds/begin/refno/41464560/sign/b2968234be8cd88a63b0f5999b07d783/<span class="err">&lt;</span>/URL_3DS&gt;
  <span class="nt">&lt;HASH&gt;</span>46b1dcfcda8166ea33582fa2d3da6abb<span class="nt">&lt;/HASH&gt;</span>
<span class="nt">&lt;/EPAYMENT&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="o">&lt;</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">REFNO</span><span class="o">&gt;</span><span class="mi">41464560</span><span class="o">&lt;/</span><span class="n">REFNO</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ALIAS</span><span class="o">&gt;</span><span class="mi">848</span><span class="n">a62efa487d6b75a0eca5654cc4099</span><span class="o">&lt;/</span><span class="n">ALIAS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">STATUS</span><span class="o">&gt;</span><span class="n">SUCCESS</span><span class="o">&lt;/</span><span class="n">STATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span><span class="mi">3</span><span class="n">DS_ENROLLED</span><span class="o">&lt;/</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span><span class="mi">3</span><span class="n">DS</span> <span class="n">Enrolled</span> <span class="n">Card</span><span class="o">.&lt;/</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">DATE</span><span class="o">&gt;</span><span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span> <span class="mi">15</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mi">21</span><span class="o">&lt;/</span><span class="n">DATE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">URL_3DS</span><span class="o">&gt;</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">secure</span><span class="o">.</span><span class="n">payu</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">tr</span><span class="o">/</span><span class="n">order</span><span class="o">/</span><span class="mi">3</span><span class="n">ds</span><span class="o">/</span><span class="n">begin</span><span class="o">/</span><span class="n">refno</span><span class="o">/</span><span class="mi">41464560</span><span class="o">/</span><span class="n">sign</span><span class="o">/</span><span class="n">b2968234be8cd88a63b0f5999b07d783</span><span class="o">/&lt;/</span><span class="n">URL_3DS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HASH</span><span class="o">&gt;</span><span class="mi">46</span><span class="n">b1dcfcda8166ea33582fa2d3da6abb</span><span class="o">&lt;/</span><span class="n">HASH</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
</code></pre>
<blockquote>
<p>INVALID_ACCOUNT – Üye işyeri isminin (Merchant ID) hatalı ya da eksik gönderilmesi durumunda dönen değerdir.</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="nt">&lt;EPAYMENT&gt;</span>
  <span class="nt">&lt;REFNO&gt;&lt;/REFNO&gt;</span>
  <span class="nt">&lt;ALIAS&gt;&lt;/ALIAS&gt;</span>
  <span class="nt">&lt;STATUS&gt;</span>INPUT_ERROR<span class="nt">&lt;/STATUS&gt;</span>
  <span class="nt">&lt;RETURN</span><span class="na">_CODE</span><span class="nt">&gt;</span>INVALID_ACCOUNT<span class="err">&lt;</span>/RETURN_CODE&gt;
  <span class="nt">&lt;RETURN</span><span class="na">_MESSAGE</span><span class="nt">&gt;</span>Invalid account: 3DTRTEST<span class="err">&lt;</span>/RETURN_MESSAGE&gt;
  <span class="nt">&lt;DATE&gt;</span>2017-10-04 15:20:21<span class="nt">&lt;/DATE&gt;</span>
  <span class="nt">&lt;ORDER</span><span class="na">_REF</span><span class="nt">&gt;</span><span class="err">&lt;</span>/ORDER_REF&gt;
  <span class="nt">&lt;AUTH</span><span class="na">_CODE</span><span class="nt">&gt;</span><span class="err">&lt;</span>/AUTH_CODE&gt;
  <span class="nt">&lt;RRN&gt;&lt;/RRN&gt;</span>
  <span class="nt">&lt;HASH&gt;&lt;/HASH&gt;</span>
<span class="nt">&lt;/EPAYMENT&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="o">&lt;</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">REFNO</span><span class="o">&gt;&lt;/</span><span class="n">REFNO</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ALIAS</span><span class="o">&gt;&lt;/</span><span class="n">ALIAS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">STATUS</span><span class="o">&gt;</span><span class="n">INPUT_ERROR</span><span class="o">&lt;/</span><span class="n">STATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span><span class="n">INVALID_ACCOUNT</span><span class="o">&lt;/</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span><span class="n">Invalid</span> <span class="n">account</span><span class="p">:</span> <span class="mi">3</span><span class="n">DTRTEST</span><span class="o">&lt;/</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">DATE</span><span class="o">&gt;</span><span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span> <span class="mi">15</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mi">21</span><span class="o">&lt;/</span><span class="n">DATE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ORDER_REF</span><span class="o">&gt;&lt;/</span><span class="n">ORDER_REF</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">AUTH_CODE</span><span class="o">&gt;&lt;/</span><span class="n">AUTH_CODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RRN</span><span class="o">&gt;&lt;/</span><span class="n">RRN</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HASH</span><span class="o">&gt;&lt;/</span><span class="n">HASH</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
</code></pre>
<blockquote>
<p>HASH_MISMATCH – Üye işyeri tarafında yanlış hash hesaplama sonucu PayU tarafındaki hash ile eşleşmemesi sonucunda alınan hatadır.</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="nt">&lt;EPAYMENT&gt;</span>
  <span class="nt">&lt;REFNO&gt;&lt;/REFNO&gt;</span>
  <span class="nt">&lt;ALIAS&gt;&lt;/ALIAS&gt;</span>
  <span class="nt">&lt;STATUS&gt;</span>INPUT_ERROR<span class="nt">&lt;/STATUS&gt;</span>
  <span class="nt">&lt;RETURN</span><span class="na">_CODE</span><span class="nt">&gt;</span>HASH_MISMATCH<span class="err">&lt;</span>/RETURN_CODE&gt;
  <span class="nt">&lt;RETURN</span><span class="na">_MESSAGE</span><span class="nt">&gt;</span>Hash mismatch<span class="err">&lt;</span>/RETURN_MESSAGE&gt;
  <span class="nt">&lt;DATE&gt;</span>2017-10-04 15:20:21<span class="nt">&lt;/DATE&gt;</span>
  <span class="nt">&lt;ORDER</span><span class="na">_REF</span><span class="nt">&gt;</span><span class="err">&lt;</span>/ORDER_REF&gt;
  <span class="nt">&lt;AUTH</span><span class="na">_CODE</span><span class="nt">&gt;</span><span class="err">&lt;</span>/AUTH_CODE&gt;
  <span class="nt">&lt;RRN&gt;&lt;/RRN&gt;</span>
  <span class="nt">&lt;PROCRETURNCODE&gt;&lt;/PROCRETURNCODE&gt;</span>
  <span class="nt">&lt;ERRORMESSAGE&gt;&lt;/ERRORMESSAGE&gt;</span>
  <span class="nt">&lt;BANK</span><span class="na">_MERCHANT_ID</span><span class="nt">&gt;</span><span class="err">&lt;</span>/BANK_MERCHANT_ID&gt;
  <span class="nt">&lt;PAN&gt;&lt;/PAN&gt;</span>
  <span class="nt">&lt;EXPYEAR&gt;&lt;/EXPYEAR&gt;</span>
  <span class="nt">&lt;EXPMONTH&gt;&lt;/EXPMONTH&gt;</span>
  <span class="nt">&lt;CLIENTID&gt;&lt;/CLIENTID&gt;</span>
  <span class="nt">&lt;HOSTREFNUM&gt;&lt;/HOSTREFNUM&gt;</span>
  <span class="nt">&lt;OID&gt;&lt;/OID&gt;</span>
  <span class="nt">&lt;RESPONSE&gt;&lt;/RESPONSE&gt;</span>
  <span class="nt">&lt;TERMINAL</span><span class="na">_BANK</span><span class="nt">&gt;</span><span class="err">&lt;</span>/TERMINAL_BANK&gt;
  <span class="nt">&lt;MDSTATUS&gt;&lt;/MDSTATUS&gt;</span>
  <span class="nt">&lt;MDERRORMSG&gt;&lt;/MDERRORMSG&gt;</span>
  <span class="nt">&lt;TXSTATUS&gt;&lt;/TXSTATUS&gt;</span>
  <span class="nt">&lt;XID&gt;&lt;/XID&gt;</span>
  <span class="nt">&lt;ECI&gt;&lt;/ECI&gt;</span>
  <span class="nt">&lt;CAVV&gt;&lt;/CAVV&gt;</span>
  <span class="nt">&lt;TRANSID&gt;&lt;/TRANSID&gt;</span>
  <span class="nt">&lt;HASH&gt;&lt;/HASH&gt;</span>
<span class="nt">&lt;/EPAYMENT&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="o">&lt;</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">REFNO</span><span class="o">&gt;&lt;/</span><span class="n">REFNO</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ALIAS</span><span class="o">&gt;&lt;/</span><span class="n">ALIAS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">STATUS</span><span class="o">&gt;</span><span class="n">INPUT_ERROR</span><span class="o">&lt;/</span><span class="n">STATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span><span class="n">HASH_MISMATCH</span><span class="o">&lt;/</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span><span class="n">Hash</span> <span class="n">mismatch</span><span class="o">&lt;/</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">DATE</span><span class="o">&gt;</span><span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span> <span class="mi">15</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mi">21</span><span class="o">&lt;/</span><span class="n">DATE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ORDER_REF</span><span class="o">&gt;&lt;/</span><span class="n">ORDER_REF</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">AUTH_CODE</span><span class="o">&gt;&lt;/</span><span class="n">AUTH_CODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RRN</span><span class="o">&gt;&lt;/</span><span class="n">RRN</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">PROCRETURNCODE</span><span class="o">&gt;&lt;/</span><span class="n">PROCRETURNCODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ERRORMESSAGE</span><span class="o">&gt;&lt;/</span><span class="n">ERRORMESSAGE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">BANK_MERCHANT_ID</span><span class="o">&gt;&lt;/</span><span class="n">BANK_MERCHANT_ID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">PAN</span><span class="o">&gt;&lt;/</span><span class="n">PAN</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">EXPYEAR</span><span class="o">&gt;&lt;/</span><span class="n">EXPYEAR</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">EXPMONTH</span><span class="o">&gt;&lt;/</span><span class="n">EXPMONTH</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CLIENTID</span><span class="o">&gt;&lt;/</span><span class="n">CLIENTID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HOSTREFNUM</span><span class="o">&gt;&lt;/</span><span class="n">HOSTREFNUM</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">OID</span><span class="o">&gt;&lt;/</span><span class="n">OID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RESPONSE</span><span class="o">&gt;&lt;/</span><span class="n">RESPONSE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TERMINAL_BANK</span><span class="o">&gt;&lt;/</span><span class="n">TERMINAL_BANK</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">MDSTATUS</span><span class="o">&gt;&lt;/</span><span class="n">MDSTATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">MDERRORMSG</span><span class="o">&gt;&lt;/</span><span class="n">MDERRORMSG</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TXSTATUS</span><span class="o">&gt;&lt;/</span><span class="n">TXSTATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">XID</span><span class="o">&gt;&lt;/</span><span class="n">XID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ECI</span><span class="o">&gt;&lt;/</span><span class="n">ECI</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CAVV</span><span class="o">&gt;&lt;/</span><span class="n">CAVV</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TRANSID</span><span class="o">&gt;&lt;/</span><span class="n">TRANSID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HASH</span><span class="o">&gt;&lt;/</span><span class="n">HASH</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
</code></pre>
<blockquote>
<p>ORDER_TOO_OLD – Daha önce başarılı / başarısız işlem yapılmış bir ORDER_REF parametresi ile işlem denenmesi durumunda meydana gelmektedir.</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="nt">&lt;EPAYMENT&gt;</span>
  <span class="nt">&lt;REFNO&gt;&lt;/REFNO&gt;</span>
  <span class="nt">&lt;ALIAS&gt;&lt;/ALIAS&gt;</span>
  <span class="nt">&lt;STATUS&gt;</span>INPUT_ERROR<span class="nt">&lt;/STATUS&gt;</span>
  <span class="nt">&lt;RETURN</span><span class="na">_CODE</span><span class="nt">&gt;</span>ORDER_TOO_OLD<span class="err">&lt;</span>/RETURN_CODE&gt;
  <span class="nt">&lt;RETURN</span><span class="na">_MESSAGE</span><span class="nt">&gt;</span>Order is older than a week (2015-06-18 13:24:08)!<span class="err">&lt;</span>/RETURN_MESSAGE&gt;
  <span class="nt">&lt;DATE&gt;</span>2017-10-04 15:21:50<span class="nt">&lt;/DATE&gt;</span>
  <span class="nt">&lt;ORDER</span><span class="na">_REF</span><span class="nt">&gt;</span>123<span class="err">&lt;</span>/ORDER_REF&gt;
  <span class="nt">&lt;AUTH</span><span class="na">_CODE</span><span class="nt">&gt;</span><span class="err">&lt;</span>/AUTH_CODE&gt;
  <span class="nt">&lt;RRN&gt;&lt;/RRN&gt;</span>
  <span class="nt">&lt;PROCRETURNCODE&gt;&lt;/PROCRETURNCODE&gt;</span>
  <span class="nt">&lt;ERRORMESSAGE&gt;&lt;/ERRORMESSAGE&gt;</span>
  <span class="nt">&lt;BANK</span><span class="na">_MERCHANT_ID</span><span class="nt">&gt;</span><span class="err">&lt;</span>/BANK_MERCHANT_ID&gt;
  <span class="nt">&lt;PAN&gt;&lt;/PAN&gt;</span>
  <span class="nt">&lt;EXPYEAR&gt;&lt;/EXPYEAR&gt;</span>
  <span class="nt">&lt;EXPMONTH&gt;&lt;/EXPMONTH&gt;</span>
  <span class="nt">&lt;CLIENTID&gt;&lt;/CLIENTID&gt;</span>
  <span class="nt">&lt;HOSTREFNUM&gt;&lt;/HOSTREFNUM&gt;</span>
  <span class="nt">&lt;OID&gt;&lt;/OID&gt;</span>
  <span class="nt">&lt;RESPONSE&gt;&lt;/RESPONSE&gt;</span>
  <span class="nt">&lt;TERMINAL</span><span class="na">_BANK</span><span class="nt">&gt;</span><span class="err">&lt;</span>/TERMINAL_BANK&gt;
  <span class="nt">&lt;MDSTATUS&gt;&lt;/MDSTATUS&gt;</span>
  <span class="nt">&lt;MDERRORMSG&gt;&lt;/MDERRORMSG&gt;</span>
  <span class="nt">&lt;TXSTATUS&gt;&lt;/TXSTATUS&gt;</span>
  <span class="nt">&lt;XID&gt;&lt;/XID&gt;</span>
  <span class="nt">&lt;ECI&gt;&lt;/ECI&gt;</span>
  <span class="nt">&lt;CAVV&gt;&lt;/CAVV&gt;</span>
  <span class="nt">&lt;TRANSID&gt;&lt;/TRANSID&gt;</span>
  <span class="nt">&lt;HASH&gt;&lt;/HASH&gt;</span>
<span class="nt">&lt;/EPAYMENT&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="o">&lt;</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">REFNO</span><span class="o">&gt;&lt;/</span><span class="n">REFNO</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ALIAS</span><span class="o">&gt;&lt;/</span><span class="n">ALIAS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">STATUS</span><span class="o">&gt;</span><span class="n">INPUT_ERROR</span><span class="o">&lt;/</span><span class="n">STATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span><span class="n">ORDER_TOO_OLD</span><span class="o">&lt;/</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span><span class="n">Order</span> <span class="ow">is</span> <span class="n">older</span> <span class="n">than</span> <span class="n">a</span> <span class="n">week</span> <span class="p">(</span><span class="mi">2015</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mi">18</span> <span class="mi">13</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">08</span><span class="p">)</span><span class="err">!</span><span class="o">&lt;/</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">DATE</span><span class="o">&gt;</span><span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span> <span class="mi">15</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">50</span><span class="o">&lt;/</span><span class="n">DATE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ORDER_REF</span><span class="o">&gt;</span><span class="mi">123</span><span class="o">&lt;/</span><span class="n">ORDER_REF</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">AUTH_CODE</span><span class="o">&gt;&lt;/</span><span class="n">AUTH_CODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RRN</span><span class="o">&gt;&lt;/</span><span class="n">RRN</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">PROCRETURNCODE</span><span class="o">&gt;&lt;/</span><span class="n">PROCRETURNCODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ERRORMESSAGE</span><span class="o">&gt;&lt;/</span><span class="n">ERRORMESSAGE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">BANK_MERCHANT_ID</span><span class="o">&gt;&lt;/</span><span class="n">BANK_MERCHANT_ID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">PAN</span><span class="o">&gt;&lt;/</span><span class="n">PAN</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">EXPYEAR</span><span class="o">&gt;&lt;/</span><span class="n">EXPYEAR</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">EXPMONTH</span><span class="o">&gt;&lt;/</span><span class="n">EXPMONTH</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CLIENTID</span><span class="o">&gt;&lt;/</span><span class="n">CLIENTID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HOSTREFNUM</span><span class="o">&gt;&lt;/</span><span class="n">HOSTREFNUM</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">OID</span><span class="o">&gt;&lt;/</span><span class="n">OID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RESPONSE</span><span class="o">&gt;&lt;/</span><span class="n">RESPONSE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TERMINAL_BANK</span><span class="o">&gt;&lt;/</span><span class="n">TERMINAL_BANK</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">MDSTATUS</span><span class="o">&gt;&lt;/</span><span class="n">MDSTATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">MDERRORMSG</span><span class="o">&gt;&lt;/</span><span class="n">MDERRORMSG</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TXSTATUS</span><span class="o">&gt;&lt;/</span><span class="n">TXSTATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">XID</span><span class="o">&gt;&lt;/</span><span class="n">XID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ECI</span><span class="o">&gt;&lt;/</span><span class="n">ECI</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CAVV</span><span class="o">&gt;&lt;/</span><span class="n">CAVV</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TRANSID</span><span class="o">&gt;&lt;/</span><span class="n">TRANSID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HASH</span><span class="o">&gt;&lt;/</span><span class="n">HASH</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
</code></pre>
<blockquote>
<p>INVALID_CC_TOKEN – Geçersiz Token kullanımı durumunda alınan hatadır.</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="nt">&lt;EPAYMENT&gt;</span>
  <span class="nt">&lt;REFNO&gt;&lt;/REFNO&gt;</span>
  <span class="nt">&lt;ALIAS&gt;&lt;/ALIAS&gt;</span>
  <span class="nt">&lt;STATUS&gt;</span>INPUT_ERROR<span class="nt">&lt;/STATUS&gt;</span>
  <span class="nt">&lt;RETURN</span><span class="na">_CODE</span><span class="nt">&gt;</span>INVALID_CC_TOKEN<span class="err">&lt;</span>/RETURN_CODE&gt;
  <span class="nt">&lt;RETURN</span><span class="na">_MESSAGE</span><span class="nt">&gt;</span>Invalid Token: Invalid token hash "xake1kp153123o1235l2x3"<span class="err">&lt;</span>/RETURN_MESSAGE&gt;
  <span class="nt">&lt;DATE&gt;</span>2017-10-04 16:24:41<span class="nt">&lt;/DATE&gt;</span>
  <span class="nt">&lt;ORDER</span><span class="na">_REF</span><span class="nt">&gt;</span><span class="err">&lt;</span>/ORDER_REF&gt;
  <span class="nt">&lt;AUTH</span><span class="na">_CODE</span><span class="nt">&gt;</span><span class="err">&lt;</span>/AUTH_CODE&gt;
  <span class="nt">&lt;RRN&gt;&lt;/RRN&gt;</span>
  <span class="nt">&lt;PROCRETURNCODE&gt;&lt;/PROCRETURNCODE&gt;</span>
  <span class="nt">&lt;ERRORMESSAGE&gt;&lt;/ERRORMESSAGE&gt;</span>
  <span class="nt">&lt;BANK</span><span class="na">_MERCHANT_ID</span><span class="nt">&gt;</span><span class="err">&lt;</span>/BANK_MERCHANT_ID&gt;
  <span class="nt">&lt;PAN&gt;&lt;/PAN&gt;</span>
  <span class="nt">&lt;EXPYEAR&gt;&lt;/EXPYEAR&gt;</span>
  <span class="nt">&lt;EXPMONTH&gt;&lt;/EXPMONTH&gt;</span>
  <span class="nt">&lt;CLIENTID&gt;&lt;/CLIENTID&gt;</span>
  <span class="nt">&lt;HOSTREFNUM&gt;&lt;/HOSTREFNUM&gt;</span>
  <span class="nt">&lt;OID&gt;&lt;/OID&gt;</span>
  <span class="nt">&lt;RESPONSE&gt;&lt;/RESPONSE&gt;</span>
  <span class="nt">&lt;TERMINAL</span><span class="na">_BANK</span><span class="nt">&gt;</span><span class="err">&lt;</span>/TERMINAL_BANK&gt;
  <span class="nt">&lt;MDSTATUS&gt;&lt;/MDSTATUS&gt;</span>
  <span class="nt">&lt;MDERRORMSG&gt;&lt;/MDERRORMSG&gt;</span>
  <span class="nt">&lt;TXSTATUS&gt;&lt;/TXSTATUS&gt;</span>
  <span class="nt">&lt;XID&gt;&lt;/XID&gt;</span>
  <span class="nt">&lt;ECI&gt;&lt;/ECI&gt;</span>
  <span class="nt">&lt;CAVV&gt;&lt;/CAVV&gt;</span>
  <span class="nt">&lt;TRANSID&gt;&lt;/TRANSID&gt;</span>
  <span class="nt">&lt;HASH&gt;&lt;/HASH&gt;</span>
<span class="nt">&lt;/EPAYMENT&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="o">&lt;</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">REFNO</span><span class="o">&gt;&lt;/</span><span class="n">REFNO</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ALIAS</span><span class="o">&gt;&lt;/</span><span class="n">ALIAS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">STATUS</span><span class="o">&gt;</span><span class="n">INPUT_ERROR</span><span class="o">&lt;/</span><span class="n">STATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span><span class="n">INVALID_CC_TOKEN</span><span class="o">&lt;/</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span><span class="n">Invalid</span> <span class="n">Token</span><span class="p">:</span> <span class="n">Invalid</span> <span class="n">token</span> <span class="nb">hash</span> <span class="s">"xake1kp153123o1235l2x3"</span><span class="o">&lt;/</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">DATE</span><span class="o">&gt;</span><span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span> <span class="mi">16</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">41</span><span class="o">&lt;/</span><span class="n">DATE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ORDER_REF</span><span class="o">&gt;&lt;/</span><span class="n">ORDER_REF</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">AUTH_CODE</span><span class="o">&gt;&lt;/</span><span class="n">AUTH_CODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RRN</span><span class="o">&gt;&lt;/</span><span class="n">RRN</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">PROCRETURNCODE</span><span class="o">&gt;&lt;/</span><span class="n">PROCRETURNCODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ERRORMESSAGE</span><span class="o">&gt;&lt;/</span><span class="n">ERRORMESSAGE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">BANK_MERCHANT_ID</span><span class="o">&gt;&lt;/</span><span class="n">BANK_MERCHANT_ID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">PAN</span><span class="o">&gt;&lt;/</span><span class="n">PAN</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">EXPYEAR</span><span class="o">&gt;&lt;/</span><span class="n">EXPYEAR</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">EXPMONTH</span><span class="o">&gt;&lt;/</span><span class="n">EXPMONTH</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CLIENTID</span><span class="o">&gt;&lt;/</span><span class="n">CLIENTID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HOSTREFNUM</span><span class="o">&gt;&lt;/</span><span class="n">HOSTREFNUM</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">OID</span><span class="o">&gt;&lt;/</span><span class="n">OID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RESPONSE</span><span class="o">&gt;&lt;/</span><span class="n">RESPONSE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TERMINAL_BANK</span><span class="o">&gt;&lt;/</span><span class="n">TERMINAL_BANK</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">MDSTATUS</span><span class="o">&gt;&lt;/</span><span class="n">MDSTATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">MDERRORMSG</span><span class="o">&gt;&lt;/</span><span class="n">MDERRORMSG</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TXSTATUS</span><span class="o">&gt;&lt;/</span><span class="n">TXSTATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">XID</span><span class="o">&gt;&lt;/</span><span class="n">XID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ECI</span><span class="o">&gt;&lt;/</span><span class="n">ECI</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CAVV</span><span class="o">&gt;&lt;/</span><span class="n">CAVV</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TRANSID</span><span class="o">&gt;&lt;/</span><span class="n">TRANSID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HASH</span><span class="o">&gt;&lt;/</span><span class="n">HASH</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
</code></pre>
<blockquote>
<p>WRONG_VERSION – Desteklenmeyen ALU versiyonu kullanımı durumunda alınan hatadır.</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="nt">&lt;EPAYMENT&gt;</span>
  <span class="nt">&lt;REFNO&gt;&lt;/REFNO&gt;</span>
  <span class="nt">&lt;ALIAS&gt;&lt;/ALIAS&gt;</span>
  <span class="nt">&lt;STATUS&gt;</span>INPUT_ERROR<span class="nt">&lt;/STATUS&gt;</span>
  <span class="nt">&lt;RETURN</span><span class="na">_CODE</span><span class="nt">&gt;</span>WRONG_VERSION<span class="err">&lt;</span>/RETURN_CODE&gt;
  <span class="nt">&lt;RETURN</span><span class="na">_MESSAGE</span><span class="nt">&gt;</span>Wrong version<span class="err">&lt;</span>/RETURN_MESSAGE&gt;
  <span class="nt">&lt;DATE&gt;</span>2017-10-04 16:23:47<span class="nt">&lt;/DATE&gt;</span>
  <span class="nt">&lt;HASH&gt;&lt;/HASH&gt;</span>
<span class="nt">&lt;/EPAYMENT&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="o">&lt;</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">REFNO</span><span class="o">&gt;&lt;/</span><span class="n">REFNO</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ALIAS</span><span class="o">&gt;&lt;/</span><span class="n">ALIAS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">STATUS</span><span class="o">&gt;</span><span class="n">INPUT_ERROR</span><span class="o">&lt;/</span><span class="n">STATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span><span class="n">WRONG_VERSION</span><span class="o">&lt;/</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span><span class="n">Wrong</span> <span class="n">version</span><span class="o">&lt;/</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">DATE</span><span class="o">&gt;</span><span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span> <span class="mi">16</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">47</span><span class="o">&lt;/</span><span class="n">DATE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HASH</span><span class="o">&gt;&lt;/</span><span class="n">HASH</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
</code></pre>
<blockquote>
<p>REQUEST_EXPIRED
  a) ORDER_DATE parametresinde belirtilen zaman ile ödeme zamanı arasında 10 dakika ve ya daha fazla zaman geçmesi durumunda alınan hatadır.
  b) ORDER_DATE parametresinin yanlış kullanımı durumunda alınan hatadır. ORDER_DATE parametresi UTC/GMT formatı ile Türkiye saatine göre 3 saati geri olacak şekilde gönderilmelidir.</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="nt">&lt;EPAYMENT&gt;</span>
  <span class="nt">&lt;REFNO&gt;&lt;/REFNO&gt;</span>
  <span class="nt">&lt;ALIAS&gt;&lt;/ALIAS&gt;</span>
  <span class="nt">&lt;STATUS&gt;</span>INPUT_ERROR<span class="nt">&lt;/STATUS&gt;</span>
  <span class="nt">&lt;RETURN</span><span class="na">_CODE</span><span class="nt">&gt;</span>REQUEST_EXPIRED<span class="err">&lt;</span>/RETURN_CODE&gt;
  <span class="nt">&lt;RETURN</span><span class="na">_MESSAGE</span><span class="nt">&gt;</span>Your request date is in the future (2017-10-04 15:23:21)!<span class="err">&lt;</span>/RETURN_MESSAGE&gt;
  <span class="nt">&lt;DATE&gt;</span>2017-10-04 16:21:36<span class="nt">&lt;/DATE&gt;</span>
  <span class="nt">&lt;ORDER</span><span class="na">_REF</span><span class="nt">&gt;</span><span class="err">&lt;</span>/ORDER_REF&gt;
  <span class="nt">&lt;AUTH</span><span class="na">_CODE</span><span class="nt">&gt;</span><span class="err">&lt;</span>/AUTH_CODE&gt;
  <span class="nt">&lt;RRN&gt;&lt;/RRN&gt;</span>
  <span class="nt">&lt;PROCRETURNCODE&gt;&lt;/PROCRETURNCODE&gt;</span>
  <span class="nt">&lt;ERRORMESSAGE&gt;&lt;/ERRORMESSAGE&gt;</span>
  <span class="nt">&lt;BANK</span><span class="na">_MERCHANT_ID</span><span class="nt">&gt;</span><span class="err">&lt;</span>/BANK_MERCHANT_ID&gt;
  <span class="nt">&lt;PAN&gt;&lt;/PAN&gt;</span>
  <span class="nt">&lt;EXPYEAR&gt;&lt;/EXPYEAR&gt;</span>
  <span class="nt">&lt;EXPMONTH&gt;&lt;/EXPMONTH&gt;</span>
  <span class="nt">&lt;CLIENTID&gt;&lt;/CLIENTID&gt;</span>
  <span class="nt">&lt;HOSTREFNUM&gt;&lt;/HOSTREFNUM&gt;</span>
  <span class="nt">&lt;OID&gt;&lt;/OID&gt;</span>
  <span class="nt">&lt;RESPONSE&gt;&lt;/RESPONSE&gt;</span>
  <span class="nt">&lt;TERMINAL</span><span class="na">_BANK</span><span class="nt">&gt;</span><span class="err">&lt;</span>/TERMINAL_BANK&gt;
  <span class="nt">&lt;MDSTATUS&gt;&lt;/MDSTATUS&gt;</span>
  <span class="nt">&lt;MDERRORMSG&gt;&lt;/MDERRORMSG&gt;</span>
  <span class="nt">&lt;TXSTATUS&gt;&lt;/TXSTATUS&gt;</span>
  <span class="nt">&lt;XID&gt;&lt;/XID&gt;</span>
  <span class="nt">&lt;ECI&gt;&lt;/ECI&gt;</span>
  <span class="nt">&lt;CAVV&gt;&lt;/CAVV&gt;</span>
  <span class="nt">&lt;TRANSID&gt;&lt;/TRANSID&gt;</span>
  <span class="nt">&lt;HASH&gt;&lt;/HASH&gt;</span>
<span class="nt">&lt;/EPAYMENT&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="o">&lt;</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">REFNO</span><span class="o">&gt;&lt;/</span><span class="n">REFNO</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ALIAS</span><span class="o">&gt;&lt;/</span><span class="n">ALIAS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">STATUS</span><span class="o">&gt;</span><span class="n">INPUT_ERROR</span><span class="o">&lt;/</span><span class="n">STATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span><span class="n">REQUEST_EXPIRED</span><span class="o">&lt;/</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span><span class="n">Your</span> <span class="n">request</span> <span class="n">date</span> <span class="ow">is</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">future</span> <span class="p">(</span><span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span> <span class="mi">15</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">21</span><span class="p">)</span><span class="err">!</span><span class="o">&lt;/</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">DATE</span><span class="o">&gt;</span><span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span> <span class="mi">16</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">36</span><span class="o">&lt;/</span><span class="n">DATE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ORDER_REF</span><span class="o">&gt;&lt;/</span><span class="n">ORDER_REF</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">AUTH_CODE</span><span class="o">&gt;&lt;/</span><span class="n">AUTH_CODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RRN</span><span class="o">&gt;&lt;/</span><span class="n">RRN</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">PROCRETURNCODE</span><span class="o">&gt;&lt;/</span><span class="n">PROCRETURNCODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ERRORMESSAGE</span><span class="o">&gt;&lt;/</span><span class="n">ERRORMESSAGE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">BANK_MERCHANT_ID</span><span class="o">&gt;&lt;/</span><span class="n">BANK_MERCHANT_ID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">PAN</span><span class="o">&gt;&lt;/</span><span class="n">PAN</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">EXPYEAR</span><span class="o">&gt;&lt;/</span><span class="n">EXPYEAR</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">EXPMONTH</span><span class="o">&gt;&lt;/</span><span class="n">EXPMONTH</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CLIENTID</span><span class="o">&gt;&lt;/</span><span class="n">CLIENTID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HOSTREFNUM</span><span class="o">&gt;&lt;/</span><span class="n">HOSTREFNUM</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">OID</span><span class="o">&gt;&lt;/</span><span class="n">OID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RESPONSE</span><span class="o">&gt;&lt;/</span><span class="n">RESPONSE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TERMINAL_BANK</span><span class="o">&gt;&lt;/</span><span class="n">TERMINAL_BANK</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">MDSTATUS</span><span class="o">&gt;&lt;/</span><span class="n">MDSTATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">MDERRORMSG</span><span class="o">&gt;&lt;/</span><span class="n">MDERRORMSG</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TXSTATUS</span><span class="o">&gt;&lt;/</span><span class="n">TXSTATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">XID</span><span class="o">&gt;&lt;/</span><span class="n">XID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ECI</span><span class="o">&gt;&lt;/</span><span class="n">ECI</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CAVV</span><span class="o">&gt;&lt;/</span><span class="n">CAVV</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TRANSID</span><span class="o">&gt;&lt;/</span><span class="n">TRANSID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HASH</span><span class="o">&gt;&lt;/</span><span class="n">HASH</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
</code></pre>
<blockquote>
<p>INVALID_CUSTOMER_INFO Zorunlu Parametrelerden bir veya bir kaçının hatalı veya eksik gönderilmesi durumunda alınan hatadır.</p>
</blockquote>
<pre class="highlight php tab-php"><code>   <span class="nt">&lt;EPAYMENT&gt;</span>
     <span class="nt">&lt;REFNO&gt;&lt;/REFNO&gt;</span>
     <span class="nt">&lt;ALIAS&gt;&lt;/ALIAS&gt;</span>
     <span class="nt">&lt;STATUS&gt;</span>INPUT_ERROR<span class="nt">&lt;/STATUS&gt;</span>
     <span class="nt">&lt;RETURN</span><span class="na">_CODE</span><span class="nt">&gt;</span>INVALID_CUSTOMER_INFO<span class="err">&lt;</span>/RETURN_CODE&gt;
     <span class="nt">&lt;RETURN</span><span class="na">_MESSAGE</span><span class="nt">&gt;</span>Invalid field BILL_EMAIL<span class="err">&lt;</span>/RETURN_MESSAGE&gt;
     <span class="nt">&lt;DATE&gt;</span>2017-10-04 16:22:25<span class="nt">&lt;/DATE&gt;</span>
     <span class="nt">&lt;HASH&gt;&lt;/HASH&gt;</span>
   <span class="nt">&lt;/EPAYMENT&gt;</span>
</code></pre><pre class="highlight python tab-python"><code>    <span class="o">&lt;</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">REFNO</span><span class="o">&gt;&lt;/</span><span class="n">REFNO</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">ALIAS</span><span class="o">&gt;&lt;/</span><span class="n">ALIAS</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">STATUS</span><span class="o">&gt;</span><span class="n">INPUT_ERROR</span><span class="o">&lt;/</span><span class="n">STATUS</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span><span class="n">INVALID_CUSTOMER_INFO</span><span class="o">&lt;/</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span><span class="n">Invalid</span> <span class="n">field</span> <span class="n">BILL_EMAIL</span><span class="o">&lt;/</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">DATE</span><span class="o">&gt;</span><span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span> <span class="mi">16</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">25</span><span class="o">&lt;/</span><span class="n">DATE</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">HASH</span><span class="o">&gt;&lt;/</span><span class="n">HASH</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
</code></pre>
<aside class="notice">
    ÖNEMLİ NOT:
Ekstra parametre olarak işaretlenen parametrelerin aktifleştirilmesi için üye işyeri satış temsilciniz ile iletişime geçebilir veya destek@payu.com.tr adresinden bizler ile iletişime geçerek talep edebilirsiniz.
</aside>

<table><thead>
<tr>
<th>Parametre</th>
<th>Açıklama</th>
<th>Ekstra Parametre</th>
</tr>
</thead><tbody>
<tr>
<td>REFNO</td>
<td>İşleme ait PayU referans numarasının bildirildiği parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>ALIAS</td>
<td>Üye işyerinin kendi tarafında kullanabileceği benzersiz işlem dizesidir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>STATUS</td>
<td>Alabileceği Değerler: <code> <strong>SUCCESS</strong> <strong>FAILED</strong> <strong>INPUT_ERROR</strong> </code></td>
<td>Hayır</td>
</tr>
<tr>
<td>RETURN_CODE</td>
<td>Alabileceği Değerler: <code> <strong>AUTHORIZED</strong> <strong>3DS_ENROLLED</strong> <strong>ALREADY_AUTHORIZED</strong> <strong>AUTHORIZATION_FAILED</strong> <strong>INVALID_CUSTOMER_INFO</strong> <strong>INVALID_PAYMENT_INFO</strong> <strong>INVALID_ACCOUNT</strong> <strong>INVALID_PAYMENT_METHOD_CODE</strong> <strong>INVALID_CURRENCY</strong> <strong>REQUEST_EXPIRED</strong> <strong>HASH_MISMATCH</strong> <strong>WRONG_VERSION</strong> <strong>INVALID_CC_TOKEN</strong></code></td>
<td>Hayır</td>
</tr>
<tr>
<td>RETURN_MESSAGE</td>
<td>RETURN_CODE parametreleri ile dönen değerlerin daha detaylı açıklamasını içeren parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>DATE</td>
<td>UTC formatında response zaman değerini belirten parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>URL_3DS</td>
<td>3DS_ENROLLED fonksiyonunun içerisinde işlemi 3D olarak tamamlatabilmek için 3D Secure sayfasına yönlendirmeniz gereken URL&#39;yi dönen parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>AMOUNT</td>
<td>Toplam işlem tutarını belirten parametredir. Mutlaka sıfırdan büyük olmalıdır.</td>
<td>Hayır</td>
</tr>
<tr>
<td>CURRENCY</td>
<td>İşlemde kullanılan para birimini belirten parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>INSTALLMENTS_NO</td>
<td>İşlemde kullanılan kartın, program ismini belirten parametredir (Axess,Bonus vb.).</td>
<td>Hayır</td>
</tr>
<tr>
<td>CARD_PROGRAM_NAME</td>
<td>İşlemde seçilen taksit sayısını belirten parametredir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>ORDER_REF</td>
<td>Üye işyeri tarafından request sırasında belirlenen sipariş referans numarasıdır.</td>
<td>Hayır</td>
</tr>
<tr>
<td>AUTH_CODE</td>
<td>Bankanın otorizasyon işlem numarasıdır.</td>
<td>Hayır</td>
</tr>
<tr>
<td>RRN</td>
<td>Bankaların iade işlemi için kullandığı işlem numarasıdır.</td>
<td>Hayır</td>
</tr>
<tr>
<td>HASH</td>
<td>Response sırasında gelen tüm parametreler geldiği sıra ile uzunluğu alınıp, dizine çevirilip aynı algoritma ile hash hesaplaması sonucu elde edilen değerdir. URL_3DS, hash hesaplamasına dahil değildir.</td>
<td>Hayır</td>
</tr>
<tr>
<td>PROCRETURNCODE</td>
<td>Yanıt içerisinde bankaların hata açıklama kodunun iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>ERRORMESSAGE</td>
<td>Yanıt içerisinde bankaların hata açıklama mesajının iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>BANK_MERCHANT_ID</td>
<td>Yanıt içerisinde işlemin gerçekleştiği Sanal POS’un bankadaki üye işyeri numarasının iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>PAN</td>
<td>Yanıt içerisinde işlemin gerçekleştiği kartın numarasının maskeli biçimde iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>EXPYEAR</td>
<td>Yanıt içerisinde işlemin gerçekleştiği kartın son kullanma yılının iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>EXPMONTH</td>
<td>Yanıt içerisinde işlemin gerçekleştiği kartın son kullanma ayının iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>OID</td>
<td>Yanıt içerisinde üye işyerlerinin kendi belirledikleri sipariş numarasının iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>TERMINAL_BANK</td>
<td>Yanıt içerisinde işlemin gerçekleştiği Sanal POS bankasının iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>MDSTATUS, MDERRORMSG, TXSTATUS, XID, ECI, CAVV</td>
<td>Yanıt içerisinde 3DS işlem parametrelerinin iletildiği parametrelerdir.</td>
<td>Evet</td>
</tr>
<tr>
<td>TRANSID</td>
<td>Yanıt içerisinde banka işlem numarasının iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>CLIENTID</td>
<td>Yanıt içerisinde işlemin gerçekleştiği Sanal POS’un bankadaki müşteri numarasının iletildiği parametredir.</td>
<td>Evet</td>
</tr>
<tr>
<td>MDSTATUS, MDERRORMSG, TXSTATUS, XID, ECI, CAVV</td>
<td>Yanıt içerisinde 3DS işlem parametrelerinin iletildiği parametrelerdir.</td>
<td>Evet</td>
</tr>
</tbody></table>
<h2 id='hash-hesaplama'>Hash Hesaplama</h2>
<blockquote>
<p>1.Adım İşlem isteği gönderilmeden önce dizi içerisindeki tüm parametreler KEY&#39;e göre sıralanmalıdır.</p>
</blockquote>
<pre class="highlight python tab-python"><code>     <span class="n">BACK_REF</span> <span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">backref</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">tr</span>
     <span class="n">BILL_ADDRESS</span> <span class="p">:</span> <span class="n">Birinci</span> <span class="n">Adres</span> <span class="n">sat</span><span class="err">ı</span><span class="n">r</span>
     <span class="n">BILL_ADDRESS2</span> <span class="p">:</span> <span class="err">İ</span><span class="n">kinci</span> <span class="n">Adres</span> <span class="n">sat</span><span class="err">ı</span><span class="n">r</span><span class="err">ı</span>
     <span class="n">BILL_CITY</span> <span class="p">:</span> <span class="n">ISTANBUL</span>
     <span class="n">BILL_COUNTRYCODE</span> <span class="p">:</span> <span class="n">TR</span>
     <span class="n">BILL_EMAIL</span> <span class="p">:</span> <span class="n">mail</span><span class="nd">@mail.com</span>
     <span class="n">BILL_FAX</span> <span class="p">:</span> <span class="mo">0212</span><span class="mi">9003711</span>
     <span class="n">BILL_FNAME</span> <span class="p">:</span> <span class="n">Ad</span>
     <span class="n">BILL_LNAME</span> <span class="p">:</span> <span class="n">Soyad</span>
     <span class="n">BILL_PHONE</span> <span class="p">:</span> <span class="mo">0212</span><span class="mi">9003711</span>
     <span class="n">BILL_STATE</span> <span class="p">:</span> <span class="n">Ayaza</span><span class="err">ğ</span><span class="n">a</span>
     <span class="n">BILL_ZIPCODE</span> <span class="p">:</span> <span class="mi">34000</span> 
     <span class="n">CC_CVV</span> <span class="p">:</span> <span class="mo">000</span>
     <span class="n">CC_NUMBER</span> <span class="p">:</span> <span class="mi">4355084355084358</span>
     <span class="n">CC_OWNER</span> <span class="p">:</span> <span class="n">Ad</span> <span class="n">Soyad</span>
     <span class="n">CLIENT_IP</span> <span class="p">:</span> <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>
     <span class="n">DELIVERY_ADDRESS</span> <span class="p">:</span> <span class="n">Birinci</span> <span class="n">Adres</span> <span class="n">sat</span><span class="err">ı</span><span class="n">r</span><span class="err">ı</span>
     <span class="n">DELIVERY_ADDRESS2</span> <span class="p">:</span> <span class="err">İ</span><span class="n">kinci</span> <span class="n">Adres</span> <span class="n">sat</span><span class="err">ı</span><span class="n">r</span><span class="err">ı</span>
     <span class="n">DELIVERY_CITY</span> <span class="p">:</span> <span class="n">ISTANBUL</span>
     <span class="n">DELIVERY_COMPANY</span> <span class="p">:</span> <span class="n">PayU</span> <span class="err">Ö</span><span class="n">deme</span> <span class="n">Kurulu</span><span class="err">ş</span><span class="n">u</span> <span class="n">A</span><span class="o">.</span><span class="err">Ş</span><span class="o">.</span>
     <span class="n">DELIVERY_COUNTRYCODE</span> <span class="p">:</span> <span class="n">Ayaza</span><span class="err">ğ</span><span class="n">a</span>
     <span class="n">DELIVERY_EMAIL</span> <span class="p">:</span> <span class="n">mail</span><span class="nd">@mail.com</span>
     <span class="n">DELIVERY_FNAME</span> <span class="p">:</span> <span class="n">Ad</span>
     <span class="n">DELIVERY_LNAME</span> <span class="p">:</span> <span class="n">Soyad</span>
     <span class="n">DELIVERY_PHONE</span> <span class="p">:</span> <span class="mo">0212</span><span class="mi">9003711</span>
     <span class="n">DELIVERY_STATE</span> <span class="p">:</span> <span class="n">TR</span>
     <span class="n">DELIVERY_ZIPCODE</span> <span class="p">:</span> <span class="mi">34000</span>
     <span class="n">EXP_MONTH</span> <span class="p">:</span> <span class="mi">12</span>
     <span class="n">EXP_YEAR</span> <span class="p">:</span> <span class="mi">2018</span>
     <span class="n">LANGUAGE</span> <span class="p">:</span> <span class="n">TR</span>
     <span class="n">MERCHANT</span> <span class="p">:</span> <span class="n">OPU_TEST</span>
     <span class="n">ORDER_DATE</span> <span class="p">:</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span> <span class="mi">11</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">23</span>
     <span class="n">ORDER_PCODE0</span> <span class="p">:</span> <span class="n">Test</span> <span class="n">Kodu</span>
     <span class="n">ORDER_PCODE1</span> <span class="p">:</span> <span class="n">Test</span> <span class="n">Kodu</span><span class="o">-</span><span class="mi">2</span>
     <span class="n">ORDER_PINFO0</span> <span class="p">:</span> <span class="n">Test</span> <span class="n">A</span><span class="err">çı</span><span class="n">klamas</span><span class="err">ı</span>
     <span class="n">ORDER_PINFO1</span> <span class="p">:</span> <span class="n">Test</span> <span class="n">A</span><span class="err">çı</span><span class="n">klamas</span><span class="err">ı</span><span class="o">-</span><span class="mi">2</span>
     <span class="n">ORDER_PNAME0</span> <span class="p">:</span> <span class="n">Test</span> <span class="err">Ü</span><span class="n">r</span><span class="err">ü</span><span class="n">n</span><span class="err">ü</span>
     <span class="n">ORDER_PNAME1</span> <span class="p">:</span> <span class="n">Test</span> <span class="err">Ü</span><span class="n">r</span><span class="err">ü</span><span class="n">n</span><span class="err">ü</span><span class="o">-</span><span class="mi">2</span>       
     <span class="n">ORDER_PRICE0</span> <span class="p">:</span> <span class="mi">5</span>
     <span class="n">ORDER_PRICE1</span> <span class="p">:</span> <span class="mi">15</span>
     <span class="n">ORDER_PRICE_TYPE0</span> <span class="p">:</span> <span class="n">NET</span>
     <span class="n">ORDER_PRICE_TYPE1</span> <span class="p">:</span> <span class="n">GROSS</span>
     <span class="n">ORDER_QTY0</span> <span class="p">:</span> <span class="mi">1</span>
     <span class="n">ORDER_QTY1</span> <span class="p">:</span> <span class="mi">3</span>
     <span class="n">ORDER_REF</span> <span class="p">:</span> <span class="mi">3245</span>
     <span class="n">ORDER_SHIPPING</span> <span class="p">:</span> <span class="mi">5</span>
     <span class="n">ORDER_VAT0</span> <span class="p">:</span> <span class="mi">18</span>
     <span class="n">ORDER_VAT1</span> <span class="p">:</span> <span class="mi">24</span>
     <span class="n">PAY_METHOD</span> <span class="p">:</span> <span class="n">CCVISAMC</span>
     <span class="n">PRICES_CURRENCY</span> <span class="p">:</span> <span class="n">TRY</span>
     <span class="n">SELECTED_INSTALLMENTS_NUMBER</span> <span class="p">:</span> <span class="mi">1</span>
</code></pre><pre class="highlight php tab-php"><code>
    [BACK_REF] =&gt; http://www.backref.com.tr
    [BILL_ADDRESS] =&gt; Birinci Adres satırı
    [BILL_ADDRESS2] =&gt; İkinci Adres satırı
    [BILL_CITY] =&gt; ISTANBUL
    [BILL_COUNTRYCODE] =&gt; TR
    [BILL_EMAIL] =&gt; mail@mail.com
    [BILL_FAX] =&gt; 02129003711
    [BILL_FNAME] =&gt; Ad
    [BILL_LNAME] =&gt; Soyad
    [BILL_PHONE] =&gt; 02129003711
    [BILL_STATE] =&gt; Ayazağa
    [BILL_ZIPCODE] =&gt; 34000
    [CC_CVV] =&gt; 000
    [CC_NUMBER] =&gt; 4355084355084358
    [CC_OWNER] =&gt; Ad Soyad
    [CLIENT_IP] =&gt; 127.0.0.1
    [DELIVERY_ADDRESS] =&gt; Birinci Adres satırı
    [DELIVERY_ADDRESS2] =&gt; İkinci Adres satırı
    [DELIVERY_CITY] =&gt; ISTANBUL
    [DELIVERY_COMPANY] =&gt; PayU Ödeme Kuruluşu A.Ş.
    [DELIVERY_COUNTRYCODE] =&gt; Ayazağa
    [DELIVERY_EMAIL] =&gt; mail@mail.com
    [DELIVERY_FNAME] =&gt; Ad
    [DELIVERY_LNAME] =&gt; Soyad
    [DELIVERY_PHONE] =&gt; 02129003711
    [DELIVERY_STATE] =&gt; TR
    [DELIVERY_ZIPCODE] =&gt; 34000
    [EXP_MONTH] =&gt; 12
    [EXP_YEAR] =&gt; 2018
    [LANGUAGE] =&gt; TR
    [MERCHANT] =&gt; OPU_TEST
    [ORDER_DATE] =&gt; 2017-10-04 11:10:23
    [ORDER_PCODE[0]] =&gt; Test Kodu
    [ORDER_PCODE[1]] =&gt; Test Kodu-2
    [ORDER_PINFO[0]] =&gt; Test Açıklaması
    [ORDER_PINFO[1]] =&gt; Test Açıklaması-2
    [ORDER_PNAME[0]] =&gt; Test Ürünü
    [ORDER_PNAME[1]] =&gt; Test Ürünü-2
    [ORDER_PRICE[0]] =&gt; 5
    [ORDER_PRICE[1]] =&gt; 15
    [ORDER_PRICE_TYPE[0]] =&gt; NET
    [ORDER_PRICE_TYPE[1]] =&gt; GROSS
    [ORDER_QTY[0]] =&gt; 1
    [ORDER_QTY[1]] =&gt; 3
    [ORDER_REF] =&gt; 3245
    [ORDER_SHIPPING] =&gt; 5
    [ORDER_VAT[0]] =&gt; 18
    [ORDER_VAT[1]] =&gt; 24
    [PAY_METHOD] =&gt; CCVISAMC
    [PRICES_CURRENCY] =&gt; TRY
    [SELECTED_INSTALLMENTS_NUMBER] =&gt; 1

</code></pre>
<blockquote>
<p>2.Adım Parametre değerlerinin başına uzunlukları eklenerek HASH string oluşturulmalı (UTF-8 Bayt olarak).</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="mi">25</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">backref</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">tr22Birinci</span> <span class="n">Adres</span> <span class="n">sat</span><span class="err">ı</span><span class="n">r</span><span class="err">ı</span><span class="mi">22</span><span class="err">İ</span><span class="n">kinci</span> <span class="n">Adres</span> <span class="n">sat</span><span class="err">ı</span><span class="n">r</span><span class="err">ı</span><span class="mi">8</span><span class="n">ISTANBUL2TR13mail</span><span class="nd">@mail.com11021290037112Ad5Soyad11021290037118Ayaza</span><span class="err">ğ</span><span class="n">a53400030001643550843550843588Ad</span> <span class="n">Soyad9127</span><span class="o">.</span><span class="mf">0.0</span><span class="o">.</span><span class="mi">122</span><span class="n">Birinci</span> <span class="n">Adres</span> <span class="n">sat</span><span class="err">ı</span><span class="n">r</span><span class="err">ı</span><span class="mi">22</span><span class="err">İ</span><span class="n">kinci</span> <span class="n">Adres</span> <span class="n">sat</span><span class="err">ı</span><span class="n">r</span><span class="err">ı</span><span class="mi">8</span><span class="n">ISTANBUL27PayU</span> <span class="err">Ö</span><span class="n">deme</span> <span class="n">Kurulu</span><span class="err">ş</span><span class="n">u</span> <span class="n">A</span><span class="o">.</span><span class="err">Ş</span><span class="o">.</span><span class="mi">8</span><span class="n">Ayaza</span><span class="err">ğ</span><span class="n">a13mail</span><span class="nd">@mail.com2Ad5Soyad11021290037112TR534000212420182TR8OPU_TEST192017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span> <span class="mi">11</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">239</span><span class="n">Test</span> <span class="n">Kodu11Test</span> <span class="n">Kodu</span><span class="o">-</span><span class="mi">218</span><span class="n">Test</span> <span class="n">A</span><span class="err">çı</span><span class="n">klamas</span><span class="err">ı</span><span class="mi">20</span><span class="n">Test</span> <span class="n">A</span><span class="err">çı</span><span class="n">klamas</span><span class="err">ı</span><span class="o">-</span><span class="mi">213</span><span class="n">Test</span> <span class="err">Ü</span><span class="n">r</span><span class="err">ü</span><span class="n">n</span><span class="err">ü</span><span class="mi">15</span><span class="n">Test</span> <span class="err">Ü</span><span class="n">r</span><span class="err">ü</span><span class="n">n</span><span class="err">ü</span><span class="o">-</span><span class="mi">2152153</span><span class="n">NET5GROSS111343245152182248CCVISAMC3TRY11</span>
</code></pre><pre class="highlight php tab-php"><code>25http://www.backref.com.tr22Birinci Adres satırı22İkinci Adres satırı8ISTANBUL2TR13mail@mail.com11021290037112Ad5Soyad11021290037118Ayazağa53400030001643550843550843588Ad Soyad9127.0.0.122Birinci Adres satırı22İkinci Adres satırı8ISTANBUL27PayU Ödeme Kuruluşu A.Ş.8Ayazağa13mail@mail.com2Ad5Soyad11021290037112TR534000212420182TR8OPU_TEST192017-10-04 11:10:239Test Kodu11Test Kodu-218Test Açıklaması20Test Açıklaması-213Test Ürünü15Test Ürünü-2152153NET5GROSS111343245152182248CCVISAMC3TRY11
</code></pre>
<blockquote>
<p>3.Adım Oluşturulan dizi PayU üye işyeri hesabınızın Hesap Yönetimi / Hesap Ayarları bölümünde yer alan kodlama anahtarı bilgisi kullanılarak HMAC_MD5 algoritması ile hashlenmeli ve elde edilen değer ORDER_HASH parametresine atayarak işlem isteği endpointe gönderilmelidir.
<strong>Örnekte kullanılan kodlama anahtarı değeri: SECRET_KEY</strong></p>
</blockquote>
<pre class="highlight python tab-python"><code> <span class="n">ORDER_HASH</span> <span class="mi">271748</span><span class="n">a93c3781774104216d979c7d94</span>
</code></pre><pre class="highlight php tab-php"><code> [ORDER_HASH]=&gt;"271748a93c3781774104216d979c7d94"
</code></pre>
<aside class="warning">
    ÖNEMLİ NOT:
 Güvenlik gerekçesiyle her HTTPS POST isteği benzersiz bir imzaya sahip olmalıdır.
</aside>

<p>İstek yapılmadan önce, istekte bulunacak parametrelerin başına uzunlukları (UTF-8 bayt olarak) eklenerek bir dizi oluşturulur. Ardından dizi, PayU üye işyeri hesabınızın, Hesap Yönetimi/Hesap Ayarları bölümünde yer alan kodlama anahtarı bilgisi kullanılarak HMAC_MD5 algoritması ile hashlenir. </p>

<p><strong>Oluşan hash ORDER_HASH parametresine atanmalıdır.</strong></p>

<ul>
<li>HMAC MD5 algoritmasıyla ilgili bilgi için linki takip edebilirsiniz https://en.wikipedia.org/wiki/Hash-based_message_authentication_code</li>
</ul>

<p>Hash hesaplama adımları aşağıdaki gibi olmalıdır:</p>

<ol>
<li>Adım: PayU&#39;ya işlem isteği gönderilmeden önce dizi içerisindeki tüm
parametreler KEY’e göre sıralanmalıdır.</li>
</ol>

<aside class="warning">
ORDER_PNAME, ORDER_PCODE, ORDER_PINFO, ORDER_PRICE and ORDER_QTY parametreleri köşeli parantez ( [] ) kullanılarak parantez içerisine sıra numarası yazılmalı.
</aside>

<ol>
<li><p>Adım: Parametre değerlerinin başına uzunlukları eklenerek HASH string oluşturulmalı (UTF-8 Bayt olarak).</p></li>
<li><p>Adım: Oluşturulan dizi PayU üye işyeri hesabınızın Hesap Yönetimi / Hesap Ayarları bölümünde yer alan kodlama anahtarı bilgisi kullanılarak HMAC_MD5 algoritması ile hashlenmeli.</p></li>
</ol>
<h2 id='3d-entegrasyonu'>3D Entegrasyonu</h2>
<p>3D entegrasyonu için; işlemin başlatıldığı sırada ilk alınan yanıtta elde edilen <url_3ds> </url_3ds> parametresi ile gelen URL&#39;i dinlemeli ve URL&#39;e yönlendirme yapılması beklenmektedir.
<aside class="warning">
Bu URL&#39;e değer post edilmemeli, yönlendirme gerçekleştirilmesi işlemin 3D aşamasının tamamlanması için yeterlidir.
</aside></p>

<p>Yapılması gereken düzenleme aşağıda ki gibidir:</p>

<p>Non-3D olarak gerçekleşen işlemlerde sistem  aşağıdaki gibi bir yanıt dönmektedir.</p>

<p><code>&lt;EPAYMENT&gt;</code> </br>
<code>&lt;REFNO&gt;41652325&lt;/REFNO&gt;</code>  </br>
<code>&lt;ALIAS&gt;3a9d9b9663a50a9ed0f545152320c9fb&lt;/ALIAS&gt;</code> </br>
<code>&lt;STATUS&gt;SUCCESS&lt;/STATUS&gt;</code> </br>
<code>&lt;RETURN_CODE&gt;AUTHORIZED&lt;/RETURN_CODE&gt;</code> </br>
<code>&lt;RETURN_MESSAGE&gt;Authorized.&lt;/RETURN_MESSAGE&gt;</code> </br>
<code>&lt;DATE&gt;2017-10-04 16:38:11&lt;/DATE&gt;</code> </br>
<code>&lt;AMOUNT&gt;10.9&lt;/AMOUNT&gt;</code> </br>
<code>&lt;CURRENCY&gt;TRY&lt;/CURRENCY&gt;</code> </br>
<code>&lt;INSTALLMENTS_NO&gt;1&lt;/INSTALLMENTS_NO&gt;</code> </br>
<code>&lt;CARD_PROGRAM_NAME&gt;AXESS&lt;/CARD_PROGRAM_NAME&gt;</code> </br>
<code>&lt;ORDER_REF&gt;84525&lt;/ORDER_REF&gt;</code> </br>
<code>&lt;AUTH_CODE&gt;342871&lt;/AUTH_CODE&gt;</code> </br>
<code>&lt;HASH&gt;f1c2e330b1ecad927969b679097d647c&lt;/HASH&gt;</code> </br>
<code>&lt;/EPAYMENT&gt;</code> </br></p>

<p>3D işlemlerde dönen yanıt ise aşağıda ki gibidir.</p>

<p><code>&lt;EPAYMENT&gt;</code> </br>
<code>&lt;REFNO&gt;41464560&lt;/REFNO&gt;</code> </br>
<code>&lt;ALIAS&gt;9592b7736c9e277fea8cc79c2e5b5a23&lt;/ALIAS&gt;</code> </br>
<code>&lt;STATUS&gt;SUCCESS&lt;/STATUS&gt;</code> </br>
<code>&lt;RETURN_CODE&gt;AUTHORIZED&lt;/RETURN_CODE&gt;</code> </br>
<code>&lt;RETURN_MESSAGE&gt;Authorized.&lt;/RETURN_MESSAGE&gt;</code> </br>
<code>&lt;DATE&gt;2017-10-04 15:20:21&lt;/DATE&gt;</code> </br>
<code>&lt;ORDER_REF&gt;7305&lt;/ORDER_REF&gt;</code> </br>
<code>&lt;AUTH_CODE&gt;13157TUlA15117&lt;/AUTH_CODE&gt;</code> </br>
<code>&lt;HASH&gt;b560a38e2b3e7bcbac328bbd6218bc60&lt;/HASH&gt;</code> </br>
<code>&lt;/EPAYMENT&gt;</code> </br></p>

<p>Burada 3D yanıtını incelendiğinde 
<code>&lt;RETURN_CODE&gt;3DS_ENROLLED&lt;/RETURN_CODE&gt;</code> ve <code>&lt;URL_3DS&gt;https://secure.payu.com.tr/order/alu_return_3ds.php?request_id=2Xrl85eakbSBr3WtcbixYQ%3D%3D&lt;/URL_3DS&gt;</code>
şeklinde olduğunu görüntülenmekte.</p>

<p>Yapılması gereken <code>&lt;RETURN_CODE&gt;3DS_ENROLLED&lt;/RETURN_CODE&gt;</code> yanıtını alındığında <code>&lt;URL_3DS&gt;&lt;/URL_3DS&gt;</code> içinde yer alan URL&#39;e yönlendirme yapmaktır. Bu yönlendirmeyi sağladığında müşteri banka ekranına yönlendirilir ve şifre doğrulamasını yapması beklenir.</p>

<p>İşlem tamamlandığında ise işlem isteği gönderdiğiniz sırada tanımlamış olduğunuz BACK_REF URL&#39;e işlem sonucunu post edilir.
Yukarıdaki geliştirme ile yönlendirme sağlandığında, 3D işlem gerçekleştirilebilir.</p>
<h2 id='kart-saklama-ve-saklanmis-kart-ile-odeme-alma'>Kart Saklama ve Saklanmış Kart ile Ödeme Alma</h2>
<blockquote>
<p>Kart Saklama İstek Örneği</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://secure.payu.com.tr/order/alu/v3"</span><span class="p">;</span>
<span class="nb">date_default_timezone_set</span><span class="p">(</span><span class="s1">'UTC'</span><span class="p">);</span>

<span class="nv">$secretKey</span> <span class="o">=</span> <span class="s1">'SECRET_KEY'</span><span class="p">;</span>

<span class="nv">$arParams</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>

   <span class="s2">"MERCHANT"</span> <span class="o">=&gt;</span> <span class="s2">"OPU_TEST"</span><span class="p">,</span>
   <span class="s2">"LANGUAGE"</span> <span class="o">=&gt;</span> <span class="s2">"TR"</span><span class="p">,</span>
   <span class="s2">"ORDER_REF"</span> <span class="o">=&gt;</span>  <span class="nb">rand</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10000</span><span class="p">),</span>
   <span class="s2">"ORDER_DATE"</span> <span class="o">=&gt;</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'Y-m-d H:i:s'</span><span class="p">),</span>
   <span class="s2">"PAY_METHOD"</span> <span class="o">=&gt;</span> <span class="s2">"CCVISAMC"</span><span class="p">,</span>
   <span class="s2">"BACK_REF"</span> <span class="o">=&gt;</span> <span class="s2">"http://www.backref.com.tr"</span><span class="p">,</span>
   <span class="s2">"PRICES_CURRENCY"</span> <span class="o">=&gt;</span> <span class="s2">"TRY"</span><span class="p">,</span>
   <span class="s2">"SELECTED_INSTALLMENTS_NUMBER"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>
   <span class="s2">"ORDER_SHIPPING"</span><span class="o">=&gt;</span><span class="s2">"5"</span><span class="p">,</span>
   <span class="s2">"CLIENT_IP"</span> <span class="o">=&gt;</span> <span class="s2">"127.0.0.1"</span><span class="p">,</span>


   <span class="s2">"ORDER_PNAME[0]"</span> <span class="o">=&gt;</span> <span class="s2">"Test Ürünü"</span><span class="p">,</span>
   <span class="s2">"ORDER_PCODE[0]"</span> <span class="o">=&gt;</span> <span class="s2">"Test Kodu"</span><span class="p">,</span>
   <span class="s2">"ORDER_PINFO[0]"</span> <span class="o">=&gt;</span> <span class="s2">"Test Açıklaması"</span><span class="p">,</span>
   <span class="s2">"ORDER_PRICE[0]"</span> <span class="o">=&gt;</span> <span class="s2">"5"</span><span class="p">,</span>
   <span class="s2">"ORDER_VAT[0]"</span><span class="o">=&gt;</span><span class="s2">"18"</span><span class="p">,</span>
   <span class="s2">"ORDER_PRICE_TYPE[0]"</span><span class="o">=&gt;</span><span class="s2">"NET"</span><span class="p">,</span>
   <span class="s2">"ORDER_QTY[0]"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>

   <span class="s2">"LU_ENABLE_TOKEN"</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
   <span class="s2">"CC_NUMBER"</span> <span class="o">=&gt;</span> <span class="s2">"4355084355084358"</span><span class="p">,</span>
   <span class="s2">"EXP_MONTH"</span> <span class="o">=&gt;</span> <span class="s2">"12"</span><span class="p">,</span>
   <span class="s2">"EXP_YEAR"</span> <span class="o">=&gt;</span> <span class="s2">"2018"</span><span class="p">,</span>
   <span class="s2">"CC_CVV"</span> <span class="o">=&gt;</span> <span class="s2">"000"</span><span class="p">,</span>
   <span class="s2">"CC_OWNER"</span> <span class="o">=&gt;</span> <span class="s2">"Ad Soyad"</span><span class="p">,</span>

   <span class="s2">"BILL_FNAME"</span> <span class="o">=&gt;</span> <span class="s2">"Ad"</span><span class="p">,</span>
   <span class="s2">"BILL_LNAME"</span> <span class="o">=&gt;</span> <span class="s2">"Soyad"</span><span class="p">,</span>
   <span class="s2">"BILL_EMAIL"</span> <span class="o">=&gt;</span> <span class="s2">"mail@mail.com"</span><span class="p">,</span>
   <span class="s2">"BILL_PHONE"</span> <span class="o">=&gt;</span> <span class="s2">"02129003711"</span><span class="p">,</span>
   <span class="s2">"BILL_FAX"</span> <span class="o">=&gt;</span> <span class="s2">"02129003711"</span><span class="p">,</span>
   <span class="s2">"BILL_ADDRESS"</span> <span class="o">=&gt;</span> <span class="s2">"Birinci Adres satırı"</span><span class="p">,</span>
   <span class="s2">"BILL_ADDRESS2"</span> <span class="o">=&gt;</span> <span class="s2">"İkinci Adres satırı"</span><span class="p">,</span>
   <span class="s2">"BILL_ZIPCODE"</span> <span class="o">=&gt;</span> <span class="s2">"34000"</span><span class="p">,</span>
   <span class="s2">"BILL_CITY"</span> <span class="o">=&gt;</span> <span class="s2">"ISTANBUL"</span><span class="p">,</span>
   <span class="s2">"BILL_COUNTRYCODE"</span> <span class="o">=&gt;</span> <span class="s2">"TR"</span><span class="p">,</span>
   <span class="s2">"BILL_STATE"</span> <span class="o">=&gt;</span> <span class="s2">"Ayazağa"</span><span class="p">,</span>

   <span class="s2">"DELIVERY_FNAME"</span> <span class="o">=&gt;</span> <span class="s2">"Ad"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_LNAME"</span> <span class="o">=&gt;</span> <span class="s2">"Soyad"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_EMAIL"</span> <span class="o">=&gt;</span> <span class="s2">"mail@mail.com"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_PHONE"</span> <span class="o">=&gt;</span> <span class="s2">"02129003711"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_COMPANY"</span> <span class="o">=&gt;</span> <span class="s2">"PayU Ödeme Kuruluşu A.Ş."</span><span class="p">,</span>
   <span class="s2">"DELIVERY_ADDRESS"</span> <span class="o">=&gt;</span> <span class="s2">"Birinci Adres satırı"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_ADDRESS2"</span> <span class="o">=&gt;</span> <span class="s2">"İkinci Adres satırı"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_ZIPCODE"</span> <span class="o">=&gt;</span> <span class="s2">"34000"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_CITY"</span> <span class="o">=&gt;</span> <span class="s2">"ISTANBUL"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_STATE"</span> <span class="o">=&gt;</span> <span class="s2">"TR"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_COUNTRYCODE"</span> <span class="o">=&gt;</span> <span class="s2">"Ayazağa"</span><span class="p">,</span>
<span class="p">);</span>

<span class="nb">ksort</span><span class="p">(</span><span class="nv">$arParams</span><span class="p">);</span>
<span class="nv">$hashString</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$arParams</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$val</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$hashString</span> <span class="o">.=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$val</span><span class="p">)</span> <span class="o">.</span> <span class="nv">$val</span><span class="p">;</span>
<span class="p">}</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nv">$arParams</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nv">$hashString</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>

<span class="nv">$arParams</span><span class="p">[</span><span class="s2">"ORDER_HASH"</span><span class="p">]</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s2">"md5"</span><span class="p">,</span> <span class="nv">$hashString</span><span class="p">,</span> <span class="nv">$secretKey</span><span class="p">);</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nv">$arParams</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYHOST</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_IPRESOLVE</span><span class="p">,</span> <span class="nx">CURL_IPRESOLVE_V4</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_TIMEOUT</span><span class="p">,</span> <span class="mi">60</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="nv">$arParams</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="nv">$curlerrcode</span> <span class="o">=</span> <span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$curlerr</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$curlerr</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$curlerrcode</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$parsedXML</span> <span class="o">=</span> <span class="o">@</span><span class="nb">simplexml_load_string</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$parsedXML</span> <span class="o">!==</span> <span class="k">FALSE</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
        <span class="nb">print_r</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
        <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>

        <span class="nv">$payuTranReference</span> <span class="o">=</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">REFNO</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">STATUS</span> <span class="o">==</span> <span class="s2">"SUCCESS"</span><span class="p">)</span> <span class="p">{</span>


            <span class="k">if</span> <span class="p">((</span><span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">RETURN_CODE</span> <span class="o">==</span> <span class="s2">"3DS_ENROLLED"</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">URL_3DS</span><span class="p">)))</span> <span class="p">{</span>
                <span class="nb">header</span><span class="p">(</span><span class="s2">"Location:"</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">URL_3DS</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s2">"SUCCES [PayU reference number: "</span> <span class="o">.</span> <span class="nv">$payuTranReference</span> <span class="o">.</span> <span class="s2">"]"</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">echo</span> <span class="s2">"Error: "</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">RETURN_MESSAGE</span> <span class="o">.</span> <span class="s2">" ["</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">RETURN_CODE</span> <span class="o">.</span> <span class="s2">"]"</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s2">"&lt;br&gt;"</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s2">"Error Details: "</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">ERRORMESSAGE</span> <span class="o">.</span> <span class="s2">"&lt;br&gt; Error Code: ["</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">PROCRETURNCODE</span> <span class="o">.</span> <span class="s2">"]"</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$payuTranReference</span><span class="p">))</span> <span class="p">{</span>
                <span class="c1">//the transaction was register to PayU system, but some error occured during the bank authorization.
</span>                <span class="c1">//See $parsedXML-&gt;RETURN_MESSAGE and $parsedXML-&gt;RETURN_CODE for details
</span>                <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
                <span class="k">echo</span> <span class="s2">" [PayU reference number: "</span> <span class="o">.</span> <span class="nv">$payuTranReference</span> <span class="o">.</span> <span class="s2">"]"</span><span class="p">;</span>
                <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>

            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"cURL error: "</span> <span class="o">.</span> <span class="nv">$curlerr</span><span class="p">;</span>

<span class="p">}</span>

</code></pre><pre class="highlight python tab-python"><code><span class="c"># Importing required libraries.</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlencode</span>
<span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>

<span class="c"># Endpoint</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">"https://secure.payu.com.tr/order/alu/v3"</span>

<span class="c"># PayU Merchant's Secret Key</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s">'SECRET_KEY'</span>

<span class="c"># Request @params Begin</span>
<span class="n">array</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c"># PayU Merchant's Merchant ID</span>
    <span class="s">'MERCHANT'</span><span class="p">:</span> <span class="s">"OPU_TEST"</span><span class="p">,</span>
    <span class="s">'LANGUAGE'</span><span class="p">:</span> <span class="s">"TR"</span><span class="p">,</span>
    <span class="s">'ORDER_DATE'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">Y-</span><span class="si">%</span><span class="s">m-</span><span class="si">%</span><span class="s">d </span><span class="si">%</span><span class="s">H:</span><span class="si">%</span><span class="s">M:</span><span class="si">%</span><span class="s">S'</span><span class="p">),</span>
    <span class="s">'PAY_METHOD'</span><span class="p">:</span> <span class="s">"CCVISAMC"</span><span class="p">,</span>
    <span class="s">'BACK_REF'</span><span class="p">:</span> <span class="s">"http://www.backref.com.tr"</span><span class="p">,</span>
    <span class="s">'PRICES_CURRENCY'</span><span class="p">:</span> <span class="s">"TRY"</span><span class="p">,</span>
    <span class="s">'SELECTED_INSTALLMENTS_NUMBER'</span><span class="p">:</span> <span class="s">"1"</span><span class="p">,</span>
    <span class="s">'ORDER_SHIPPING'</span><span class="p">:</span> <span class="s">"5"</span><span class="p">,</span>
    <span class="s">'CLIENT_IP'</span><span class="p">:</span> <span class="s">"127.0.0.1"</span><span class="p">,</span>
    <span class="s">'ORDER_PNAME[0]'</span><span class="p">:</span> <span class="s">"Test Ürünü"</span><span class="p">,</span>
    <span class="s">'ORDER_PCODE[0]'</span><span class="p">:</span> <span class="s">"Test Kodu"</span><span class="p">,</span>
    <span class="s">'ORDER_PINFO[0]'</span><span class="p">:</span> <span class="s">"Test Açıklaması"</span><span class="p">,</span>
    <span class="s">'ORDER_PRICE[0]'</span><span class="p">:</span> <span class="s">"5"</span><span class="p">,</span>
    <span class="s">'ORDER_VAT[0]'</span><span class="p">:</span> <span class="s">"18"</span><span class="p">,</span>
    <span class="s">'ORDER_PRICE_TYPE[0]'</span><span class="p">:</span> <span class="s">"NET"</span><span class="p">,</span>
    <span class="s">'ORDER_QTY[0]'</span><span class="p">:</span> <span class="s">"1"</span><span class="p">,</span>
    <span class="s">'CC_NUMBER'</span><span class="p">:</span> <span class="s">"4355084355084358"</span><span class="p">,</span>
    <span class="s">'EXP_MONTH'</span><span class="p">:</span> <span class="s">"12"</span><span class="p">,</span>
    <span class="s">'EXP_YEAR'</span><span class="p">:</span> <span class="s">"2018"</span><span class="p">,</span>
    <span class="s">'CC_CVV'</span><span class="p">:</span> <span class="s">"000"</span><span class="p">,</span>
    <span class="s">'CC_OWNER'</span><span class="p">:</span> <span class="s">"Ad Soyad"</span><span class="p">,</span>
    <span class="s">'BILL_FNAME'</span><span class="p">:</span> <span class="s">"Ad"</span><span class="p">,</span>
    <span class="s">'BILL_LNAME'</span><span class="p">:</span> <span class="s">"Soyad"</span><span class="p">,</span>
    <span class="s">'BILL_EMAIL'</span><span class="p">:</span> <span class="s">"mail@mail.com"</span><span class="p">,</span>
    <span class="s">'BILL_PHONE'</span><span class="p">:</span> <span class="s">"02129003711"</span><span class="p">,</span>
    <span class="s">'BILL_FAX'</span><span class="p">:</span> <span class="s">"02129003711"</span><span class="p">,</span>
    <span class="s">'BILL_ADDRESS'</span><span class="p">:</span> <span class="s">"Birinci Adres satırı"</span><span class="p">,</span>
    <span class="s">'BILL_ADDRESS2'</span><span class="p">:</span> <span class="s">"İkinci Adres satırı"</span><span class="p">,</span>
    <span class="s">'BILL_ZIPCODE'</span><span class="p">:</span> <span class="s">"34000"</span><span class="p">,</span>
    <span class="s">'BILL_CITY'</span><span class="p">:</span> <span class="s">"ISTANBUL"</span><span class="p">,</span>
    <span class="s">'BILL_COUNTRYCODE'</span><span class="p">:</span> <span class="s">"TR"</span><span class="p">,</span>
    <span class="s">'BILL_STATE'</span><span class="p">:</span> <span class="s">"Ayazağa"</span><span class="p">,</span>
    <span class="s">'DELIVERY_FNAME'</span><span class="p">:</span> <span class="s">"Ad"</span><span class="p">,</span>
    <span class="s">'DELIVERY_LNAME'</span><span class="p">:</span> <span class="s">"Soyad"</span><span class="p">,</span>
    <span class="s">'DELIVERY_EMAIL'</span><span class="p">:</span> <span class="s">"mail@mail.com"</span><span class="p">,</span>
    <span class="s">'DELIVERY_PHONE'</span><span class="p">:</span> <span class="s">"02129003711"</span><span class="p">,</span>
    <span class="s">'DELIVERY_COMPANY'</span><span class="p">:</span> <span class="s">"PayU Ödeme Kuruluşu A.Ş."</span><span class="p">,</span>
    <span class="s">'DELIVERY_ADDRESS'</span><span class="p">:</span> <span class="s">"Birinci Adres satırı"</span><span class="p">,</span>
    <span class="s">'DELIVERY_ADDRESS2'</span><span class="p">:</span> <span class="s">"İkinci Adres satırı"</span><span class="p">,</span>
    <span class="s">'DELIVERY_ZIPCODE'</span><span class="p">:</span> <span class="s">"34000"</span><span class="p">,</span>
    <span class="s">'DELIVERY_CITY'</span><span class="p">:</span> <span class="s">"ISTANBUL"</span><span class="p">,</span>
    <span class="s">'DELIVERY_STATE'</span><span class="p">:</span> <span class="s">"TR"</span><span class="p">,</span>
    <span class="s">'DELIVERY_COUNTRYCODE'</span><span class="p">:</span> <span class="s">"Ayazağa"</span><span class="p">,</span>
    <span class="s">'LU_ENABLE_TOKEN'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">}</span>
<span class="c"># Random number generation function for ORDER_REF @param</span>
<span class="n">refno</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100000</span><span class="p">))</span>

<span class="c"># Adding ORDER_REF @param to request array</span>
<span class="n">array</span><span class="p">[</span><span class="s">'ORDER_REF'</span><span class="p">]</span> <span class="o">=</span> <span class="n">refno</span>

<span class="c"># Initializing the hashstring @param</span>
<span class="n">hashstring</span> <span class="o">=</span> <span class="s">''</span>

<span class="c"># Sorting Array @params</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">array</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
<span class="c"># Adding the length of each field value at the beginning of field value</span>
    <span class="n">hashstring</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">hashstring</span><span class="p">)</span>

<span class="c"># Calculating ORDER_HASH</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashstring</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c"># Adding ORDER_HASH @param to request array</span>
<span class="n">array</span><span class="p">[</span><span class="s">'ORDER_HASH'</span><span class="p">]</span> <span class="o">=</span> <span class="n">signature</span>

<span class="k">print</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span>

<span class="c"># Sending Request to Endpoint</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">urlencode</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>

<span class="c"># Printing result/response</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre>
<aside class="warning">
PayU'nun saklanmış kartdan periyodik olarak belirli bir tutar çekmesi adına bir servis bulunmamaktadır. Bu geliştirme tarafınızca yapılmalıdır.
</aside>

<aside class="warning">
Kart saklama ve saklanmış kart ile ödeme almak için satış temsilciniz ile iletişime geçerek gerekli aktivasyonları sağlamanız gerekmektedir.
</aside>

<p>API ile ödeme alırken tek bir parametre eklenmesi ile kart saklanabilir(token oluşturulabilir), saklanan kart ile &quot;Tek Tıkla Ödeme&quot; veya &quot;Tekrarlayan Ödeme&quot; modelinde ödeme alabilirsiniz.</p>
<h3 id='kart-saklama-token-olusturma'>Kart Saklama(Token Oluşturma)</h3>
<blockquote>
<p>Başarılı Kart Saklama Örneği</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="o">&lt;</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">REFNO</span><span class="o">&gt;</span><span class="mi">41536398</span><span class="o">&lt;/</span><span class="n">REFNO</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ALIAS</span><span class="o">&gt;</span><span class="mi">8</span><span class="n">f886d873acec2724c6cdddaf09c5861</span><span class="o">&lt;/</span><span class="n">ALIAS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">STATUS</span><span class="o">&gt;</span><span class="n">SUCCESS</span><span class="o">&lt;/</span><span class="n">STATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span><span class="n">AUTHORIZED</span><span class="o">&lt;/</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span><span class="n">Authorized</span><span class="o">.&lt;/</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">DATE</span><span class="o">&gt;</span><span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">06</span> <span class="mi">21</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">21</span><span class="o">&lt;/</span><span class="n">DATE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">AMOUNT</span><span class="o">&gt;</span><span class="mf">10.9</span><span class="o">&lt;/</span><span class="n">AMOUNT</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CURRENCY</span><span class="o">&gt;</span><span class="n">TRY</span><span class="o">&lt;/</span><span class="n">CURRENCY</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">INSTALLMENTS_NO</span><span class="o">&gt;</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">INSTALLMENTS_NO</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CARD_PROGRAM_NAME</span><span class="o">&gt;</span><span class="n">AXESS</span><span class="o">&lt;/</span><span class="n">CARD_PROGRAM_NAME</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ORDER_REF</span><span class="o">&gt;</span><span class="mi">78244</span><span class="o">&lt;/</span><span class="n">ORDER_REF</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">AUTH_CODE</span><span class="o">&gt;</span><span class="mo">0264</span><span class="mi">97</span><span class="o">&lt;/</span><span class="n">AUTH_CODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RRN</span><span class="o">&gt;</span><span class="mi">727921202667</span><span class="o">&lt;/</span><span class="n">RRN</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ERRORMESSAGE</span><span class="o">&gt;</span><span class="n">Approved</span><span class="o">.&lt;/</span><span class="n">ERRORMESSAGE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">PROCRETURNCODE</span><span class="o">&gt;</span><span class="mo">00</span><span class="o">&lt;/</span><span class="n">PROCRETURNCODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">BANK_MERCHANT_ID</span><span class="o">&gt;</span><span class="mi">100100000</span><span class="o">&lt;/</span><span class="n">BANK_MERCHANT_ID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">PAN</span><span class="o">&gt;</span><span class="mi">4355</span><span class="o">-</span><span class="n">xxxx</span><span class="o">-</span><span class="n">xxxx</span><span class="o">-</span><span class="mi">4358</span><span class="o">&lt;/</span><span class="n">PAN</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">EXPYEAR</span><span class="o">&gt;</span><span class="mi">18</span><span class="o">&lt;/</span><span class="n">EXPYEAR</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">EXPMONTH</span><span class="o">&gt;</span><span class="mi">12</span><span class="o">&lt;/</span><span class="n">EXPMONTH</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CLIENTID</span><span class="o">&gt;</span><span class="mi">100100000</span><span class="o">&lt;/</span><span class="n">CLIENTID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HOSTREFNUM</span><span class="o">&gt;</span><span class="mi">727921202667</span><span class="o">&lt;/</span><span class="n">HOSTREFNUM</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">OID</span><span class="o">&gt;</span><span class="mi">41536398</span><span class="o">&lt;/</span><span class="n">OID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RESPONSE</span><span class="o">&gt;</span><span class="n">Approved</span><span class="o">&lt;/</span><span class="n">RESPONSE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TERMINAL_BANK</span><span class="o">&gt;</span><span class="n">AKBA</span><span class="o">&lt;/</span><span class="n">TERMINAL_BANK</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">MDSTATUS</span><span class="o">&gt;&lt;/</span><span class="n">MDSTATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">MDERRORMSG</span><span class="o">&gt;&lt;/</span><span class="n">MDERRORMSG</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TXSTATUS</span><span class="o">&gt;&lt;/</span><span class="n">TXSTATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">XID</span><span class="o">&gt;&lt;/</span><span class="n">XID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ECI</span><span class="o">&gt;&lt;/</span><span class="n">ECI</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CAVV</span><span class="o">&gt;&lt;/</span><span class="n">CAVV</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TRANSID</span><span class="o">&gt;</span><span class="mi">17279</span><span class="n">VYUG14215</span><span class="o">&lt;/</span><span class="n">TRANSID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TOKEN_HASH</span><span class="o">&gt;</span><span class="mi">1</span><span class="n">b88351b26f83e61361c333bec9428e8</span><span class="o">&lt;/</span><span class="n">TOKEN_HASH</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HASH</span><span class="o">&gt;</span><span class="n">f56580e0932184a289934c34690a434a</span><span class="o">&lt;/</span><span class="n">HASH</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
</code></pre><pre class="highlight php tab-php"><code><span class="nt">&lt;EPAYMENT&gt;</span>
  <span class="nt">&lt;REFNO&gt;</span>41536398<span class="nt">&lt;/REFNO&gt;</span>
  <span class="nt">&lt;ALIAS&gt;</span>8f886d873acec2724c6cdddaf09c5861<span class="nt">&lt;/ALIAS&gt;</span>
  <span class="nt">&lt;STATUS&gt;</span>SUCCESS<span class="nt">&lt;/STATUS&gt;</span>
  <span class="nt">&lt;RETURN</span><span class="na">_CODE</span><span class="nt">&gt;</span>AUTHORIZED<span class="err">&lt;</span>/RETURN_CODE&gt;
  <span class="nt">&lt;RETURN</span><span class="na">_MESSAGE</span><span class="nt">&gt;</span>Authorized.<span class="err">&lt;</span>/RETURN_MESSAGE&gt;
  <span class="nt">&lt;DATE&gt;</span>2017-10-06 21:24:21<span class="nt">&lt;/DATE&gt;</span>
  <span class="nt">&lt;AMOUNT&gt;</span>10.9<span class="nt">&lt;/AMOUNT&gt;</span>
  <span class="nt">&lt;CURRENCY&gt;</span>TRY<span class="nt">&lt;/CURRENCY&gt;</span>
  <span class="nt">&lt;INSTALLMENTS</span><span class="na">_NO</span><span class="nt">&gt;</span>1<span class="err">&lt;</span>/INSTALLMENTS_NO&gt;
  <span class="nt">&lt;CARD</span><span class="na">_PROGRAM_NAME</span><span class="nt">&gt;</span>AXESS<span class="err">&lt;</span>/CARD_PROGRAM_NAME&gt;
  <span class="nt">&lt;ORDER</span><span class="na">_REF</span><span class="nt">&gt;</span>78244<span class="err">&lt;</span>/ORDER_REF&gt;
  <span class="nt">&lt;AUTH</span><span class="na">_CODE</span><span class="nt">&gt;</span>026497<span class="err">&lt;</span>/AUTH_CODE&gt;
  <span class="nt">&lt;RRN&gt;</span>727921202667<span class="nt">&lt;/RRN&gt;</span>
  <span class="nt">&lt;ERRORMESSAGE&gt;</span>Approved.<span class="nt">&lt;/ERRORMESSAGE&gt;</span>
  <span class="nt">&lt;PROCRETURNCODE&gt;</span>00<span class="nt">&lt;/PROCRETURNCODE&gt;</span>
  <span class="nt">&lt;BANK</span><span class="na">_MERCHANT_ID</span><span class="nt">&gt;</span>100100000<span class="err">&lt;</span>/BANK_MERCHANT_ID&gt;
  <span class="nt">&lt;PAN&gt;</span>4355-xxxx-xxxx-4358<span class="nt">&lt;/PAN&gt;</span>
  <span class="nt">&lt;EXPYEAR&gt;</span>18<span class="nt">&lt;/EXPYEAR&gt;</span>
  <span class="nt">&lt;EXPMONTH&gt;</span>12<span class="nt">&lt;/EXPMONTH&gt;</span>
  <span class="nt">&lt;CLIENTID&gt;</span>100100000<span class="nt">&lt;/CLIENTID&gt;</span>
  <span class="nt">&lt;HOSTREFNUM&gt;</span>727921202667<span class="nt">&lt;/HOSTREFNUM&gt;</span>
  <span class="nt">&lt;OID&gt;</span>41536398<span class="nt">&lt;/OID&gt;</span>
  <span class="nt">&lt;RESPONSE&gt;</span>Approved<span class="nt">&lt;/RESPONSE&gt;</span>
  <span class="nt">&lt;TERMINAL</span><span class="na">_BANK</span><span class="nt">&gt;</span>AKBA<span class="err">&lt;</span>/TERMINAL_BANK&gt;
  <span class="nt">&lt;MDSTATUS&gt;&lt;/MDSTATUS&gt;</span>
  <span class="nt">&lt;MDERRORMSG&gt;&lt;/MDERRORMSG&gt;</span>
  <span class="nt">&lt;TXSTATUS&gt;&lt;/TXSTATUS&gt;</span>
  <span class="nt">&lt;XID&gt;&lt;/XID&gt;</span>
  <span class="nt">&lt;ECI&gt;&lt;/ECI&gt;</span>
  <span class="nt">&lt;CAVV&gt;&lt;/CAVV&gt;</span>
  <span class="nt">&lt;TRANSID&gt;</span>17279VYUG14215<span class="nt">&lt;/TRANSID&gt;</span>
  <span class="nt">&lt;TOKEN</span><span class="na">_HASH</span><span class="nt">&gt;</span>1b88351b26f83e61361c333bec9428e8<span class="err">&lt;</span>/TOKEN_HASH&gt;
  <span class="nt">&lt;HASH&gt;</span>f56580e0932184a289934c34690a434a<span class="nt">&lt;/HASH&gt;</span>
<span class="nt">&lt;/EPAYMENT&gt;</span>
</code></pre>
<aside class="notice">
Oluşturulan token'ın geçerlilik süresi; kartın son kullanma tarihine eşittir.
</aside>

<p>API ile ödeme isteği oluşturulduğu sırada <code>&quot;LU_ENABLE_TOKEN&quot;</code> parametresini <code>&quot;1&quot;</code> veya <code>&quot;true&quot;</code> değeri ile gönderildiğinde işlem yanıtında ve IPN bildiriminde <code>&quot;TOKEN_HASH&quot;</code>&quot; parametresi içerisinde 
saklanmış kart token değeri yanıt olarak dönmektedir. Bu değeri kendi tarafınızda saklamalısınız.</p>
<h3 id='saklanmis-kart-ile-odeme-alma-token-ile-odeme-alma'>Saklanmış Kart ile Ödeme Alma(Token ile Ödeme Alma)</h3>
<blockquote>
<p>Saklanmış Kart ile Ödeme Alma</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="c"># Importing required libraries.</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlencode</span>
<span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>

<span class="c"># Endpoint</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">"https://secure.payu.com.tr/order/alu/v3"</span>

<span class="c"># PayU Merchant's Secret Key</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s">'SECRET_KEY'</span>

<span class="c"># Request @params Begin</span>
<span class="n">array</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c"># PayU Merchant's Merchant ID</span>
    <span class="s">'MERCHANT'</span><span class="p">:</span> <span class="s">"OPU_TEST"</span><span class="p">,</span>
    <span class="s">'LANGUAGE'</span><span class="p">:</span> <span class="s">"TR"</span><span class="p">,</span>
    <span class="s">'ORDER_DATE'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">Y-</span><span class="si">%</span><span class="s">m-</span><span class="si">%</span><span class="s">d </span><span class="si">%</span><span class="s">H:</span><span class="si">%</span><span class="s">M:</span><span class="si">%</span><span class="s">S'</span><span class="p">),</span>
    <span class="s">'PAY_METHOD'</span><span class="p">:</span> <span class="s">"CCVISAMC"</span><span class="p">,</span>
    <span class="s">'BACK_REF'</span><span class="p">:</span> <span class="s">"http://www.backref.com.tr"</span><span class="p">,</span>
    <span class="s">'PRICES_CURRENCY'</span><span class="p">:</span> <span class="s">"TRY"</span><span class="p">,</span>
    <span class="s">'SELECTED_INSTALLMENTS_NUMBER'</span><span class="p">:</span> <span class="s">"1"</span><span class="p">,</span>
    <span class="s">'ORDER_SHIPPING'</span><span class="p">:</span> <span class="s">"5"</span><span class="p">,</span>
    <span class="s">'CLIENT_IP'</span><span class="p">:</span> <span class="s">"127.0.0.1"</span><span class="p">,</span>
    <span class="s">'ORDER_PNAME[0]'</span><span class="p">:</span> <span class="s">"Test Ürünü"</span><span class="p">,</span>
    <span class="s">'ORDER_PCODE[0]'</span><span class="p">:</span> <span class="s">"Test Kodu"</span><span class="p">,</span>
    <span class="s">'ORDER_PINFO[0]'</span><span class="p">:</span> <span class="s">"Test Açıklaması"</span><span class="p">,</span>
    <span class="s">'ORDER_PRICE[0]'</span><span class="p">:</span> <span class="s">"5"</span><span class="p">,</span>
    <span class="s">'ORDER_VAT[0]'</span><span class="p">:</span> <span class="s">"18"</span><span class="p">,</span>
    <span class="s">'ORDER_PRICE_TYPE[0]'</span><span class="p">:</span> <span class="s">"NET"</span><span class="p">,</span>
    <span class="s">'ORDER_QTY[0]'</span><span class="p">:</span> <span class="s">"1"</span><span class="p">,</span>

    <span class="s">'CC_TOKEN'</span><span class="p">:</span> <span class="s">"1b88351b26f83e61361c333bec9428e8"</span><span class="p">,</span>
    <span class="s">'CC_NUMBER'</span><span class="p">:</span> <span class="s">""</span><span class="p">,</span>
    <span class="s">'EXP_MONTH'</span><span class="p">:</span> <span class="s">""</span><span class="p">,</span>
    <span class="s">'EXP_YEAR'</span><span class="p">:</span> <span class="s">""</span><span class="p">,</span>
    <span class="s">'CC_CVV'</span><span class="p">:</span> <span class="s">""</span><span class="p">,</span>
    <span class="s">'CC_OWNER'</span><span class="p">:</span> <span class="s">""</span><span class="p">,</span>

    <span class="s">'BILL_FNAME'</span><span class="p">:</span> <span class="s">"Ad"</span><span class="p">,</span>
    <span class="s">'BILL_LNAME'</span><span class="p">:</span> <span class="s">"Soyad"</span><span class="p">,</span>
    <span class="s">'BILL_EMAIL'</span><span class="p">:</span> <span class="s">"mail@mail.com"</span><span class="p">,</span>
    <span class="s">'BILL_PHONE'</span><span class="p">:</span> <span class="s">"02129003711"</span><span class="p">,</span>
    <span class="s">'BILL_FAX'</span><span class="p">:</span> <span class="s">"02129003711"</span><span class="p">,</span>
    <span class="s">'BILL_ADDRESS'</span><span class="p">:</span> <span class="s">"Birinci Adres satırı"</span><span class="p">,</span>
    <span class="s">'BILL_ADDRESS2'</span><span class="p">:</span> <span class="s">"İkinci Adres satırı"</span><span class="p">,</span>
    <span class="s">'BILL_ZIPCODE'</span><span class="p">:</span> <span class="s">"34000"</span><span class="p">,</span>
    <span class="s">'BILL_CITY'</span><span class="p">:</span> <span class="s">"ISTANBUL"</span><span class="p">,</span>
    <span class="s">'BILL_COUNTRYCODE'</span><span class="p">:</span> <span class="s">"TR"</span><span class="p">,</span>
    <span class="s">'BILL_STATE'</span><span class="p">:</span> <span class="s">"Ayazağa"</span><span class="p">,</span>
    <span class="s">'DELIVERY_FNAME'</span><span class="p">:</span> <span class="s">"Ad"</span><span class="p">,</span>
    <span class="s">'DELIVERY_LNAME'</span><span class="p">:</span> <span class="s">"Soyad"</span><span class="p">,</span>
    <span class="s">'DELIVERY_EMAIL'</span><span class="p">:</span> <span class="s">"mail@mail.com"</span><span class="p">,</span>
    <span class="s">'DELIVERY_PHONE'</span><span class="p">:</span> <span class="s">"02129003711"</span><span class="p">,</span>
    <span class="s">'DELIVERY_COMPANY'</span><span class="p">:</span> <span class="s">"PayU Ödeme Kuruluşu A.Ş."</span><span class="p">,</span>
    <span class="s">'DELIVERY_ADDRESS'</span><span class="p">:</span> <span class="s">"Birinci Adres satırı"</span><span class="p">,</span>
    <span class="s">'DELIVERY_ADDRESS2'</span><span class="p">:</span> <span class="s">"İkinci Adres satırı"</span><span class="p">,</span>
    <span class="s">'DELIVERY_ZIPCODE'</span><span class="p">:</span> <span class="s">"34000"</span><span class="p">,</span>
    <span class="s">'DELIVERY_CITY'</span><span class="p">:</span> <span class="s">"ISTANBUL"</span><span class="p">,</span>
    <span class="s">'DELIVERY_STATE'</span><span class="p">:</span> <span class="s">"TR"</span><span class="p">,</span>
    <span class="s">'DELIVERY_COUNTRYCODE'</span><span class="p">:</span> <span class="s">"Ayazağa"</span><span class="p">,</span>

<span class="p">}</span>
<span class="c"># Random number generation function for ORDER_REF @param</span>
<span class="n">refno</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100000</span><span class="p">))</span>

<span class="c"># Adding ORDER_REF @param to request array</span>
<span class="n">array</span><span class="p">[</span><span class="s">'ORDER_REF'</span><span class="p">]</span> <span class="o">=</span> <span class="n">refno</span>

<span class="c"># Initializing the hashstring @param</span>
<span class="n">hashstring</span> <span class="o">=</span> <span class="s">''</span>

<span class="c"># Sorting Array @params</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">array</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
<span class="c"># Adding the length of each field value at the beginning of field value</span>
    <span class="n">hashstring</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">hashstring</span><span class="p">)</span>

<span class="c"># Calculating ORDER_HASH</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashstring</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c"># Adding ORDER_HASH @param to request array</span>
<span class="n">array</span><span class="p">[</span><span class="s">'ORDER_HASH'</span><span class="p">]</span> <span class="o">=</span> <span class="n">signature</span>

<span class="k">print</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span>

<span class="c"># Sending Request to Endpoint</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">urlencode</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>

<span class="c"># Printing result/response</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://secure.payu.com.tr/order/alu/v3"</span><span class="p">;</span>
<span class="nb">date_default_timezone_set</span><span class="p">(</span><span class="s1">'UTC'</span><span class="p">);</span>

<span class="nv">$secretKey</span> <span class="o">=</span> <span class="s1">'SECRET_KEY'</span><span class="p">;</span>

<span class="nv">$arParams</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>

   <span class="s2">"MERCHANT"</span> <span class="o">=&gt;</span> <span class="s2">"OPU_TEST"</span><span class="p">,</span>
   <span class="s2">"LANGUAGE"</span> <span class="o">=&gt;</span> <span class="s2">"TR"</span><span class="p">,</span>
   <span class="s2">"ORDER_REF"</span> <span class="o">=&gt;</span>  <span class="nb">rand</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10000</span><span class="p">),</span>
   <span class="s2">"ORDER_DATE"</span> <span class="o">=&gt;</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'Y-m-d H:i:s'</span><span class="p">),</span>
   <span class="s2">"PAY_METHOD"</span> <span class="o">=&gt;</span> <span class="s2">"CCVISAMC"</span><span class="p">,</span>
   <span class="s2">"BACK_REF"</span> <span class="o">=&gt;</span> <span class="s2">"http://www.backref.com.tr"</span><span class="p">,</span>
   <span class="s2">"PRICES_CURRENCY"</span> <span class="o">=&gt;</span> <span class="s2">"TRY"</span><span class="p">,</span>
   <span class="s2">"SELECTED_INSTALLMENTS_NUMBER"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>
   <span class="s2">"ORDER_SHIPPING"</span><span class="o">=&gt;</span><span class="s2">"5"</span><span class="p">,</span>
   <span class="s2">"CLIENT_IP"</span> <span class="o">=&gt;</span> <span class="s2">"127.0.0.1"</span><span class="p">,</span>


   <span class="s2">"ORDER_PNAME[0]"</span> <span class="o">=&gt;</span> <span class="s2">"Test Ürünü"</span><span class="p">,</span>
   <span class="s2">"ORDER_PCODE[0]"</span> <span class="o">=&gt;</span> <span class="s2">"Test Kodu"</span><span class="p">,</span>
   <span class="s2">"ORDER_PINFO[0]"</span> <span class="o">=&gt;</span> <span class="s2">"Test Açıklaması"</span><span class="p">,</span>
   <span class="s2">"ORDER_PRICE[0]"</span> <span class="o">=&gt;</span> <span class="s2">"5"</span><span class="p">,</span>
   <span class="s2">"ORDER_VAT[0]"</span><span class="o">=&gt;</span><span class="s2">"18"</span><span class="p">,</span>
   <span class="s2">"ORDER_PRICE_TYPE[0]"</span><span class="o">=&gt;</span><span class="s2">"NET"</span><span class="p">,</span>
   <span class="s2">"ORDER_QTY[0]"</span> <span class="o">=&gt;</span> <span class="s2">"1"</span><span class="p">,</span>

   <span class="s2">"CC_TOKEN"</span> <span class="o">=&gt;</span> <span class="s2">"1b88351b26f83e61361c333bec9428e8"</span><span class="p">,</span>
   <span class="s2">"CC_NUMBER"</span> <span class="o">=&gt;</span> <span class="s2">""</span><span class="p">,</span>
   <span class="s2">"EXP_MONTH"</span> <span class="o">=&gt;</span> <span class="s2">""</span><span class="p">,</span>
   <span class="s2">"EXP_YEAR"</span> <span class="o">=&gt;</span> <span class="s2">""</span><span class="p">,</span>
   <span class="s2">"CC_CVV"</span> <span class="o">=&gt;</span> <span class="s2">""</span><span class="p">,</span>
   <span class="s2">"CC_OWNER"</span> <span class="o">=&gt;</span> <span class="s2">""</span><span class="p">,</span>

   <span class="s2">"BILL_FNAME"</span> <span class="o">=&gt;</span> <span class="s2">"Ad"</span><span class="p">,</span>
   <span class="s2">"BILL_LNAME"</span> <span class="o">=&gt;</span> <span class="s2">"Soyad"</span><span class="p">,</span>
   <span class="s2">"BILL_EMAIL"</span> <span class="o">=&gt;</span> <span class="s2">"mail@mail.com"</span><span class="p">,</span>
   <span class="s2">"BILL_PHONE"</span> <span class="o">=&gt;</span> <span class="s2">"02129003711"</span><span class="p">,</span>
   <span class="s2">"BILL_FAX"</span> <span class="o">=&gt;</span> <span class="s2">"02129003711"</span><span class="p">,</span>
   <span class="s2">"BILL_ADDRESS"</span> <span class="o">=&gt;</span> <span class="s2">"Birinci Adres satırı"</span><span class="p">,</span>
   <span class="s2">"BILL_ADDRESS2"</span> <span class="o">=&gt;</span> <span class="s2">"İkinci Adres satırı"</span><span class="p">,</span>
   <span class="s2">"BILL_ZIPCODE"</span> <span class="o">=&gt;</span> <span class="s2">"34000"</span><span class="p">,</span>
   <span class="s2">"BILL_CITY"</span> <span class="o">=&gt;</span> <span class="s2">"ISTANBUL"</span><span class="p">,</span>
   <span class="s2">"BILL_COUNTRYCODE"</span> <span class="o">=&gt;</span> <span class="s2">"TR"</span><span class="p">,</span>
   <span class="s2">"BILL_STATE"</span> <span class="o">=&gt;</span> <span class="s2">"Ayazağa"</span><span class="p">,</span>

   <span class="s2">"DELIVERY_FNAME"</span> <span class="o">=&gt;</span> <span class="s2">"Ad"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_LNAME"</span> <span class="o">=&gt;</span> <span class="s2">"Soyad"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_EMAIL"</span> <span class="o">=&gt;</span> <span class="s2">"mail@mail.com"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_PHONE"</span> <span class="o">=&gt;</span> <span class="s2">"02129003711"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_COMPANY"</span> <span class="o">=&gt;</span> <span class="s2">"PayU Ödeme Kuruluşu A.Ş."</span><span class="p">,</span>
   <span class="s2">"DELIVERY_ADDRESS"</span> <span class="o">=&gt;</span> <span class="s2">"Birinci Adres satırı"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_ADDRESS2"</span> <span class="o">=&gt;</span> <span class="s2">"İkinci Adres satırı"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_ZIPCODE"</span> <span class="o">=&gt;</span> <span class="s2">"34000"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_CITY"</span> <span class="o">=&gt;</span> <span class="s2">"ISTANBUL"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_STATE"</span> <span class="o">=&gt;</span> <span class="s2">"TR"</span><span class="p">,</span>
   <span class="s2">"DELIVERY_COUNTRYCODE"</span> <span class="o">=&gt;</span> <span class="s2">"Ayazağa"</span><span class="p">,</span>
<span class="p">);</span>

<span class="nb">ksort</span><span class="p">(</span><span class="nv">$arParams</span><span class="p">);</span>
<span class="nv">$hashString</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$arParams</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$val</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$hashString</span> <span class="o">.=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$val</span><span class="p">)</span> <span class="o">.</span> <span class="nv">$val</span><span class="p">;</span>
<span class="p">}</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nv">$arParams</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nv">$hashString</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>

<span class="nv">$arParams</span><span class="p">[</span><span class="s2">"ORDER_HASH"</span><span class="p">]</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s2">"md5"</span><span class="p">,</span> <span class="nv">$hashString</span><span class="p">,</span> <span class="nv">$secretKey</span><span class="p">);</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nv">$arParams</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYHOST</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_IPRESOLVE</span><span class="p">,</span> <span class="nx">CURL_IPRESOLVE_V4</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_TIMEOUT</span><span class="p">,</span> <span class="mi">60</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="nv">$arParams</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="nv">$curlerrcode</span> <span class="o">=</span> <span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$curlerr</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$curlerr</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$curlerrcode</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$parsedXML</span> <span class="o">=</span> <span class="o">@</span><span class="nb">simplexml_load_string</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$parsedXML</span> <span class="o">!==</span> <span class="k">FALSE</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
        <span class="nb">print_r</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
        <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>

        <span class="nv">$payuTranReference</span> <span class="o">=</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">REFNO</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">STATUS</span> <span class="o">==</span> <span class="s2">"SUCCESS"</span><span class="p">)</span> <span class="p">{</span>


            <span class="k">if</span> <span class="p">((</span><span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">RETURN_CODE</span> <span class="o">==</span> <span class="s2">"3DS_ENROLLED"</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">URL_3DS</span><span class="p">)))</span> <span class="p">{</span>
                <span class="nb">header</span><span class="p">(</span><span class="s2">"Location:"</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">URL_3DS</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s2">"SUCCES [PayU reference number: "</span> <span class="o">.</span> <span class="nv">$payuTranReference</span> <span class="o">.</span> <span class="s2">"]"</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">echo</span> <span class="s2">"Error: "</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">RETURN_MESSAGE</span> <span class="o">.</span> <span class="s2">" ["</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">RETURN_CODE</span> <span class="o">.</span> <span class="s2">"]"</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s2">"&lt;br&gt;"</span><span class="p">;</span>
            <span class="k">echo</span> <span class="s2">"Error Details: "</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">ERRORMESSAGE</span> <span class="o">.</span> <span class="s2">"&lt;br&gt; Error Code: ["</span> <span class="o">.</span> <span class="nv">$parsedXML</span><span class="o">-&gt;</span><span class="na">PROCRETURNCODE</span> <span class="o">.</span> <span class="s2">"]"</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$payuTranReference</span><span class="p">))</span> <span class="p">{</span>
                <span class="c1">//the transaction was register to PayU system, but some error occured during the bank authorization.
</span>                <span class="c1">//See $parsedXML-&gt;RETURN_MESSAGE and $parsedXML-&gt;RETURN_CODE for details
</span>                <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
                <span class="k">echo</span> <span class="s2">" [PayU reference number: "</span> <span class="o">.</span> <span class="nv">$payuTranReference</span> <span class="o">.</span> <span class="s2">"]"</span><span class="p">;</span>
                <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>

            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"cURL error: "</span> <span class="o">.</span> <span class="nv">$curlerr</span><span class="p">;</span>

<span class="p">}</span>
</code></pre>
<blockquote>
<p>Saklanmış Kart ile ödeme yanıt örneği</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="o">&lt;</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">REFNO</span><span class="o">&gt;</span><span class="mi">41615020</span><span class="o">&lt;/</span><span class="n">REFNO</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ALIAS</span><span class="o">&gt;</span><span class="n">d6bf5f305d8c2bfa983ef97a52ea9406</span><span class="o">&lt;/</span><span class="n">ALIAS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">STATUS</span><span class="o">&gt;</span><span class="n">SUCCESS</span><span class="o">&lt;/</span><span class="n">STATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span><span class="n">AUTHORIZED</span><span class="o">&lt;/</span><span class="n">RETURN_CODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span><span class="n">Authorized</span><span class="o">.&lt;/</span><span class="n">RETURN_MESSAGE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">DATE</span><span class="o">&gt;</span><span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">06</span> <span class="mi">21</span><span class="p">:</span><span class="mi">26</span><span class="p">:</span><span class="mi">31</span><span class="o">&lt;/</span><span class="n">DATE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">AMOUNT</span><span class="o">&gt;</span><span class="mf">10.9</span><span class="o">&lt;/</span><span class="n">AMOUNT</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CURRENCY</span><span class="o">&gt;</span><span class="n">TRY</span><span class="o">&lt;/</span><span class="n">CURRENCY</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">INSTALLMENTS_NO</span><span class="o">&gt;</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">INSTALLMENTS_NO</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CARD_PROGRAM_NAME</span><span class="o">&gt;</span><span class="n">AXESS</span><span class="o">&lt;/</span><span class="n">CARD_PROGRAM_NAME</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ORDER_REF</span><span class="o">&gt;</span><span class="mi">91968</span><span class="o">&lt;/</span><span class="n">ORDER_REF</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">AUTH_CODE</span><span class="o">&gt;</span><span class="mi">258228</span><span class="o">&lt;/</span><span class="n">AUTH_CODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RRN</span><span class="o">&gt;</span><span class="mi">727921202668</span><span class="o">&lt;/</span><span class="n">RRN</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ERRORMESSAGE</span><span class="o">&gt;</span><span class="n">Approved</span><span class="o">.&lt;/</span><span class="n">ERRORMESSAGE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">PROCRETURNCODE</span><span class="o">&gt;</span><span class="mo">00</span><span class="o">&lt;/</span><span class="n">PROCRETURNCODE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">BANK_MERCHANT_ID</span><span class="o">&gt;</span><span class="mi">100100000</span><span class="o">&lt;/</span><span class="n">BANK_MERCHANT_ID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">PAN</span><span class="o">&gt;</span><span class="mi">4355</span><span class="o">-</span><span class="n">xxxx</span><span class="o">-</span><span class="n">xxxx</span><span class="o">-</span><span class="mi">4358</span><span class="o">&lt;/</span><span class="n">PAN</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">EXPYEAR</span><span class="o">&gt;</span><span class="mi">18</span><span class="o">&lt;/</span><span class="n">EXPYEAR</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">EXPMONTH</span><span class="o">&gt;</span><span class="mi">12</span><span class="o">&lt;/</span><span class="n">EXPMONTH</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CLIENTID</span><span class="o">&gt;</span><span class="mi">100100000</span><span class="o">&lt;/</span><span class="n">CLIENTID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HOSTREFNUM</span><span class="o">&gt;</span><span class="mi">727921202668</span><span class="o">&lt;/</span><span class="n">HOSTREFNUM</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">OID</span><span class="o">&gt;</span><span class="mi">41615020</span><span class="o">&lt;/</span><span class="n">OID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">RESPONSE</span><span class="o">&gt;</span><span class="n">Approved</span><span class="o">&lt;/</span><span class="n">RESPONSE</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TERMINAL_BANK</span><span class="o">&gt;</span><span class="n">AKBA</span><span class="o">&lt;/</span><span class="n">TERMINAL_BANK</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">MDSTATUS</span><span class="o">&gt;&lt;/</span><span class="n">MDSTATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">MDERRORMSG</span><span class="o">&gt;&lt;/</span><span class="n">MDERRORMSG</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TXSTATUS</span><span class="o">&gt;&lt;/</span><span class="n">TXSTATUS</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">XID</span><span class="o">&gt;&lt;/</span><span class="n">XID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">ECI</span><span class="o">&gt;&lt;/</span><span class="n">ECI</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">CAVV</span><span class="o">&gt;&lt;/</span><span class="n">CAVV</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">TRANSID</span><span class="o">&gt;</span><span class="mi">17279</span><span class="n">VaaF14297</span><span class="o">&lt;/</span><span class="n">TRANSID</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">HASH</span><span class="o">&gt;</span><span class="n">bff08ad4736b4f1e57400fb860f5c422</span><span class="o">&lt;/</span><span class="n">HASH</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">EPAYMENT</span><span class="o">&gt;</span>
</code></pre><pre class="highlight php tab-php"><code><span class="nt">&lt;EPAYMENT&gt;</span>
  <span class="nt">&lt;REFNO&gt;</span>41615020<span class="nt">&lt;/REFNO&gt;</span>
  <span class="nt">&lt;ALIAS&gt;</span>d6bf5f305d8c2bfa983ef97a52ea9406<span class="nt">&lt;/ALIAS&gt;</span>
  <span class="nt">&lt;STATUS&gt;</span>SUCCESS<span class="nt">&lt;/STATUS&gt;</span>
  <span class="nt">&lt;RETURN</span><span class="na">_CODE</span><span class="nt">&gt;</span>AUTHORIZED<span class="err">&lt;</span>/RETURN_CODE&gt;
  <span class="nt">&lt;RETURN</span><span class="na">_MESSAGE</span><span class="nt">&gt;</span>Authorized.<span class="err">&lt;</span>/RETURN_MESSAGE&gt;
  <span class="nt">&lt;DATE&gt;</span>2017-10-06 21:26:31<span class="nt">&lt;/DATE&gt;</span>
  <span class="nt">&lt;AMOUNT&gt;</span>10.9<span class="nt">&lt;/AMOUNT&gt;</span>
  <span class="nt">&lt;CURRENCY&gt;</span>TRY<span class="nt">&lt;/CURRENCY&gt;</span>
  <span class="nt">&lt;INSTALLMENTS</span><span class="na">_NO</span><span class="nt">&gt;</span>1<span class="err">&lt;</span>/INSTALLMENTS_NO&gt;
  <span class="nt">&lt;CARD</span><span class="na">_PROGRAM_NAME</span><span class="nt">&gt;</span>AXESS<span class="err">&lt;</span>/CARD_PROGRAM_NAME&gt;
  <span class="nt">&lt;ORDER</span><span class="na">_REF</span><span class="nt">&gt;</span>91968<span class="err">&lt;</span>/ORDER_REF&gt;
  <span class="nt">&lt;AUTH</span><span class="na">_CODE</span><span class="nt">&gt;</span>258228<span class="err">&lt;</span>/AUTH_CODE&gt;
  <span class="nt">&lt;RRN&gt;</span>727921202668<span class="nt">&lt;/RRN&gt;</span>
  <span class="nt">&lt;ERRORMESSAGE&gt;</span>Approved.<span class="nt">&lt;/ERRORMESSAGE&gt;</span>
  <span class="nt">&lt;PROCRETURNCODE&gt;</span>00<span class="nt">&lt;/PROCRETURNCODE&gt;</span>
  <span class="nt">&lt;BANK</span><span class="na">_MERCHANT_ID</span><span class="nt">&gt;</span>100100000<span class="err">&lt;</span>/BANK_MERCHANT_ID&gt;
  <span class="nt">&lt;PAN&gt;</span>4355-xxxx-xxxx-4358<span class="nt">&lt;/PAN&gt;</span>
  <span class="nt">&lt;EXPYEAR&gt;</span>18<span class="nt">&lt;/EXPYEAR&gt;</span>
  <span class="nt">&lt;EXPMONTH&gt;</span>12<span class="nt">&lt;/EXPMONTH&gt;</span>
  <span class="nt">&lt;CLIENTID&gt;</span>100100000<span class="nt">&lt;/CLIENTID&gt;</span>
  <span class="nt">&lt;HOSTREFNUM&gt;</span>727921202668<span class="nt">&lt;/HOSTREFNUM&gt;</span>
  <span class="nt">&lt;OID&gt;</span>41615020<span class="nt">&lt;/OID&gt;</span>
  <span class="nt">&lt;RESPONSE&gt;</span>Approved<span class="nt">&lt;/RESPONSE&gt;</span>
  <span class="nt">&lt;TERMINAL</span><span class="na">_BANK</span><span class="nt">&gt;</span>AKBA<span class="err">&lt;</span>/TERMINAL_BANK&gt;
  <span class="nt">&lt;MDSTATUS&gt;&lt;/MDSTATUS&gt;</span>
  <span class="nt">&lt;MDERRORMSG&gt;&lt;/MDERRORMSG&gt;</span>
  <span class="nt">&lt;TXSTATUS&gt;&lt;/TXSTATUS&gt;</span>
  <span class="nt">&lt;XID&gt;&lt;/XID&gt;</span>
  <span class="nt">&lt;ECI&gt;&lt;/ECI&gt;</span>
  <span class="nt">&lt;CAVV&gt;&lt;/CAVV&gt;</span>
  <span class="nt">&lt;TRANSID&gt;</span>17279VaaF14297<span class="nt">&lt;/TRANSID&gt;</span>
  <span class="nt">&lt;HASH&gt;</span>bff08ad4736b4f1e57400fb860f5c422<span class="nt">&lt;/HASH&gt;</span>
<span class="nt">&lt;/EPAYMENT&gt;</span>
</code></pre>
<p>API ile ödeme isteği gönderildiği sırada kart parametreleri <code>CC_NUMBER,CC_CVV,CC_OWNER,EXP_MONTH,EXP_YEAR</code> aşağıda gösterildiği gibi boş gönderilmeli ve saklanmış kart değeri <code>CC_TOKEN</code> parametresine atanarak işlem isteği gönderilmelidir.</p>

<aside class="notice">
Eğer tek tıklama modeli ile çalışıyor ve güvenlik için CVV değerini tekrar kart hamiline girdiriyorsanız , CC_CVV parametresini CVV değeri ile gönderebilirsiniz. 
</aside>

<p><code>CC_TOKEN =&gt; &quot;4446c19bbed0abd515a509a3bdf959b5&quot;, </code> </br>
<code>CC_NUMBER =&gt; &quot;&quot;,</code> </br>
<code>EXP_MONTH =&gt; &quot;&quot;,</code> </br>
<code>EXP_YEAR =&gt; &quot;&quot;,</code> </br>
<code>CC_CVV =&gt; &quot;&quot;,</code> </br>
<code>CC_OWNER =&gt; &quot;&quot;, </code> </br> </p>
<h1 id='asenkron-bildirim-servisi-ipn'>Asenkron Bildirim Servisi(IPN)</h1><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nv">$postValues</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="k">foreach</span><span class="p">(</span><span class="nv">$_REQUEST</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">){</span>
    <span class="nv">$postValues</span> <span class="o">.=</span> <span class="nv">$key</span><span class="o">.</span><span class="s1">' = '</span><span class="o">.</span> <span class="nv">$value</span><span class="o">.</span> <span class="s2">"</span><span class="se">\r\n</span><span class="s2">"</span><span class="p">;</span>

<span class="p">}</span>


<span class="nb">ini_set</span><span class="p">(</span><span class="s2">"mbstring.func_overload"</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="nb">ini_get</span><span class="p">(</span><span class="s2">"mbstring.func_overload"</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">{</span>   <span class="cm">/* check if mbstring.func_overload is still set to overload strings(2)*/</span>
    <span class="k">echo</span> <span class="s2">"WARNING: mbstring.func_overload is set to overload strings and might cause problems</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* Internet Payment Notification */</span>

<span class="nv">$pass</span>       <span class="o">=</span> <span class="s2">"TEST_KEY"</span><span class="p">;</span>   <span class="cm">/* pass to compute HASH */</span>
<span class="nv">$result</span>     <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>               <span class="cm">/* string for compute HASH for received data */</span>
<span class="nv">$return</span>     <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>               <span class="cm">/* string to compute HASH for return result */</span>
<span class="nv">$signature</span>  <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s2">"HASH"</span><span class="p">];</span>   <span class="cm">/* HASH received */</span>
<span class="nv">$body</span>       <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>

<span class="cm">/* read info received */</span>
<span class="nb">ob_start</span><span class="p">();</span>
<span class="k">while</span><span class="p">(</span><span class="k">list</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$val</span><span class="p">)</span> <span class="o">=</span> <span class="nb">each</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">)){</span>
    <span class="nv">$$key</span><span class="o">=</span><span class="nv">$val</span><span class="p">;</span>

    <span class="cm">/* get values */</span>
    <span class="k">if</span><span class="p">(</span><span class="nv">$key</span> <span class="o">!=</span> <span class="s2">"HASH"</span><span class="p">){</span>

        <span class="k">if</span><span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$val</span><span class="p">))</span> <span class="nv">$result</span> <span class="o">.=</span> <span class="nx">ArrayExpand</span><span class="p">(</span><span class="nv">$val</span><span class="p">);</span>
        <span class="k">else</span><span class="p">{</span>
            <span class="nv">$size</span>       <span class="o">=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nx">StripSlashes</span><span class="p">(</span><span class="nv">$val</span><span class="p">));</span>
            <span class="nv">$result</span> <span class="o">.=</span> <span class="nv">$size</span><span class="o">.</span><span class="nx">StripSlashes</span><span class="p">(</span><span class="nv">$val</span><span class="p">);</span>
        <span class="p">}</span>

    <span class="p">}</span>

<span class="p">}</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="nb">ob_get_contents</span><span class="p">();</span>
<span class="nb">ob_end_flush</span><span class="p">();</span>

<span class="nv">$date_return</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s2">"YmdGis"</span><span class="p">);</span>

<span class="nv">$return</span> <span class="o">=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s2">"IPN_PID"</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="nv">$_POST</span><span class="p">[</span><span class="s2">"IPN_PID"</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s2">"IPN_PNAME"</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="nv">$_POST</span><span class="p">[</span><span class="s2">"IPN_PNAME"</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
<span class="nv">$return</span> <span class="o">.=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s2">"IPN_DATE"</span><span class="p">])</span><span class="o">.</span><span class="nv">$_POST</span><span class="p">[</span><span class="s2">"IPN_DATE"</span><span class="p">]</span><span class="o">.</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$date_return</span><span class="p">)</span><span class="o">.</span><span class="nv">$date_return</span><span class="p">;</span>

<span class="k">function</span> <span class="nf">ArrayExpand</span><span class="p">(</span><span class="nv">$array</span><span class="p">){</span>
    <span class="nv">$retval</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nb">sizeof</span><span class="p">(</span><span class="nv">$array</span><span class="p">);</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
        <span class="nv">$size</span>       <span class="o">=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nx">StripSlashes</span><span class="p">(</span><span class="nv">$array</span><span class="p">[</span><span class="nv">$i</span><span class="p">]));</span>
        <span class="nv">$retval</span> <span class="o">.=</span> <span class="nv">$size</span><span class="o">.</span><span class="nx">StripSlashes</span><span class="p">(</span><span class="nv">$array</span><span class="p">[</span><span class="nv">$i</span><span class="p">]);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$retval</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">hmac</span> <span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$data</span><span class="p">){</span>
    <span class="nv">$b</span> <span class="o">=</span> <span class="mi">64</span><span class="p">;</span> <span class="c1">// byte length for md5
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$key</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nv">$b</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$key</span> <span class="o">=</span> <span class="nb">pack</span><span class="p">(</span><span class="s2">"H*"</span><span class="p">,</span><span class="nb">md5</span><span class="p">(</span><span class="nv">$key</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="nv">$key</span>  <span class="o">=</span> <span class="nb">str_pad</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$b</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="mh">0x00</span><span class="p">));</span>
    <span class="nv">$ipad</span> <span class="o">=</span> <span class="nb">str_pad</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span> <span class="nv">$b</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="mh">0x36</span><span class="p">));</span>
    <span class="nv">$opad</span> <span class="o">=</span> <span class="nb">str_pad</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span> <span class="nv">$b</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="mh">0x5c</span><span class="p">));</span>
    <span class="nv">$k_ipad</span> <span class="o">=</span> <span class="nv">$key</span> <span class="o">^</span> <span class="nv">$ipad</span> <span class="p">;</span>
    <span class="nv">$k_opad</span> <span class="o">=</span> <span class="nv">$key</span> <span class="o">^</span> <span class="nv">$opad</span><span class="p">;</span>
    <span class="k">return</span> <span class="nb">md5</span><span class="p">(</span><span class="nv">$k_opad</span>  <span class="o">.</span> <span class="nb">pack</span><span class="p">(</span><span class="s2">"H*"</span><span class="p">,</span><span class="nb">md5</span><span class="p">(</span><span class="nv">$k_ipad</span> <span class="o">.</span> <span class="nv">$data</span><span class="p">)));</span>
<span class="p">}</span>

<span class="nv">$hash</span> <span class="o">=</span>  <span class="nx">hmac</span><span class="p">(</span><span class="nv">$pass</span><span class="p">,</span> <span class="nv">$result</span><span class="p">);</span> <span class="cm">/* HASH for data received */</span>

<span class="nv">$body</span> <span class="o">.=</span> <span class="nv">$result</span><span class="o">.</span><span class="s2">"</span><span class="se">\r\n\r\n</span><span class="s2">Hash: "</span><span class="o">.</span><span class="nv">$hash</span><span class="o">.</span><span class="s2">"</span><span class="se">\r\n\r\n</span><span class="s2">Signature: "</span><span class="o">.</span><span class="nv">$signature</span><span class="o">.</span><span class="s2">"</span><span class="se">\r\n\r\n</span><span class="s2">ReturnSTR: "</span><span class="o">.</span><span class="nv">$return</span><span class="p">;</span>

<span class="k">if</span><span class="p">(</span><span class="nv">$hash</span> <span class="o">==</span> <span class="nv">$signature</span><span class="p">){</span>
    <span class="k">echo</span> <span class="s2">"Verified OK!"</span><span class="p">;</span>

    <span class="cm">/* ePayment response */</span>
    <span class="nv">$result_hash</span> <span class="o">=</span>  <span class="nx">hmac</span><span class="p">(</span><span class="nv">$pass</span><span class="p">,</span> <span class="nv">$return</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;EPAYMENT&gt;"</span><span class="o">.</span><span class="nv">$date_return</span><span class="o">.</span><span class="s2">"|"</span><span class="o">.</span><span class="nv">$result_hash</span><span class="o">.</span><span class="s2">"&lt;/EPAYMENT&gt;"</span><span class="p">;</span>

    <span class="cm">/* Begin automated procedures (START YOUR CODE)*/</span>


<span class="p">}</span>

<span class="cp">?&gt;</span>
</code></pre>
<blockquote>
<p>Örnek IPN Bildirimi</p>
</blockquote>
<pre class="highlight python tab-python"><code>    <span class="p">[</span><span class="n">SALEDATE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span> <span class="mi">22</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">12</span>
    <span class="p">[</span><span class="n">PAYMENTDATE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span> <span class="mi">22</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">20</span>
    <span class="p">[</span><span class="n">REFNO</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">41666419</span>
    <span class="p">[</span><span class="n">REFNOEXT</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">4159</span>
    <span class="p">[</span><span class="n">ORDERNO</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">461</span>
    <span class="p">[</span><span class="n">ORDERSTATUS</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">PAYMENT_AUTHORIZED</span>
    <span class="p">[</span><span class="n">PAYMETHOD</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">CreditCard</span>
    <span class="p">[</span><span class="n">PAYMETHOD_CODE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">CCVISAMC</span>
    <span class="p">[</span><span class="n">FIRSTNAME</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Ad</span>
    <span class="p">[</span><span class="n">LASTNAME</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Soyad</span>
    <span class="p">[</span><span class="n">IDENTITY_NO</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="o">-</span>
    <span class="p">[</span><span class="n">IDENTITY_ISSUER</span><span class="p">]</span> <span class="o">=&gt;</span> 
    <span class="p">[</span><span class="n">CARD_TYPE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Visa</span>
    <span class="p">[</span><span class="n">IDENTITY_CNP</span><span class="p">]</span> <span class="o">=&gt;</span> 
    <span class="p">[</span><span class="n">COMPANY</span><span class="p">]</span> <span class="o">=&gt;</span> 
    <span class="p">[</span><span class="n">REGISTRATIONNUMBER</span><span class="p">]</span> <span class="o">=&gt;</span> 
    <span class="p">[</span><span class="n">FISCALCODE</span><span class="p">]</span> <span class="o">=&gt;</span> 
    <span class="p">[</span><span class="n">CBANKNAME</span><span class="p">]</span> <span class="o">=&gt;</span> 
    <span class="p">[</span><span class="n">CBANKACCOUNT</span><span class="p">]</span> <span class="o">=&gt;</span> 
    <span class="p">[</span><span class="n">ADDRESS1</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Birinci</span> <span class="n">Adres</span> <span class="n">sat</span><span class="err">ı</span><span class="n">r</span><span class="err">ı</span>
    <span class="p">[</span><span class="n">ADDRESS2</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="err">İ</span><span class="n">kinci</span> <span class="n">Adres</span> <span class="n">sat</span><span class="err">ı</span><span class="n">r</span><span class="err">ı</span>
    <span class="p">[</span><span class="n">CITY</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">ISTANBUL</span>
    <span class="p">[</span><span class="n">STATE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Ayaza</span><span class="err">ğ</span><span class="n">a</span>
    <span class="p">[</span><span class="n">ZIPCODE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">34000</span>
    <span class="p">[</span><span class="n">COUNTRY</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Turkey</span>
    <span class="p">[</span><span class="n">COUNTRY_CODE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">tr</span>
    <span class="p">[</span><span class="n">PHONE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mo">0212</span><span class="mi">9003711</span>
    <span class="p">[</span><span class="n">FAX</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mo">0212</span><span class="mi">9003711</span>
    <span class="p">[</span><span class="n">CUSTOMEREMAIL</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">mail</span><span class="nd">@mail.com</span>
    <span class="p">[</span><span class="n">FIRSTNAME_D</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Ad</span>
    <span class="p">[</span><span class="n">LASTNAME_D</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Soyad</span>
    <span class="p">[</span><span class="n">COMPANY_D</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">PayU</span> <span class="err">Ö</span><span class="n">deme</span> <span class="n">Kurulu</span><span class="err">ş</span><span class="n">u</span> <span class="n">A</span><span class="o">.</span><span class="err">Ş</span><span class="o">.</span>
    <span class="p">[</span><span class="n">ADDRESS1_D</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Birinci</span> <span class="n">Adres</span> <span class="n">sat</span><span class="err">ı</span><span class="n">r</span><span class="err">ı</span>
    <span class="p">[</span><span class="n">ADDRESS2_D</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="err">İ</span><span class="n">kinci</span> <span class="n">Adres</span> <span class="n">sat</span><span class="err">ı</span><span class="n">r</span><span class="err">ı</span>
    <span class="p">[</span><span class="n">CITY_D</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">ISTANBUL</span>
    <span class="p">[</span><span class="n">STATE_D</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">TR</span>
    <span class="p">[</span><span class="n">ZIPCODE_D</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">34000</span>
    <span class="p">[</span><span class="n">COUNTRY_D</span><span class="p">]</span> <span class="o">=&gt;</span> 
    <span class="p">[</span><span class="n">COUNTRY_D_CODE</span><span class="p">]</span> <span class="o">=&gt;</span> 
    <span class="p">[</span><span class="n">PHONE_D</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mo">0212</span><span class="mi">9003711</span>
    <span class="p">[</span><span class="n">EMAIL_D</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">mail</span><span class="nd">@mail.com</span>
    <span class="p">[</span><span class="n">IPADDRESS</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>
    <span class="p">[</span><span class="n">IPCOUNTRY</span><span class="p">]</span> <span class="o">=&gt;</span> 
    <span class="p">[</span><span class="n">COMPLETE_DATE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mo">0000</span><span class="o">-</span><span class="mo">00</span><span class="o">-</span><span class="mo">00</span> <span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span>
    <span class="p">[</span><span class="n">CURRENCY</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">TRY</span>
    <span class="p">[</span><span class="n">LANGUAGE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">tr</span>
    <span class="p">[</span><span class="n">IPN_PID</span><span class="p">[]]</span> <span class="o">=&gt;</span> <span class="n">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">52580647</span>
        <span class="p">)</span>

    <span class="p">[</span><span class="n">IPN_PNAME</span><span class="p">[]]</span> <span class="o">=&gt;</span> <span class="n">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Test</span> <span class="err">Ü</span><span class="n">r</span><span class="err">ü</span><span class="n">n</span><span class="err">ü</span>
        <span class="p">)</span>

    <span class="p">[</span><span class="n">IPN_PCODE</span><span class="p">[]]</span> <span class="o">=&gt;</span> <span class="n">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Test</span> <span class="n">Kodu</span>
        <span class="p">)</span>

    <span class="p">[</span><span class="n">IPN_INFO</span><span class="p">[]]</span> <span class="o">=&gt;</span> <span class="n">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Test</span> <span class="n">A</span><span class="err">çı</span><span class="n">klamas</span><span class="err">ı</span>
        <span class="p">)</span>

    <span class="p">[</span><span class="n">IPN_QTY</span><span class="p">[]]</span> <span class="o">=&gt;</span> <span class="n">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
        <span class="p">)</span>

    <span class="p">[</span><span class="n">IPN_PRICE</span><span class="p">[]]</span> <span class="o">=&gt;</span> <span class="n">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mf">5.00</span>
        <span class="p">)</span>

    <span class="p">[</span><span class="n">IPN_VAT</span><span class="p">[]]</span> <span class="o">=&gt;</span> <span class="n">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mf">0.90</span>
        <span class="p">)</span>

    <span class="p">[</span><span class="n">IPN_VER</span><span class="p">[]]</span> <span class="o">=&gt;</span> <span class="n">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> 
        <span class="p">)</span>

    <span class="p">[</span><span class="n">IPN_DISCOUNT</span><span class="p">[]]</span> <span class="o">=&gt;</span> <span class="n">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mf">0.00</span>
        <span class="p">)</span>

    <span class="p">[</span><span class="n">IPN_PROMONAME</span><span class="p">[]]</span> <span class="o">=&gt;</span> <span class="n">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> 
        <span class="p">)</span>

    <span class="p">[</span><span class="n">IPN_PROMOCODE</span><span class="p">[]]</span> <span class="o">=&gt;</span> <span class="n">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> 
        <span class="p">)</span>

    <span class="p">[</span><span class="n">IPN_ORDER_COSTS</span><span class="p">[]]</span> <span class="o">=&gt;</span> <span class="n">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">0</span>
        <span class="p">)</span>

    <span class="p">[</span><span class="n">IPN_DELIVEREDCODES</span><span class="p">[]]</span> <span class="o">=&gt;</span> <span class="n">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="mi">52580647</span><span class="p">]</span> <span class="o">=&gt;</span> 
        <span class="p">)</span>

    <span class="p">[</span><span class="n">IPN_DOWNLOAD_LINK</span><span class="p">]</span> <span class="o">=&gt;</span> 
    <span class="p">[</span><span class="n">IPN_TOTAL</span><span class="p">[]]</span> <span class="o">=&gt;</span> <span class="n">Array</span>
        <span class="p">(</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mf">5.90</span>
        <span class="p">)</span>

    <span class="p">[</span><span class="n">IPN_TOTALGENERAL</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mf">10.90</span>
    <span class="p">[</span><span class="n">IPN_SHIPPING</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mf">5.00</span>
    <span class="p">[</span><span class="n">IPN_COMMISSION</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mf">0.26</span>
    <span class="p">[</span><span class="n">IPN_DATE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">20171004224020</span>
    <span class="p">[</span><span class="n">IPN_PAID_AMOUNT</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mf">10.90</span>
    <span class="p">[</span><span class="n">IPN_INSTALLMENTS_PROGRAM</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Axess</span>
    <span class="p">[</span><span class="n">IPN_INSTALLMENTS_NUMBER</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">One</span> <span class="n">time</span> <span class="n">payment</span>
    <span class="p">[</span><span class="n">IPN_INSTALLMENTS_PROFIT</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mf">0.00</span>
    <span class="p">[</span><span class="n">AUTH_CODE</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">380978</span>
    <span class="p">[</span><span class="n">BANK_MERCHANT_ID</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">100100000</span>
    <span class="p">[</span><span class="n">BANK_RRN</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">727722200216</span>
    <span class="p">[</span><span class="n">CARD_BIN</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">435508</span>
    <span class="p">[</span><span class="n">CARD_HOLDER_NAME</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">Ad</span> <span class="n">Soyad</span>
    <span class="p">[</span><span class="n">CARD_MASK</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">4355</span><span class="o">-</span><span class="n">xxxx</span><span class="o">-</span><span class="n">xxxx</span><span class="o">-</span><span class="mi">4358</span>
    <span class="p">[</span><span class="n">ISSUING_BANK</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">AKBA</span>
    <span class="p">[</span><span class="n">NUMBER_OF_INSTALLMENTS</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">0</span>
    <span class="p">[</span><span class="n">TERMINAL_BANK</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">AKBA</span>
    <span class="p">[</span><span class="n">HASH</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="n">d7e0e21f9a890a5bfcaa2cda50ece7bf</span>
</code></pre><pre class="highlight php tab-php"><code>    [SALEDATE] =&gt; 2017-10-04 22:40:12
    [PAYMENTDATE] =&gt; 2017-10-04 22:40:20
    [REFNO] =&gt; 41666419
    [REFNOEXT] =&gt; 4159
    [ORDERNO] =&gt; 461
    [ORDERSTATUS] =&gt; PAYMENT_AUTHORIZED
    [PAYMETHOD] =&gt; CreditCard
    [PAYMETHOD_CODE] =&gt; CCVISAMC
    [FIRSTNAME] =&gt; Ad
    [LASTNAME] =&gt; Soyad
    [IDENTITY_NO] =&gt; -
    [IDENTITY_ISSUER] =&gt; 
    [CARD_TYPE] =&gt; Visa
    [IDENTITY_CNP] =&gt; 
    [COMPANY] =&gt; 
    [REGISTRATIONNUMBER] =&gt; 
    [FISCALCODE] =&gt; 
    [CBANKNAME] =&gt; 
    [CBANKACCOUNT] =&gt; 
    [ADDRESS1] =&gt; Birinci Adres satırı
    [ADDRESS2] =&gt; İkinci Adres satırı
    [CITY] =&gt; ISTANBUL
    [STATE] =&gt; Ayazağa
    [ZIPCODE] =&gt; 34000
    [COUNTRY] =&gt; Turkey
    [COUNTRY_CODE] =&gt; tr
    [PHONE] =&gt; 02129003711
    [FAX] =&gt; 02129003711
    [CUSTOMEREMAIL] =&gt; mail@mail.com
    [FIRSTNAME_D] =&gt; Ad
    [LASTNAME_D] =&gt; Soyad
    [COMPANY_D] =&gt; PayU Ödeme Kuruluşu A.Ş.
    [ADDRESS1_D] =&gt; Birinci Adres satırı
    [ADDRESS2_D] =&gt; İkinci Adres satırı
    [CITY_D] =&gt; ISTANBUL
    [STATE_D] =&gt; TR
    [ZIPCODE_D] =&gt; 34000
    [COUNTRY_D] =&gt; 
    [COUNTRY_D_CODE] =&gt; 
    [PHONE_D] =&gt; 02129003711
    [EMAIL_D] =&gt; mail@mail.com
    [IPADDRESS] =&gt; 127.0.0.1
    [IPCOUNTRY] =&gt; 
    [COMPLETE_DATE] =&gt; 0000-00-00 00:00:00
    [CURRENCY] =&gt; TRY
    [LANGUAGE] =&gt; tr
    [IPN_PID[]] =&gt; Array
        (
            [0] =&gt; 52580647
        )

    [IPN_PNAME[]] =&gt; Array
        (
            [0] =&gt; Test Ürünü
        )

    [IPN_PCODE[]] =&gt; Array
        (
            [0] =&gt; Test Kodu
        )

    [IPN_INFO[]] =&gt; Array
        (
            [0] =&gt; Test Açıklaması
        )

    [IPN_QTY[]] =&gt; Array
        (
            [0] =&gt; 1
        )

    [IPN_PRICE[]] =&gt; Array
        (
            [0] =&gt; 5.00
        )

    [IPN_VAT[]] =&gt; Array
        (
            [0] =&gt; 0.90
        )

    [IPN_VER[]] =&gt; Array
        (
            [0] =&gt; 
        )

    [IPN_DISCOUNT[]] =&gt; Array
        (
            [0] =&gt; 0.00
        )

    [IPN_PROMONAME[]] =&gt; Array
        (
            [0] =&gt; 
        )

    [IPN_PROMOCODE[]] =&gt; Array
        (
            [0] =&gt; 
        )

    [IPN_ORDER_COSTS[]] =&gt; Array
        (
            [0] =&gt; 0
        )

    [IPN_DELIVEREDCODES[]] =&gt; Array
        (
            [52580647] =&gt; 
        )

    [IPN_DOWNLOAD_LINK] =&gt; 
    [IPN_TOTAL[]] =&gt; Array
        (
            [0] =&gt; 5.90
        )

    [IPN_TOTALGENERAL] =&gt; 10.90
    [IPN_SHIPPING] =&gt; 5.00
    [IPN_COMMISSION] =&gt; 0.26
    [IPN_DATE] =&gt; 20171004224020
    [IPN_PAID_AMOUNT] =&gt; 10.90
    [IPN_INSTALLMENTS_PROGRAM] =&gt; Axess
    [IPN_INSTALLMENTS_NUMBER] =&gt; One time payment
    [IPN_INSTALLMENTS_PROFIT] =&gt; 0.00
    [AUTH_CODE] =&gt; 380978
    [BANK_MERCHANT_ID] =&gt; 100100000
    [BANK_RRN] =&gt; 727722200216
    [CARD_BIN] =&gt; 435508
    [CARD_HOLDER_NAME] =&gt; Ad Soyad
    [CARD_MASK] =&gt; 4355-xxxx-xxxx-4358
    [ISSUING_BANK] =&gt; AKBA
    [NUMBER_OF_INSTALLMENTS] =&gt; 0
    [TERMINAL_BANK] =&gt; AKBA
    [HASH] =&gt; d7e0e21f9a890a5bfcaa2cda50ece7bf
</code></pre>
<p>PayU sisteminden herhangi bir başarılı sipariş gerçekleştiğinde, eğer IPN servisi kurulumu yapılmış ise, sistem sizin tarafınızdan belirlenen URL’ye siparişe ait detayları içeren bir bildirim gönderecektir. Bu bildirim HTTP POST metodu ile gönderilir</p>

<aside class="notice">
Hash alanları büyük küçük harf duyarlıdır.
</aside>

<aside class="notice">
Zaman fonksiyonlarının kullanımı [YmdGis] (Y-year-4 digits, m-month-2 digits, d-day-2 digits, G-hour-2 digits, i-minutes-2 digits, s-seconds-2 digits) formatında olmalıdır.
</aside>

<aside class="notice">
Bildirimin ulaştığını <EPAYMENT> tagleri ile yanıt dönerek onaylayana kadar belirli aralıklar ile tekrar gönderilecektir.
</aside>

<table><thead>
<tr>
<th>Parametre</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>SALEDATE</td>
<td>Satış işleminin başlangıçının iletildiği parametredir</td>
</tr>
<tr>
<td>PAYMENTDATE</td>
<td>Satış zamanının iletildiği parametredir</td>
</tr>
<tr>
<td>REFNO</td>
<td>PayU referans numarasının iletildiği parametredir.</td>
</tr>
<tr>
<td>REFNOEXT</td>
<td>Üye iş yeri sipariş numarasının iletildiği parametredir.</td>
</tr>
<tr>
<td>ORDERNO</td>
<td>PayU tarafındaki sipariş sıra numarasının iletildiği parametredir.</td>
</tr>
<tr>
<td>ORDERSTATUS</td>
<td>Sipariş durumunun iletildiği parametredir. <code> <strong>PAYMENT_AUTHORIZED</strong> – Otorizasyon alındığını ileten durum mesajıdır. <strong>PAYMENT_RECEIVED</strong> – Wire ödeme alındığını ileten durum mesajıdır. <strong>COMPLETE</strong> – Tamamlanmış işlemlerde iletilen durum mesajıdır. </code></td>
</tr>
<tr>
<td>PAYMETHOD</td>
<td>Maksimum 40 karakter ile ödeme yönteminin iletildiği parametredir.</td>
</tr>
<tr>
<td>PAYMETHOD_CODE</td>
<td>Ödeme yöntemi kodunun iletildiği parametredir.</td>
</tr>
<tr>
<td>FIRSTNAME</td>
<td>Fatura Ad bilgisinin iletildiği parametredir (Maksimum 40 Karakter)</td>
</tr>
<tr>
<td>LASTNAME</td>
<td>Fatura Soyad bilgisinin iletildiği parametredir (Maksimum 40 Karakter)</td>
</tr>
<tr>
<td>IDENTITY_NO</td>
<td>Vatandaşlık / Vergi bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>IDENTITY_ISSUER</td>
<td>Vatandaşlık/Vergi belge sağlayıcısının tipinin iletildiği parametredir.</td>
</tr>
<tr>
<td>CARD_TYPE</td>
<td>Kart Tipinin iletildiği parametredir.</td>
</tr>
<tr>
<td>IDENTITY_CNP</td>
<td>Vatandaşlık/Vergi belgesinin tipinin iletildiği parametredir.</td>
</tr>
<tr>
<td>COMPANY</td>
<td>Fatura Firma bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>REGISTRATIONNUMBER</td>
<td>Vergi numarasının iletildiği parametredir.</td>
</tr>
<tr>
<td>FISCALCODE</td>
<td>Mali Kodun iletildiği parametredir</td>
</tr>
<tr>
<td>CBANKNAME</td>
<td>Banka isminin iletildiği parametredir.</td>
</tr>
<tr>
<td>CBANKACCOUNT</td>
<td>Banka hesap bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>ADDRESS1</td>
<td>Fatura Adres Bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>ADDRESS2</td>
<td>Adres Bilgisinin ikinci satırnının iletildiği parametredir.</td>
</tr>
<tr>
<td>CITY</td>
<td>İl bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>STATE</td>
<td>İlçe/Semt bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>ZIPCODE</td>
<td>Posta kodunun iletildiği parametredir.</td>
</tr>
<tr>
<td>COUNTRY</td>
<td>Ülke bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>COUNTRY_CODE</td>
<td>Ülke kodunun iletildiği parametredir.</td>
</tr>
<tr>
<td>PHONE</td>
<td>Telefon numarasının iletildiği parametredir.</td>
</tr>
<tr>
<td>FAX</td>
<td>Fax numarasının iletildiği parametredir.</td>
</tr>
<tr>
<td>CUSTOMEREMAIL</td>
<td>Mail bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>FIRSTNAME_D</td>
<td>Teslimat Ad bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>LASTNAME_D</td>
<td>Teslimat Soyad bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>COMPANY_D</td>
<td>Teslimat Firma bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>ADDRESS1_D</td>
<td>Teslimat Adres bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>ADDRESS2_D</td>
<td>Teslimat Adres bilgisinin ikinci satırının iletildiği parametredir.</td>
</tr>
<tr>
<td>CITY_D</td>
<td>Teslimat Şehir bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>STATE_D</td>
<td>Teslimat İlçe/Semt bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>ZIPCODE_D</td>
<td>Teslimat Posta kodu bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>COUNTRY_D</td>
<td>Teslimat Ülke bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>COUNTRY_D_CODE</td>
<td>Teslimat Ülke kodunun iletildiği parametredir.</td>
</tr>
<tr>
<td>PHONE_D</td>
<td>Teslimat Telefon numara bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>EMAIL_D</td>
<td>Teslimat Mail bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>IPADDRESS</td>
<td>Kullanıcı IP adresinin iletildiği parametredir.</td>
</tr>
<tr>
<td>IPCOUNTRY</td>
<td>Kullanıcı IP adresinin ülke bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>COMPLETE_DATE</td>
<td>Sipariş tamamlanma zamanının bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>CURRENCY</td>
<td>Para birimin iletildiği parametredir.</td>
</tr>
<tr>
<td>LANGUAGE</td>
<td>İşlem dilinin iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_PID</td>
<td>Ürün ID&#39;sinin iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_PNAME</td>
<td>Ürün isminin iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_PCODE</td>
<td>Ürün kodunun iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_INFO</td>
<td>Ürün açıklamasının iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_QTY</td>
<td>Ürün adedinin iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_PRICE</td>
<td>Ürün adet fiyatının iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_VAT</td>
<td>Ürün vergi fiyatının iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_VER</td>
<td>Ürün versiyon bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_DISCOUNT</td>
<td>Toplam indirim tutarının iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_PROMONAME</td>
<td>Promosyon isminin iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_PROMOCODE</td>
<td>Promosyon kodunun iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_ORDER_COSTS</td>
<td>Sipariş masraflarının iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_DELIVEREDCODES</td>
<td>Teslimat kodlarının iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_DOWNLOAD_LINK</td>
<td>Sanal ürün indirme linkinin iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_TOTAL</td>
<td>Ara toplam ücretinin iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_TOTALGENERAL</td>
<td>Toplam ücretin iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_SHIPPING</td>
<td>Kargo ücretinin iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_COMMISSION</td>
<td>Komisyon ücretinin iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_DATE</td>
<td>IPN teslimat zaman bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_PAID_AMOUNT</td>
<td>Ödenmiş tutar bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_INSTALLMENTS_PROGRAM</td>
<td>Kart program bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_INSTALLMENTS_NUMBER</td>
<td>Taksit bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>IPN_INSTALLMENTS_PROFIT</td>
<td>Taksit komisyon ücret bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>AUTH_CODE</td>
<td>Otorizasyon kodunun iletildiği parametredir.</td>
</tr>
<tr>
<td>BANK_MERCHANT_ID</td>
<td>İşlemin gerçekleştiği sanal pos ID&#39;sinin iletildiği parametredir.</td>
</tr>
<tr>
<td>BANK_RRN</td>
<td>İade işlem numarasının iletildiği parametredir.</td>
</tr>
<tr>
<td>CARD_BIN</td>
<td>İşlemde kullanılan kart BIN bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>CARD_HOLDER_NAME</td>
<td>Kart sahibinin Ad Soyad bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>CARD_MASK</td>
<td>Kartın maskeli halinin iletildiği parametredir.</td>
</tr>
<tr>
<td>ISSUING_BANK</td>
<td>Kart bankasının iletildiği parametredir.</td>
</tr>
<tr>
<td>NUMBER_OF_INSTALLMENTS</td>
<td>Taksit bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>TERMINAL_BANK</td>
<td>İşlemin gerçekleştiği banka posunun iletildiği parametredir.</td>
</tr>
<tr>
<td>HASH</td>
<td>PayU tarafından gönderilen salt IPN bildirimi için hesaplanan Hash bilgisidir.</td>
</tr>
</tbody></table>
<h2 id='ipn-hash-hesaplama'>IPN Hash Hesaplama</h2>
<aside class="notice">
PayU IPN bildiriminin iletildiğini onaylamak için EPAYMENT tagleri aşağıda ki gibi bir yanıt bekler.
</aside>

<aside class="notice">
Hash hesaplamada kullanılan değerler örnek IPN bildirimindeki değerlerdir
</aside>

<aside class="notice">
Parametre değerlerinin uzunluğu UTF-8 byte olarak alınmalıdır.
</aside>

<p><code>&lt;EPAYMENT&gt;DATE|HASH&lt;/EPAYMENT&gt;</code></p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>DATE</td>
<td>Bu parametre kullanılarak bildirim zamanını (YmdGis) (Y-year-4 digits, m-month-2 digits, d-day-2 digits, G-hour-2 digits, i-minutes-2 digits, s-seconds-2 digits) formatında iletilmeli.</td>
</tr>
<tr>
<td>HASH</td>
<td>Bu parametre bildirim sırasında alınan <code>IPN_PID[], IPN_PNAME[], IPN_DATE,DATE</code> parametreleri ile dizi oluşturulup, başlarına UTF-8 Bayt olarak uzunluğu eklendikten sonra üye işyeri kodlama anahtarınız kullanılarak HMAC_MD5 algoritması ile elde edilen Hash değeridir.</td>
</tr>
</tbody></table>

<p><strong>Örnek IPN bildirimindeki HASH hesaplama için kullanılacak değerler aşağıdaki gibidir.</strong>
<code>IPN_PID[] = 52580647</code>
<code>IPN_PNAME[] = Test Ürünü</code>
<code>IPN_DATE = 20171004224020</code>
<code>DATE= 20171004224020</code></p>

<p><strong>Bu değerlerin uzunluğu alınarak Key&#39;e göre sıralanmalıdır.</strong>
<code>()IPN_PID()IPN_PNAME()IPN_DATE()DATE</code>
<code>85258064713Test Ürünü14201710042240201420171004224017</code></p>

<p><strong>Değerler üye işyeri kodlama anahtarınız kullanılarak HMAC_MD5 algoritması ile haslenmelidir.</strong></p>

<ul>
<li>Kullanılan Kodlama Anahtarı: SECRET_KEY</li>
</ul>

<p><strong>Elde edilen değer:</strong> <code>79db0725ecdc57decf9982b3917b3ff4</code></p>
<h2 id='bildirime-yanit-verme'>Bildirime Yanıt Verme</h2>
<p>Elde edilen değer ve DATE değeri EPAYMENT Taglerinin arasına <code>&lt;EPAYMENT&gt;DATE|HASH&lt;/EPAYMENT&gt;</code> formatına eklenerek HTTP POST alındığı sırada yanıt dönülmelidir.
<code>&lt;EPAYMENT&gt;20171004224017|79db0725ecdc57decf9982b3917b3ff4&lt;/EPAYMENT&gt;</code></p>
<h1 id='islem-sorgu-servisi-ios'>İşlem Sorgu Servisi(IOS)</h1><h3 id='ios-sorgusu-istek-parametreleri'>IOS Sorgusu İstek Parametreleri</h3>
<blockquote>
<p>IOS Sorgu Örneği</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span> 
<span class="k">function</span> <span class="nf">hmac</span> <span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$data</span><span class="p">){</span>
   <span class="nv">$b</span> <span class="o">=</span> <span class="mi">64</span><span class="p">;</span> <span class="c1">// byte length for md5
</span>   <span class="k">if</span> <span class="p">(</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$key</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nv">$b</span><span class="p">)</span> <span class="p">{</span>
       <span class="nv">$key</span> <span class="o">=</span> <span class="nb">pack</span><span class="p">(</span><span class="s2">"H*"</span><span class="p">,</span><span class="nb">md5</span><span class="p">(</span><span class="nv">$key</span><span class="p">));</span>
   <span class="p">}</span>
   <span class="nv">$key</span>  <span class="o">=</span> <span class="nb">str_pad</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$b</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="mh">0x00</span><span class="p">));</span>
   <span class="nv">$ipad</span> <span class="o">=</span> <span class="nb">str_pad</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span> <span class="nv">$b</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="mh">0x36</span><span class="p">));</span>
   <span class="nv">$opad</span> <span class="o">=</span> <span class="nb">str_pad</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span> <span class="nv">$b</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="mh">0x5c</span><span class="p">));</span>
   <span class="nv">$k_ipad</span> <span class="o">=</span> <span class="nv">$key</span> <span class="o">^</span> <span class="nv">$ipad</span> <span class="p">;</span>
   <span class="nv">$k_opad</span> <span class="o">=</span> <span class="nv">$key</span> <span class="o">^</span> <span class="nv">$opad</span><span class="p">;</span>
   <span class="k">return</span> <span class="nb">md5</span><span class="p">(</span><span class="nv">$k_opad</span>  <span class="o">.</span> <span class="nb">pack</span><span class="p">(</span><span class="s2">"H*"</span><span class="p">,</span><span class="nb">md5</span><span class="p">(</span><span class="nv">$k_ipad</span> <span class="o">.</span> <span class="nv">$data</span><span class="p">)));</span>
<span class="p">}</span>
    <span class="nv">$url</span><span class="o">=</span><span class="s2">"https://secure.payu.com.tr/order/ios.php"</span><span class="p">;</span>
    <span class="nv">$merchant</span><span class="o">=</span><span class="s2">"OPU_TEST"</span><span class="p">;</span>
    <span class="nv">$secret</span><span class="o">=</span><span class="s2">"SECRET_KEY"</span><span class="p">;</span>
    <span class="nv">$refno</span><span class="o">=</span><span class="s2">"7304"</span><span class="p">;</span>


     <span class="nv">$hash_string</span> <span class="o">=</span> <span class="nb">strlen</span><span class="p">(</span><span class="s2">"</span><span class="nv">$merchant</span><span class="s2">"</span><span class="p">)</span><span class="o">.</span><span class="nv">$merchant</span><span class="p">;</span>
     <span class="nv">$hash_string</span><span class="o">.=</span> <span class="nb">strlen</span><span class="p">(</span><span class="s2">"</span><span class="nv">$refno</span><span class="s2">"</span><span class="p">)</span><span class="o">.</span><span class="nv">$refno</span><span class="p">;</span>


  <span class="nv">$hash</span><span class="o">=</span><span class="nx">hmac</span><span class="p">(</span><span class="nv">$secret</span><span class="p">,</span><span class="nv">$hash_string</span><span class="p">);</span>


    <span class="nv">$request_string</span>  <span class="o">=</span> <span class="s2">"MERCHANT=</span><span class="nv">$merchant</span><span class="s2">&amp;"</span><span class="p">;</span>
    <span class="nv">$request_string</span> <span class="o">.=</span> <span class="s2">"SECRET_KEY=</span><span class="nv">$secret</span><span class="s2">&amp;"</span><span class="p">;</span> 
    <span class="nv">$request_string</span> <span class="o">.=</span> <span class="s2">"REFNOEXT=</span><span class="nv">$refno</span><span class="s2">&amp;"</span><span class="p">;</span>  
    <span class="nv">$request_string</span> <span class="o">.=</span> <span class="s2">"HASH=</span><span class="nv">$hash</span><span class="s2">"</span><span class="p">;</span> 

    <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_TIMEOUT</span><span class="p">,</span> <span class="mi">60</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$request_string</span><span class="p">);</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

    <span class="k">echo</span> <span class="s2">"&lt;f color=red&gt;RESULT:"</span><span class="o">.</span><span class="nv">$response</span><span class="o">.</span><span class="s2">"&lt;/f&gt;"</span><span class="p">;</span>


<span class="cp">?&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="c"># Importing required libraries.</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlencode</span>
<span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>

<span class="c">#Endpoint</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://secure.payu.com.tr/order/ios.php'</span>

<span class="c">#Secret Key</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s">'SECRET_KEY'</span>

<span class="n">array</span> <span class="o">=</span> <span class="p">{</span>
<span class="s">'MERCHANT'</span><span class="p">:</span> <span class="s">'OPU_TEST'</span><span class="p">,</span>
<span class="s">'REFNOEXT'</span><span class="p">:</span> <span class="s">'7304'</span><span class="p">,</span>
<span class="p">}</span>
<span class="c"># Initializing the hashstring @param</span>
<span class="n">hashstring</span> <span class="o">=</span> <span class="s">''</span>

<span class="c"># Sorting Array @params</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">array</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>

<span class="c"># Adding the length of each field value at the beginning of field value</span>
    <span class="n">hashstring</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">hashstring</span><span class="p">)</span>

<span class="c"># Calculating ORDER_HASH</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashstring</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c"># Adding ORDER_HASH @param to request array</span>
<span class="n">array</span><span class="p">[</span><span class="s">'HASH'</span><span class="p">]</span> <span class="o">=</span> <span class="n">signature</span>

<span class="k">print</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span>

<span class="c"># Sending Request to Endpoint</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">urlencode</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>

<span class="c"># Printing result/response</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre>
<p>IOS servisi ile, siparişlerin PayU tarafında ki durumlarını API aracılığı ile anlık olarak sorgulayabilirsiniz.</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>MERCHANT</td>
<td>Üye işyeri entegrasyon ismi bilgisidir.</td>
</tr>
<tr>
<td>REFNOEXT</td>
<td>Satış sırasında ORDER_REF olarak belirtilen üye işyerine ait sipariş numarasının değeridir.</td>
</tr>
<tr>
<td>HASH</td>
<td>Sorgu sırasında gönderilen değerlerin Key&#39;e göre sıralanıp, başlarına uzunlukları eklendikten sonra HMAC_MD5 algoritması ile hash oluşturulan değerdir.</td>
</tr>
</tbody></table>

<blockquote>
<p>Örnek IOS Sorgu Cevabı</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="nt">&lt;Order&gt;</span>
    <span class="nt">&lt;ORDER</span><span class="na">_DATE</span><span class="nt">&gt;</span>2017-03-08 18:33:47<span class="err">&lt;</span>/ORDER_DATE&gt;
    <span class="nt">&lt;REFNO&gt;</span>28179507<span class="nt">&lt;/REFNO&gt;</span>
    <span class="nt">&lt;REFNOEXT&gt;</span>7304<span class="nt">&lt;/REFNOEXT&gt;</span>
    <span class="nt">&lt;ORDER</span><span class="na">_STATUS</span><span class="nt">&gt;</span>COMPLETE<span class="err">&lt;</span>/ORDER_STATUS&gt;
    <span class="nt">&lt;PAYMETHOD&gt;</span>CreditCard<span class="nt">&lt;/PAYMETHOD&gt;</span>
    <span class="nt">&lt;HASH&gt;</span>30670ee9e64a8b6658fd2c752f79be37<span class="nt">&lt;/HASH&gt;</span>
<span class="nt">&lt;/Order&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="o">&lt;</span><span class="n">Order</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">ORDER_DATE</span><span class="o">&gt;</span><span class="mi">2017</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">08</span> <span class="mi">18</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">47</span><span class="o">&lt;/</span><span class="n">ORDER_DATE</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">REFNO</span><span class="o">&gt;</span><span class="mi">28179507</span><span class="o">&lt;/</span><span class="n">REFNO</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">REFNOEXT</span><span class="o">&gt;</span><span class="mi">7304</span><span class="o">&lt;/</span><span class="n">REFNOEXT</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">ORDER_STATUS</span><span class="o">&gt;</span><span class="n">COMPLETE</span><span class="o">&lt;/</span><span class="n">ORDER_STATUS</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">PAYMETHOD</span><span class="o">&gt;</span><span class="n">CreditCard</span><span class="o">&lt;/</span><span class="n">PAYMETHOD</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">HASH</span><span class="o">&gt;</span><span class="mi">30670</span><span class="n">ee9e64a8b6658fd2c752f79be37</span><span class="o">&lt;/</span><span class="n">HASH</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">Order</span><span class="o">&gt;</span>
</code></pre><h3 id='ios-sorgusu-yanit-parametreleri'>IOS Sorgusu Yanıt Parametreleri</h3>
<p>PayU sistemi, yapılan isteğe XML formatında bir yanıt dönmektedir. 
İşyeri XML formatındaki bu datayı ayrıştırıp kendi sisteminde işlemelidir.</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>ORDER_DATE</td>
<td>İşlem yapılan zaman bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>REFNO</td>
<td>İşlemin PayU referans numarasının iletildiği parametredir.</td>
</tr>
<tr>
<td>REFNOEXT</td>
<td>İşyerinin kendi belirlediği sipariş/işlem numarasınnın iletildiği parametredir.</td>
</tr>
<tr>
<td>PAYMETHOD</td>
<td>İşleminde kullanılan ödeme yönteminin iletildiği parametredir.</td>
</tr>
<tr>
<td>ORDER_STATUS</td>
<td>Siparişin anlık durumunun iletildiği parametredir. Dönen değerler dokümanın aşağısında detaylı olarak iletilmiştir.</td>
</tr>
<tr>
<td>ORDER_HASH</td>
<td>Sorgu sırasında elde edilen HASH değerinin iletildiği parametredir.</td>
</tr>
</tbody></table>
<h3 id='sorgu-sonuc-mesajlari'>Sorgu Sonuç Mesajları</h3>
<table><thead>
<tr>
<th>Mesaj</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>NOT_FOUND</td>
<td>Sorgulanan Değerler ile işlem bulunamadığında karşılaşılan durum mesajıdır.</td>
</tr>
<tr>
<td>CARD_NOTAUTHORIZED</td>
<td>Kullanılan kart ile otorizasyon alınamadığında karşılaşılan durum mesajıdır.</td>
</tr>
<tr>
<td>IN_PROGRESS</td>
<td>İşlem incele aşamasında olduğunda karşılaşılan durum mesajıdır</td>
</tr>
<tr>
<td>PAYMENT_AUTHORIZED</td>
<td>İşlemin otorizasyonunun başarı ile yapıldığında karşılaşılan durum mesajıdır.</td>
</tr>
<tr>
<td>COMPLETE</td>
<td>İşlem başarı ile tamamlandığında karşılaşılan durum mesajıdır.</td>
</tr>
<tr>
<td>FRAUD</td>
<td>İşlem fraud olarak değerlendirildiğinde karşılaşılan durum mesajıdır.</td>
</tr>
<tr>
<td>INVALID</td>
<td>Müşteri tarafından geçersiz bilgi girildiği için onaylanmayan siparişlerde karşılaşılan durum mesajıdır.</td>
</tr>
<tr>
<td>REVERSED</td>
<td>İşlem iptal edildiğinde karşılaşılan durum mesajıdır.</td>
</tr>
<tr>
<td>REFUND</td>
<td>İşlem iade edildiğinde karşılaşılan durum mesajıdır.</td>
</tr>
</tbody></table>
<h2 id='islem-sorgu-servisi-hash-hesaplama'>İşlem Sorgu Servisi Hash Hesaplama</h2>
<p><strong>Örnek IOS bildirimindeki HASH hesaplama için kullanılacak değerler aşağıdaki gibidir.</strong>
<code>MERCHANT = OPU_TEST</code>
<code>REFNOEXT = 7305</code></p>

<p><strong>Bu değerlerin uzunluğu alınarak Key&#39;e göre sıralanmalıdır.</strong>
<code>8OPU_TEST47305</code></p>

<p><strong>Değerler üye işyeri kodlama anahtarınız kullanılarak HMAC_MD5 algoritması ile haslenmelidir.</strong></p>

<ul>
<li>Kullanılan Kodlama Anahtarı: SECRET_KEY</li>
</ul>

<p><strong>Elde edilen değer:</strong> <code>24d86799c6ba0083ceba1f40053cd499</code></p>
<h1 id='iptal-iade-servisi-irn'>İptal/İade Servisi (IRN)</h1>
<blockquote>
<p>Örnek IRN İsteği </p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="s2">"https://secure.payu.com.tr/order/irn.php"</span><span class="p">;</span>
<span class="nv">$secretKey</span> <span class="o">=</span> <span class="s2">"SECRET_KEY"</span><span class="p">;</span>

<span class="nv">$irn</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
<span class="s1">'MERCHANT'</span> <span class="o">=&gt;</span> <span class="s2">"OPU_TEST"</span><span class="p">,</span>
<span class="s1">'ORDER_REF'</span> <span class="o">=&gt;</span> <span class="s2">"39537992"</span><span class="p">,</span>
<span class="s1">'ORDER_AMOUNT'</span> <span class="o">=&gt;</span> <span class="s2">"129.33"</span><span class="p">,</span>
<span class="s1">'ORDER_CURRENCY'</span> <span class="o">=&gt;</span> <span class="s1">'TRY'</span><span class="p">,</span>
<span class="s1">'IRN_DATE'</span> <span class="o">=&gt;</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'Y-m-d H:i:s'</span><span class="p">,</span> <span class="nb">time</span><span class="p">()),</span>
<span class="s1">'AMOUNT'</span> <span class="o">=&gt;</span> <span class="s2">"10"</span><span class="p">,</span>

<span class="p">);</span>

<span class="nv">$hashString</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$irn</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
<span class="nv">$hashString</span> <span class="o">.=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="o">.</span> <span class="nv">$value</span><span class="p">;</span>
<span class="p">}</span>
<span class="nv">$hash</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'md5'</span><span class="p">,</span> <span class="nv">$hashString</span><span class="p">,</span> <span class="nv">$secretKey</span><span class="p">);</span>
<span class="nv">$irn</span><span class="p">[</span><span class="s1">'ORDER_HASH'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$hash</span><span class="p">;</span>

<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYHOST</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>

<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_TIMEOUT</span><span class="p">,</span> <span class="mi">60</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="nv">$irn</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$curlerrcode</span> <span class="o">=</span> <span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$curlerr</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="c"># Importing required libraries.</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlencode</span>
<span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>
<span class="kn">import</span> <span class="nn">collections</span>
<span class="c">#Endpoint</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://secure.payu.com.tr/order/irn.php'</span>

<span class="c">#Secret Key</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s">'SECRET_KEY'</span>

<span class="n">array</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">()</span>
<span class="n">array</span><span class="p">[</span><span class="s">'MERCHANT'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'OPU_TEST'</span>
<span class="n">array</span><span class="p">[</span><span class="s">'ORDER_REF'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'41854324'</span>
<span class="n">array</span><span class="p">[</span><span class="s">'ORDER_AMOUNT'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'10.9'</span>
<span class="n">array</span><span class="p">[</span><span class="s">'ORDER_CURRENCY'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'TRY'</span>
<span class="n">array</span><span class="p">[</span><span class="s">'IRN_DATE'</span><span class="p">]</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">Y-</span><span class="si">%</span><span class="s">m-</span><span class="si">%</span><span class="s">d </span><span class="si">%</span><span class="s">H:</span><span class="si">%</span><span class="s">M:</span><span class="si">%</span><span class="s">S'</span><span class="p">)</span>
<span class="n">array</span><span class="p">[</span><span class="s">'AMOUNT'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'10'</span>

<span class="c"># Initializing the hashstring @param</span>
<span class="n">hashstring</span> <span class="o">=</span> <span class="s">''</span>
<span class="c">#Order Directory</span>
<span class="c"># Getting Array @params</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">array</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="c"># Adding the UTF-8 byte length of each field value at the beginning of field value</span>
    <span class="n">hashstring</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">hashstring</span><span class="p">)</span>

<span class="c"># Calculating signature</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashstring</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c"># Adding signature @param to request array</span>
<span class="n">array</span><span class="p">[</span><span class="s">'ORDER_HASH'</span><span class="p">]</span> <span class="o">=</span> <span class="n">signature</span>
<span class="k">print</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span>

<span class="c"># Sending Request to Endpoint</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">urlencode</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>

<span class="c"># Printing result/response</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>


</code></pre>
<blockquote>
<p>Örnek Başarılı IRN Cevabı</p>
</blockquote>
<pre class="highlight plaintext"><code>&lt;EPAYMENT&gt;41854324|1|OK|2017-10-05 14:12:35|e90c62397d26c6921c0cb6729d563ff4&lt;/EPAYMENT&gt;
</code></pre>
<p>IRN servisi, sipariş iade ve iptal işlemlerinizi, API aracılığı ile kendi sistem arayüzünüzden gerçekleştirmenizi mümkün kılar.</p>
<h3 id='iptal-iade-servisi-istek-parametreleri'>İptal/İade Servisi İstek Parametreleri</h3>
<p>HTTPS Post ile işlem istekleri <code>https://secure.payu.com.tr/order/irn.php</code> adresine gönderilmelidir.</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>MERCHANT</td>
<td>İşyerini ID bilgisidir. Üye İşyeri Kontrol Paneli’nde, hesap ayarları sayfasında bulunmaktadır.</td>
</tr>
<tr>
<td>ORDER_REF</td>
<td>İptal / İade işlemi yapılacak siparişin PayU referans numarasının gönderildiği parametredir.</td>
</tr>
<tr>
<td>ORDER_AMOUNT</td>
<td>İşlemin toplam tutarının gönderildiği parametredir.</td>
</tr>
<tr>
<td>ORDER_CURRENCY</td>
<td>İşlemin gerçekleştiği para biriminin gönderildiği parametredir.</td>
</tr>
<tr>
<td>IRN_DATE</td>
<td>İade/İptal isteğinin gönderildiği zamanın gönderildiği parametredir. (Y-m-d H:i:s (Örn: 2017-01-26 14:30:56)</td>
</tr>
<tr>
<td>ORDER_HASH</td>
<td>İstek sırasında gönderilen değerlerin Key&#39;e göre sıralanıp, başlarına uzunlukları eklendikten sonra HMAC_MD5 algoritması ile hash oluşturulan değerdir.</td>
</tr>
<tr>
<td>AMOUNT</td>
<td>İade yapılacak tutarın belirtildiği parametredir.</td>
</tr>
</tbody></table>
<h3 id='iptal-iade-servisi-yanit-parametreleri'>İptal/İade Servisi Yanıt Parametreleri</h3>
<table><thead>
<tr>
<th>Parametre</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>ORDER_REF</td>
<td>İptal / İade işlemi yapılacak siparişin PayU referans numarasıdır.</td>
</tr>
<tr>
<td>RESPONSE_CODE</td>
<td>İstek yanıtının döndüğü kod değeridir.</td>
</tr>
<tr>
<td>RESPONSE_MSG</td>
<td>İstek yanıt mesajıdır.</td>
</tr>
<tr>
<td>IRN_DATE</td>
<td>İptal/İade işlem isteğinin gönderildiği zamana ait bilgiyi ileten parametredir.</td>
</tr>
<tr>
<td>ORDER_HASH</td>
<td>İstek sırasında gönderilen değerlerin Key&#39;e göre sıralanıp, başlarına uzunlukları eklendikten sonra HMAC_MD5 algoritması ile hash oluşturulan değerdir. Yanıtta bulunan değer PayU tarafından hesaplanmaktadır.</td>
</tr>
</tbody></table>
<h3 id='iptal-iade-servisi-hash-hesaplama'>İptal/İade Servisi Hash Hesaplama</h3>
<p><strong>Örnek IRN Servisinde HASH hesaplama için kullanılacak değerler aşağıdaki gibidir.</strong></p>

<aside class="notice">
 IRN Servisinde hash hesaplaması yaparken, Key'e göre sıralamamalısınız, aşağıdaki örnek sıra ile işleme almalısınız.
 </aside>

<ul>
<li><code>MERCHANT = OPU_TEST</code></li>
<li><code>ORDER_REF = 39537992</code></li>
<li><code>ORDER_AMOUNT = 129.33</code></li>
<li><code>ORDER_CURRENCY = TRY</code></li>
<li><code>IRN_DATE = 2017-10-05 10:55:26</code></li>
<li><code>AMOUNT = 10</code></li>
</ul>

<p><strong>Bu değerlerin uzunluğu alınarak, değerin başına eklendikten sonra yukarıdaki sıra ile sıralanmalıdır.</strong>
<code>8OPU_TEST8395379926129.333TRY192017-10-05 10:55:26210</code></p>

<p><strong>Değerler üye işyeri kodlama anahtarınız kullanılarak HMAC_MD5 algoritması ile haslenmelidir.</strong></p>

<ul>
<li>Kullanılan Kodlama Anahtarı: SECRET_KEY</li>
</ul>

<p><strong>Elde edilen değer:</strong> <code>4c977d3b3f1e50ba14f1ac60e62e03f2</code></p>
<h3 id='iptal-iade-servisi-sonuc-mesajlari'>İptal/İade Servisi Sonuç Mesajları</h3>
<table><thead>
<tr>
<th>Mesaj</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>OK</td>
<td>İade/İptal Başarılı olarak yapıldığında karşılaşılan durum mesajıdır.</td>
</tr>
<tr>
<td>ORDER_REF missing or format incorrect</td>
<td>İşlemin referans numarası eksik,yanlış veya geçersiz bir biçimde gönderildiğinde karşılaşılan durum mesajıdır.</td>
</tr>
<tr>
<td>ORDER_AMOUNT missing or format incorrect</td>
<td>Toplam sipariş tutarı eksik,yanlış veya geçersiz bir biçimde gönderildiğinde karşılaşılan durum mesajıdır.</td>
</tr>
<tr>
<td>ORDER_CURRENCY is missing or format incorrect</td>
<td>Siparişte kullanılan para birimi  eksik,yanlış veya geçersiz bir biçimde gönderildiğinde karşılaşılan durum mesajıdır.</td>
</tr>
<tr>
<td>IRN_DATE is not in the correct format</td>
<td>IRN_DATE parametresinde ki saat formatı hatalı kullanıldığında karşılaşılan durum mesajıdır.</td>
</tr>
<tr>
<td>Error cancelling order</td>
<td>Sipariş iptal edilirken hata ile karşılaşıldığında meydana gelen durum mesajıdır.</td>
</tr>
<tr>
<td>Order already cancelled</td>
<td>Sipariş daha önceden iptal edildiğide karşılaşılan durum mesajıdır.</td>
</tr>
<tr>
<td>Unknown error</td>
<td>Bilinmeyen bir hata oluştuğunda meydana gelen hata mesajıdır.</td>
</tr>
<tr>
<td>Invalid ORDER_REF</td>
<td>İade/İptal işlemi sırasında geçersiz referans numarası kullanılması durumunda karşılaşılan bir hatadır.</td>
</tr>
<tr>
<td>Invalid ORDER_AMOUNT</td>
<td>İade/İptal işlemi sırasında toplam sipariş tutarının yanlış kullanılması durumunda karşılaşılan durum mesajıdır.</td>
</tr>
<tr>
<td>Invalid ORDER_CURRENCY</td>
<td>İade/İptal işleminde para biriminin yanlış kullanılması durumunda karşılaşılan durum mesajıdır.</td>
</tr>
<tr>
<td>AMOUNT missing or format incorrect</td>
<td>İptal/İade işlemi sırasında iade edilecek tutarın belirtilmediği veya yanlış formatta belirtildiğinde karşılaşılan durum mesajıdır.</td>
</tr>
<tr>
<td>Invalid AMOUNT</td>
<td>İptal/İade işlemi sırasında iade edilecek tutarın geçersiz bir tutar belirlenmesi durumunda karşılaşılan durum mesajıdır.</td>
</tr>
<tr>
<td>Amount mismatch</td>
<td>İptal/İade işlemi sırasında iade edilecek tutarın işlem tutarından fazla olması durumunda karşılaşılan durum mesajıdır.</td>
</tr>
</tbody></table>
<h1 id='bin-servisi'>BIN Servisi</h1>
<p>BIN Servisi ile Bank Identification Number (BIN) sorgulaması yaparak kartın aşağıda listelenen bilgilerine ulaşılmasını sağlayan servisimizdir. </p>
<h2 id='bin-servisi-v1'>BIN Servisi v1</h2>
<blockquote>
<p>Örnek BIN API v1 İsteği </p>
</blockquote>
<pre class="highlight php tab-php"><code> <span class="cp">&lt;?php</span>
 <span class="nv">$URL</span> <span class="o">=</span><span class="s2">"https://secure.payu.com.tr/api/card-info/v1/"</span><span class="p">;</span>
 <span class="nv">$MERCHANT</span> <span class="o">=</span>  <span class="s2">"OPU_TEST"</span><span class="p">;</span>
 <span class="nv">$SECRET</span> <span class="o">=</span> <span class="s2">"SECRET_KEY"</span><span class="p">;</span>
 <span class="nv">$TIMESTAMP</span> <span class="o">=</span> <span class="nb">time</span><span class="p">();</span>
 <span class="nv">$BIN</span> <span class="o">=</span> <span class="s2">"557829"</span><span class="p">;</span>
 <span class="nv">$sig</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$MERCHANT</span><span class="o">.</span><span class="nv">$TIMESTAMP</span><span class="p">,</span><span class="nv">$SECRET</span><span class="p">);</span>
 <span class="nv">$urlReqest</span>  <span class="o">=</span> <span class="nv">$URL</span><span class="o">.</span><span class="nv">$BIN</span><span class="o">.</span><span class="s2">"?merchant="</span><span class="o">.</span><span class="nv">$MERCHANT</span><span class="o">.</span><span class="s2">"&amp;timestamp="</span><span class="o">.</span><span class="nv">$TIMESTAMP</span><span class="o">.</span><span class="s2">"&amp;signature="</span><span class="o">.</span><span class="nv">$sig</span><span class="p">;</span>
 <span class="k">echo</span> <span class="s2">"&lt;a href='"</span><span class="o">.</span><span class="nv">$urlReqest</span><span class="o">.</span><span class="s2">"' target='_blank'&gt;"</span><span class="o">.</span><span class="nv">$urlReqest</span><span class="o">.</span><span class="s2">"&lt;/a&gt;"</span><span class="p">;</span>
 <span class="nv">$xml</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="nv">$urlReqest</span><span class="p">);</span>
 <span class="nb">var_dump</span><span class="p">(</span><span class="nb">json_decode</span><span class="p">(</span><span class="nv">$xml</span><span class="p">,</span><span class="mi">1</span><span class="p">));</span>
 <span class="cp">?&gt;</span>
</code></pre><pre class="highlight python tab-python"><code>
<span class="c"># Importing required libraries.</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>
<span class="kn">import</span> <span class="nn">collections</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">csv</span>

<span class="c">#Secret Key</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s">'SECRET_KEY'</span>
<span class="n">binno</span> <span class="o">=</span> <span class="s">"557829"</span>
<span class="n">array</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">()</span>
<span class="n">array</span><span class="p">[</span><span class="s">'merchant'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'OPU_TEST'</span>
<span class="n">array</span><span class="p">[</span><span class="s">'timestamp'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'.'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="c"># Initializing the hashstring @param</span>
<span class="n">hashstring</span> <span class="o">=</span> <span class="s">''</span>

<span class="c"># Sorting Array @params</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">array</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

<span class="c"># Adding the UTF-8 byte length of each field value at the beginning of field value</span>
    <span class="n">hashstring</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">hashstring</span><span class="p">)</span>

<span class="c"># Calculating signature</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashstring</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span>

<span class="c"># Adding Signature @param to dict</span>
<span class="n">array</span><span class="p">[</span><span class="s">'signature'</span><span class="p">]</span> <span class="o">=</span> <span class="n">signature</span>

<span class="c"># Endpoint</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://secure.payu.com.tr/api/card-info/v1/{0}?merchant={merchant}&amp;timestamp={timestamp}&amp;signature={signature}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">binno</span><span class="p">,</span> <span class="o">**</span><span class="n">array</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="c"># Sending Request to Endpoint</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>

<span class="c"># Printing result/response</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>


</code></pre>
<p>Birinci versiyonda karta ait aşağıdaki bilgiler elde edilebilir.</p>

<ul>
<li>Bin Tipini (Mastercard/Visa/Amex/Troy v.b.)</li>
<li>Kart Bankasının Ülkesini</li>
<li>Kart Bankasını</li>
<li>Kart Tipini (Kredi Kartı / Debit)</li>
<li>Bağlılık Programını(Bonus,Axess v.b.)</li>
<li>Taksit seçeneklerini</li>
</ul>
<h3 id='istek-parametreleri-2'>İstek Parametreleri</h3>
<p>İşlem isteği <code>https://secure.payu.com.tr/api/card-info/v1/</code> URL&#39;ine &quot;Merchant&quot;,&quot;Timestamp&quot;, &quot;BIN&quot; ve hesaplanan signature değeri URL POST metodu ile gönderilmelidir.</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>MERCHANT</td>
<td>Üye iş yeri entegrasyon ismi.</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>Milisaniye cinsinden UTC(TR saatine göre 3 saat geri.) zaman damgası.</td>
</tr>
<tr>
<td>SIG</td>
<td>İstek sırasında gönderilen değerlerin HMAC_SHA256 algoritması ile hash oluşturulan değerdir.</td>
</tr>
<tr>
<td>BIN</td>
<td>Kredi kartının ilk 6 hanesi.</td>
</tr>
</tbody></table>
<h3 id='yanit-parametreleri-2'>Yanıt Parametreleri</h3>
<blockquote>
<p>Örnek Başarılı BIN Servisi v1 Yanıtı</p>
</blockquote>
<pre class="highlight php tab-php"><code>{"meta":{"status":{"code":0,"message":"success"},"response":{"httpCode":200,"httpMessage":"200 OK"}},"cardBinInfo":{"binType":"MASTERCARD","binIssuer":"AKBANK","cardType":"CREDIT","country":"Turkey","program":"Axess","installments":[1,"2","3","4","5","6","7","8","9","10","11","12"],"paymentMethod":"CCVISAMC"}}
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">"meta"</span><span class="p">:{</span><span class="s">"status"</span><span class="p">:{</span><span class="s">"code"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">"message"</span><span class="p">:</span><span class="s">"success"</span><span class="p">},</span><span class="s">"response"</span><span class="p">:{</span><span class="s">"httpCode"</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span><span class="s">"httpMessage"</span><span class="p">:</span><span class="s">"200 OK"</span><span class="p">}},</span><span class="s">"cardBinInfo"</span><span class="p">:{</span><span class="s">"binType"</span><span class="p">:</span><span class="s">"MASTERCARD"</span><span class="p">,</span><span class="s">"binIssuer"</span><span class="p">:</span><span class="s">"AKBANK"</span><span class="p">,</span><span class="s">"cardType"</span><span class="p">:</span><span class="s">"CREDIT"</span><span class="p">,</span><span class="s">"country"</span><span class="p">:</span><span class="s">"Turkey"</span><span class="p">,</span><span class="s">"program"</span><span class="p">:</span><span class="s">"Axess"</span><span class="p">,</span><span class="s">"installments"</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="s">"2"</span><span class="p">,</span><span class="s">"3"</span><span class="p">,</span><span class="s">"4"</span><span class="p">,</span><span class="s">"5"</span><span class="p">,</span><span class="s">"6"</span><span class="p">,</span><span class="s">"7"</span><span class="p">,</span><span class="s">"8"</span><span class="p">,</span><span class="s">"9"</span><span class="p">,</span><span class="s">"10"</span><span class="p">,</span><span class="s">"11"</span><span class="p">,</span><span class="s">"12"</span><span class="p">],</span><span class="s">"paymentMethod"</span><span class="p">:</span><span class="s">"CCVISAMC"</span><span class="p">}}</span>
</code></pre>
<table><thead>
<tr>
<th>Parametre</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>binType</td>
<td>Sorgulunan kartın Bin Tipinin iletildiği parametredir.(Mastercard,Visa,Troy v.b.)</td>
</tr>
<tr>
<td>binIssuer</td>
<td>Sorgulunan kartın Banka bilgisin iletildiği bankadır. (Akbank, ING Bank v.b.)</td>
</tr>
<tr>
<td>cardType</td>
<td>Sorgulanan kartın tipinin iletildiği parametredir.( Kredi kartı, Debit card )</td>
</tr>
<tr>
<td>country</td>
<td>Sorgulanan kartın ülkesinin iletildiği parametredir.</td>
</tr>
<tr>
<td>program</td>
<td>Sorgulanan kartın bağlılık programı bilgisinin iletildiği paramtredir.( Axes,Bonus v.b.)</td>
</tr>
<tr>
<td>installments</td>
<td>Sorgulanan karta üye işyeri tarafından uygulanabilecek taksit değerlerinin iletildiği parametredir.</td>
</tr>
</tbody></table>
<h3 id='bin-servisi-v1-hash-hesaplama'>BIN Servisi v1 Hash Hesaplama</h3>
<p><strong>Örnek BIN Servisinde HASH hesaplama için kullanılacak değerler aşağıdaki gibidir.</strong></p>

<aside class="notice">
 BIN Servisi v1 Servisinde hash hesaplaması yaparken, Key'e göre sıralamamalısınız, aşağıdaki örnek sıra ile işleme almalısınız.
 </aside>

<ul>
<li><code>merchant = OPU_TEST</code></li>
<li><code>timestamp = 1507270831</code></li>
</ul>

<p><strong>Bu yukarıdaki sıra ile sıralanmalıdır.</strong>
<code>OPU_TEST1507270831</code></p>

<p><strong>Değerler üye işyeri kodlama anahtarınız kullanılarak HMAC_SHA256 algoritması ile haslenmelidir.</strong></p>

<ul>
<li>Kullanılan Kodlama Anahtarı: SECRET_KEY</li>
</ul>

<p><strong>Elde edilen değer:</strong> <code>9e4754deb7d62ab8b29abc18aca2829dab076e85da8e5968a022b8525bbbd829</code></p>
<h2 id='bin-servisi-v2-bin-ve-puan-sorgusu'>BIN Servisi v2(BIN ve Puan Sorgusu)</h2>
<blockquote>
<p>Örnek BIN API v2 İsteği </p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlencode</span>
<span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">urlopen</span>

<span class="c"># Endpoint</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://secure.payu.com.tr/api/card-info/v2/'</span>

<span class="c"># PayU Merchant's Secret Key</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s">'SECRET_KEY'</span>

<span class="c"># Request @params Begin</span>
<span class="n">array</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c"># PayU Merchant's Merchant ID</span>
    <span class="s">'merchant'</span><span class="p">:</span> <span class="s">'OPU_TEST'</span><span class="p">,</span>
    <span class="s">'extraInfo'</span><span class="p">:</span> <span class="s">'true'</span><span class="p">,</span>
    <span class="s">'dateTime'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">Y-</span><span class="si">%</span><span class="s">m-</span><span class="si">%</span><span class="s">dT</span><span class="si">%</span><span class="s">X+00:00'</span><span class="p">),</span>
    <span class="s">'cc_cvv'</span><span class="p">:</span> <span class="s">'000'</span><span class="p">,</span>
    <span class="s">'cc_owner'</span><span class="p">:</span> <span class="s">'Ad Soyad'</span><span class="p">,</span>
    <span class="s">'exp_year'</span><span class="p">:</span> <span class="s">'2018'</span><span class="p">,</span>
    <span class="s">'exp_month'</span><span class="p">:</span> <span class="s">'12'</span><span class="p">,</span>
    <span class="s">'cc_number'</span><span class="p">:</span> <span class="s">'4355084355084358'</span><span class="p">,</span>
<span class="p">}</span>
<span class="c"># Initializing the hashstring @param</span>
<span class="n">hashstring</span> <span class="o">=</span> <span class="s">''</span>

<span class="c"># Sorting Array @params</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">array</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>

<span class="c"># Adding the UTF-8 byte length of each field value at the beginning of field value</span>
    <span class="n">hashstring</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'UTF-8'</span><span class="p">)))</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">hashstring</span><span class="p">)</span>

<span class="c"># Calculating signature</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashstring</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">),</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c"># Adding signature @param to request array</span>
<span class="n">array</span><span class="p">[</span><span class="s">'signature'</span><span class="p">]</span> <span class="o">=</span> <span class="n">signature</span>

<span class="k">print</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span>

<span class="c"># Sending Request to Endpoint</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">urlencode</span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>

<span class="c"># Printing result/response</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="nv">$url</span><span class="o">=</span> <span class="s2">"https://secure.payu.com.tr/api/card-info/v2/"</span><span class="p">;</span>
<span class="nv">$secret</span><span class="o">=</span><span class="s2">"SECRET_KEY"</span><span class="p">;</span>
<span class="nv">$arParams</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s2">"extraInfo"</span>        <span class="o">=&gt;</span> <span class="s2">"true"</span><span class="p">,</span>
    <span class="s2">"dateTime"</span>     <span class="o">=&gt;</span> <span class="nb">gmdate</span><span class="p">(</span><span class="s2">"c"</span><span class="p">,</span> <span class="nb">time</span><span class="p">()),</span>
    <span class="s2">"merchant"</span>      <span class="o">=&gt;</span> <span class="s1">'OPU_TEST'</span><span class="p">,</span>
    <span class="s2">"cc_cvv"</span>        <span class="o">=&gt;</span> <span class="s2">"000"</span><span class="p">,</span>
    <span class="s2">"cc_owner"</span> <span class="o">=&gt;</span> <span class="s2">"Göktürk Enez"</span><span class="p">,</span>
    <span class="s2">"exp_year"</span> <span class="o">=&gt;</span> <span class="s2">"2020"</span><span class="p">,</span>
    <span class="s2">"exp_month"</span> <span class="o">=&gt;</span> <span class="s2">"12"</span><span class="p">,</span>
    <span class="s2">"cc_number"</span> <span class="o">=&gt;</span> <span class="s2">"4355084355084358"</span><span class="p">,</span>
<span class="p">);</span>
<span class="nb">ksort</span><span class="p">(</span><span class="nv">$arParams</span><span class="p">);</span>
<span class="nv">$hashString</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$arParams</span> <span class="k">as</span> <span class="nv">$v</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$hashString</span> <span class="o">.=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$v</span><span class="p">)</span> <span class="o">.</span> <span class="nv">$v</span><span class="p">;</span>
<span class="p">}</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$arParams</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$hashString</span><span class="p">;</span>
<span class="nv">$arParams</span><span class="p">[</span><span class="s2">"signature"</span><span class="p">]</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s2">"SHA256"</span><span class="p">,</span> <span class="nv">$hashString</span><span class="p">,</span> <span class="nv">$secret</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$arParams</span><span class="p">[</span><span class="s2">"signature"</span><span class="p">];</span>
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYHOST</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_IPRESOLVE</span><span class="p">,</span> <span class="nx">CURL_IPRESOLVE_V4</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_TIMEOUT</span><span class="p">,</span> <span class="mi">60</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="nv">$arParams</span><span class="p">));</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$curlerrcode</span> <span class="o">=</span> <span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="nv">$curlerr</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$curlerr</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$curlerrcode</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$parsedXML</span> <span class="o">=</span> <span class="o">@</span><span class="nb">simplexml_load_string</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
    <span class="k">print</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$parsedXML</span> <span class="o">!==</span> <span class="k">FALSE</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">"XML parsing is failed"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"cURL error: "</span> <span class="o">.</span> <span class="nv">$curlerr</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre>
<aside class="notice">
İkinci versiyonda, birinci versiyona ek olarak; taksit sayısı ile birlikte komisyon oranlarını ve kartın kullanılabilir puan bilgisi dönmektedir.
 </aside>
 

<p>Kart bilgilerinin tümü kullanılarak:</p>

<ul>
<li>Kart Ülkesini </li>
<li>Kart bankasını</li>
<li>Bin tipini (Visa/Mastercard/Amex/Troy v.s.)</li>
<li>Kart bağlılık programını (bonus,axess v.s.) </li>
<li>Kart tipini (kredi kartı/debit kart) </li>
<li>Kullanılabilir puanını </li>
<li>Sorgulanan karta üye işyeri tarafından uygulanabilecek taksit değerlerinin ve taksit bazlı komisyon oranını öğrenebilirsiniz.<br></li>
</ul>
<h3 id='istek-parametreleri-3'>İstek Parametreleri</h3>
<p>HTTPS Post ile işlem istekleri <code>https://secure.payu.com.tr/api/card-info/v2/</code> adresine gönderilmelidir.</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>merchant</td>
<td>Üye iş yeri entegrasyon ismi.</td>
</tr>
<tr>
<td>extraInfo</td>
<td>true değer ile gönderilmesi durumunda puan sorgusu yapılmasını sağlayan parametredir.</td>
</tr>
<tr>
<td>dateTime</td>
<td>ISO_8601 formatında istek aman değeri (Örn: 2017-10-06T06:52:14+00:00 )</td>
</tr>
<tr>
<td>cc_cvv</td>
<td>Sorgusu yapılacak kartın güvenlik kodu</td>
</tr>
<tr>
<td>cc_owner</td>
<td>Sorgusu yapılacak kart sahibinin Ad Soyad bilgisi</td>
</tr>
<tr>
<td>exp_year</td>
<td>Sorgusu yapılacak kartın son kullanma yılı</td>
</tr>
<tr>
<td>exp_month</td>
<td>Sorgusu yapılacak kartın son kullanma ayı</td>
</tr>
<tr>
<td>cc_number</td>
<td>Sorgusu yapılacak kartın kart numarası</td>
</tr>
<tr>
<td>signature</td>
<td>İstek sırasında gönderilen değerlerin Key&#39;e göre sıralanıp, başlarına uzunlukları eklendikten sonra HMAC_SHA256 algoritması ile hash oluşturulan değerdir.</td>
</tr>
</tbody></table>
<h3 id='yanit-parametreleri-3'>Yanıt Parametreleri</h3>
<blockquote>
<p>Örnek Başarılı BIN API v2 Yanıtı </p>
</blockquote>
<pre class="highlight php tab-php"><code>{"meta":{"code":200,"message":"success"},"cardInfo":{"cardMask":"4355084355084358","binNumber":"435508","cardBrand":"VISA","issuerBank":"AKBANK","issuerCountry":"Turkey","cardType":"CREDIT","cardProgram":"Axess","installmentOptions":[{"installmentNumber":1,"installmentAditionalCostPercent":0},{"installmentNumber":"2","installmentAditionalCostPercent":"0.00"},{"installmentNumber":"3","installmentAditionalCostPercent":"6.16"},{"installmentNumber":"4","installmentAditionalCostPercent":"7.07"},{"installmentNumber":"5","installmentAditionalCostPercent":"7.53"},{"installmentNumber":"6","installmentAditionalCostPercent":"8.24"},{"installmentNumber":"7","installmentAditionalCostPercent":"8.98"},{"installmentNumber":"8","installmentAditionalCostPercent":"9.25"},{"installmentNumber":"9","installmentAditionalCostPercent":"10.25"},{"installmentNumber":"10","installmentAditionalCostPercent":"13.64"},{"installmentNumber":"11","installmentAditionalCostPercent":"14.94"},{"installmentNumber":"12","installmentAditionalCostPercent":"16.28"}],"loyaltyPoints":[{"type":"","number":87945,"moneyValue":{"amount":879.45,"currency":"TRY"}}]}}

</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">"meta"</span><span class="p">:{</span><span class="s">"code"</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span><span class="s">"message"</span><span class="p">:</span><span class="s">"success"</span><span class="p">},</span><span class="s">"cardInfo"</span><span class="p">:{</span><span class="s">"cardMask"</span><span class="p">:</span><span class="s">"4355084355084358"</span><span class="p">,</span><span class="s">"binNumber"</span><span class="p">:</span><span class="s">"435508"</span><span class="p">,</span><span class="s">"cardBrand"</span><span class="p">:</span><span class="s">"VISA"</span><span class="p">,</span><span class="s">"issuerBank"</span><span class="p">:</span><span class="s">"AKBANK"</span><span class="p">,</span><span class="s">"issuerCountry"</span><span class="p">:</span><span class="s">"Turkey"</span><span class="p">,</span><span class="s">"cardType"</span><span class="p">:</span><span class="s">"CREDIT"</span><span class="p">,</span><span class="s">"cardProgram"</span><span class="p">:</span><span class="s">"Axess"</span><span class="p">,</span><span class="s">"installmentOptions"</span><span class="p">:[{</span><span class="s">"installmentNumber"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s">"installmentAditionalCostPercent"</span><span class="p">:</span><span class="mi">0</span><span class="p">},{</span><span class="s">"installmentNumber"</span><span class="p">:</span><span class="s">"2"</span><span class="p">,</span><span class="s">"installmentAditionalCostPercent"</span><span class="p">:</span><span class="s">"0.00"</span><span class="p">},{</span><span class="s">"installmentNumber"</span><span class="p">:</span><span class="s">"3"</span><span class="p">,</span><span class="s">"installmentAditionalCostPercent"</span><span class="p">:</span><span class="s">"6.16"</span><span class="p">},{</span><span class="s">"installmentNumber"</span><span class="p">:</span><span class="s">"4"</span><span class="p">,</span><span class="s">"installmentAditionalCostPercent"</span><span class="p">:</span><span class="s">"7.07"</span><span class="p">},{</span><span class="s">"installmentNumber"</span><span class="p">:</span><span class="s">"5"</span><span class="p">,</span><span class="s">"installmentAditionalCostPercent"</span><span class="p">:</span><span class="s">"7.53"</span><span class="p">},{</span><span class="s">"installmentNumber"</span><span class="p">:</span><span class="s">"6"</span><span class="p">,</span><span class="s">"installmentAditionalCostPercent"</span><span class="p">:</span><span class="s">"8.24"</span><span class="p">},{</span><span class="s">"installmentNumber"</span><span class="p">:</span><span class="s">"7"</span><span class="p">,</span><span class="s">"installmentAditionalCostPercent"</span><span class="p">:</span><span class="s">"8.98"</span><span class="p">},{</span><span class="s">"installmentNumber"</span><span class="p">:</span><span class="s">"8"</span><span class="p">,</span><span class="s">"installmentAditionalCostPercent"</span><span class="p">:</span><span class="s">"9.25"</span><span class="p">},{</span><span class="s">"installmentNumber"</span><span class="p">:</span><span class="s">"9"</span><span class="p">,</span><span class="s">"installmentAditionalCostPercent"</span><span class="p">:</span><span class="s">"10.25"</span><span class="p">},{</span><span class="s">"installmentNumber"</span><span class="p">:</span><span class="s">"10"</span><span class="p">,</span><span class="s">"installmentAditionalCostPercent"</span><span class="p">:</span><span class="s">"13.64"</span><span class="p">},{</span><span class="s">"installmentNumber"</span><span class="p">:</span><span class="s">"11"</span><span class="p">,</span><span class="s">"installmentAditionalCostPercent"</span><span class="p">:</span><span class="s">"14.94"</span><span class="p">},{</span><span class="s">"installmentNumber"</span><span class="p">:</span><span class="s">"12"</span><span class="p">,</span><span class="s">"installmentAditionalCostPercent"</span><span class="p">:</span><span class="s">"16.28"</span><span class="p">}],</span><span class="s">"loyaltyPoints"</span><span class="p">:[{</span><span class="s">"type"</span><span class="p">:</span><span class="s">""</span><span class="p">,</span><span class="s">"number"</span><span class="p">:</span><span class="mi">87945</span><span class="p">,</span><span class="s">"moneyValue"</span><span class="p">:{</span><span class="s">"amount"</span><span class="p">:</span><span class="mf">879.45</span><span class="p">,</span><span class="s">"currency"</span><span class="p">:</span><span class="s">"TRY"</span><span class="p">}}]}}</span>

</code></pre>
<table><thead>
<tr>
<th>Parametre</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>cardMask</td>
<td>Sorgulunan kart numarası.</td>
</tr>
<tr>
<td>binNumber</td>
<td>Sorgulunan kartın BIN numarası.</td>
</tr>
<tr>
<td>cardBrand</td>
<td>Sorgulunan kartın Bin Tipinin iletildiği parametredir.(Mastercard,Visa,Troy v.b.)</td>
</tr>
<tr>
<td>issuerBank</td>
<td>Sorgulunan kartın Banka bilgisin iletildiği bankadır. (Akbank, ING Bank v.b.)</td>
</tr>
<tr>
<td>cardType</td>
<td>Sorgulanan kartın tipinin iletildiği parametredir.( Kredi kartı, Debit card )</td>
</tr>
<tr>
<td>issuerCountry</td>
<td>Sorgulanan kartın ülkesinin iletildiği parametredir.</td>
</tr>
<tr>
<td>cardProgram</td>
<td>Sorgulanan kartın bağlılık programı bilgisinin iletildiği paramtredir.( Axes,Bonus v.b.)</td>
</tr>
<tr>
<td>installmentOptions</td>
<td>Sorgulanan karta üye işyeri tarafından uygulanabilecek taksit değerlerinin iletildiği parametredir.</td>
</tr>
<tr>
<td>installmentNumber</td>
<td>Sorgulanan karta üye işyeri tarafından uygulanabilecek taksit sayısının iletildiği parametredir.</td>
</tr>
<tr>
<td>installmentAditionalCostPercent</td>
<td>Sorgulanan karta üye işyeri tarafından uygulanabilecek taksit sayısının komisyon bilgisinin iletildiği parametredir.</td>
</tr>
<tr>
<td>loyaltyPoints</td>
<td>Sorgulanan kartın puan değerinin iletildiği parametredir.</td>
</tr>
<tr>
<td>type</td>
<td>Kullanılabilir puan tipi</td>
</tr>
<tr>
<td>number</td>
<td>Kullanılabilir puan adedi</td>
</tr>
<tr>
<td>moneyValue</td>
<td>Kullanılabilir puanın para birimi cinsinden değeri</td>
</tr>
<tr>
<td>amount</td>
<td>Kullanılabilir puanın para birimi cinsinden tutarı</td>
</tr>
<tr>
<td>currency</td>
<td>Kullanılabilir puanın para birimi</td>
</tr>
</tbody></table>
<h3 id='bin-servisi-v2-hash-hesaplama'>BIN Servisi v2 Hash Hesaplama</h3>
<p><strong>Örnek BIN Servisi v2 HASH hesaplama için kullanılacak değerler aşağıdaki gibidir.</strong></p>

<ul>
<li><code>merchant = OPU_TEST</code></li>
<li><code>extraInfo = true</code></li>
<li><code>dateTime = 2017-10-06T07:09:38+00:00</code></li>
<li><code>cc_cvv = 000</code></li>
<li><code>cc_owner = Ad Soyad</code></li>
<li><code>exp_month = 12</code></li>
<li><code>exp_year = 2018</code></li>
<li><code>cc_number = 4355 0843 5508 4358</code></li>
</ul>

<p><strong>Parametreler Key&#39;e göre sıralanıp ardından uzunluğu alınarak, değerin başına eklenmeli.</strong>
<code>30001643550843550843588Ad Soyad252017-10-06T07:09:38+00:00212420184true8OPU_TEST</code></p>

<p><strong>Değerler üye işyeri kodlama anahtarınız kullanılarak HMAC_SHA256 algoritması ile haslenmelidir.</strong></p>

<ul>
<li>Kullanılan Kodlama Anahtarı: SECRET_KEY</li>
</ul>

<p><strong>Elde edilen değer:</strong> <code>33aa1398ab81a62af53de5481f2958316b051621230d548aad1600f0f0709d6e</code></p>
<h1 id='test-bilgileri'>Test Bilgileri</h1><h2 id='uye-isyeri-kontrol-paneli-giris-bilgileri'>Üye İşyeri Kontrol Paneli Giriş Bilgileri</h2>
<p>Üye İşyeri Kontrol Paneli’ne girişlerde IP kısıtı uygulanmaktadır. Test hesabının üye işyeri paneline giriş yapabilmek için IP adreslerinizi destek@payu.com.tr adresimizden bize iletmeniz gerekmektedir.</p>

<ul>
<li>URL: https://secure.payu.com.tr/cpanel/ </li>
<li>Kullanıcı Adı: 1@payu.com.tr</li>
<li>Şifre: Test1234!</li>
<li>Kullanıcı Adı: 2@payu.com.tr </li>
<li>Şifre: Test1234!</li>
</ul>
<h2 id='api-kullanici-bilgileri'>API Kullanıcı Bilgileri</h2><h3 id='3d-olmayan-islemler-icin'>3D olmayan işlemler için;</h3>
<ul>
<li>Üye İşyeri Entegrasyon İsmi (MERCHANT): OPU_TEST </li>
<li>Kodlama Anahtarı (SECRET_KEY): SECRET_KEY</li>
</ul>
<h3 id='3d-islemler-icin'>3D işlemler için;</h3>
<ul>
<li>MERCHANT=PALJZXGV</li>
<li>SECRET_KEY= f*%J7z6_#|5]s7V4[g3] </li>
</ul>
<h2 id='test-kartlari'>Test Kartları</h2><h3 id='akbank-test-kredi-karti'>Akbank Test Kredi Kartı</h3>
<ul>
<li>Kart Numarası (Visa) : 4355084355084358<br></li>
<li>Kart Numarası (Master Card) : 5571135571135575<br></li>
<li>Son Kullanma Tarihi :12/18<br></li>
<li>Güvenlik Numarası : 000<br></li>
<li>Kart 3D Secure Şifresi : a<br></li>
</ul>
<h3 id='akbank-debit-kart'>Akbank Debit Kart</h3>
<ul>
<li>Kart Numarası (Visa) : 4748544748544745</li>
<li>Son Kullanma Tarihi :12/18</li>
<li>Güvenlik Numarası : 000</li>
<li>Kart 3D Secure Şifresi : a</li>
</ul>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="php">PHP</a>
                <a href="#" data-language-name="python">Python 3</a>
          </div>
      </div>
    </div>
  </body>
</html>
